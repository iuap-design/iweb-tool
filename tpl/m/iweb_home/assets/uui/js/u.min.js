function AbstractMasker(){}function AbstractSplitMasker(){}function AddressMasker(e){this.update(e)}function NumberMasker(e){this.update(e)}function CurrencyMasker(e){this.update(e)}function DateTimeMasker(e){this.update(e)}function DateMasker(e){this.update(e)}function TimeMasker(e){this.update(e)}function PercentMasker(){}function toColorfulString(e){var t;return e?null==e.color?e.value:(t=e.color,'<font color="'+t+'">'+e.value+"</font>"):""}function StringElement(e){this.value=e}function FormatResult(e,t){this.value=e,this.color=t}function compressContent(e){if(window.compressObj=document.getElementById("Compress"),window.compressObj)try{return window.compressObj.compress(e)}catch(t){return null}return null}+function(e){"use strict";var t="1.0.0",i="i_theme",n="i_locale",o="i_languages",s="usercode",r=-480,a="contextpath",d={version:t};window.getCookie||(window.getCookie=function(e){var t="(?:; )?"+e+"=([^;]*);?",i=new RegExp(t);return i.test(document.cookie)?decodeURIComponent(RegExp.$1):null}),window.createShellObject=function(e){var t=function(){};return t.prototype=e,new t},function(){var t={},l={},c={},u={"float":{precision:2},datetime:{format:"yyyy-MM-dd hh:mm:ss",metaType:"DateTimeFormatMeta",speratorSymbol:"-"},time:{format:"hh:mm:ss"},date:{format:"yyyy-MM-dd"},currency:{precision:2,curSymbol:"ï¿¥"}},h={};h.getEnvironment=function(){return createShellObject(t)},h.getClientAttributes=function(){return createShellObject(l)},h.setContextPath=function(e){return t[a]=e},h.getContextPath=function(e){return t[a]},h.setClientAttribute=function(e,t){l[e]=t},h.getSessionAttributes=function(){return createShellObject(c)},h.setSessionAttribute=function(e,t){c[e]=t,setCookie("ISES_"+e,t)},h.removeClientAttribute=function(e){l[e]=null,execIgnoreError(function(){delete l[e]})},h.getRootComponent=function(){return this.rootComponet},h.setRootComponent=function(e){this.rootComponet=e},h.getTheme=function(){return this.getEnvironment().theme},h.getLocale=function(){return this.getEnvironment().locale},h.getLanguages=function(){return this.getEnvironment().languages},h.collectEnvironment=function(){var e=this.getEnvironment(),t=this.getSessionAttributes();for(var i in l)t[i]=l[i];return e.clientAttributes=t,e},h.changeTheme=function(n){t.theme=n,setCookie(i,n),e(document).trigger("themeChange")},h.changeLocale=function(i){t.locale=i,setCookie(n,i),e(document).trigger("localeChange")},h.setMaskerMeta=function(e,t){if(u[e])if("object"!=typeof t)u[e]=t;else for(var i in t)u[e][i]=t[i];else u[e]=t},h.getMaskerMeta=function(t){return e.extend({},u[t])},h.registerSystemTimeZoneOffset=function(e){r=e},h.getSystemTimeZoneOffset=function(){return r},t.theme=getCookie(i),t.locale=getCookie(n),t.languages=getCookie(o)?getCookie(o).split(","):["ZH"],t.timezoneOffset=(new Date).getTimezoneOffset(),t.usercode=getCookie(s),document.cookie.replace(/ISES_(\w*)=([^;]*);?/gi,function(e,t,i){c[t]=i});var p=function(){};p.prototype=h,d.Core=new p}(),function(){var e,t=getCookie(s);if("undefined"!=typeof Log4js){e=new Log4js.Logger("iweb"),e.setLevel(Log4js.Level.ERROR);var i=new Log4js.ConsoleAppender(e,!0);e.addAppender(i)}else e={LEVEL_MAP:{OFF:Number.MAX_VALUE,ERROR:4e4,WARN:3e4,INFO:2e4,DEBUG:1e4,TRACE:5e3,ALL:1},level:4e4,setLevel:function(e){if(e){var t=this.LEVEL_MAP[e.toUpperCase()];t&&(this.level=t)}},isDebugEnabled:function(){return this.LEVEL_MAP.DEBUG>=this.level&&console},isTraceEnabled:function(){return this.LEVEL_MAP.TRACE>=this.level&&console},isInfoEnabled:function(){return this.LEVEL_MAP.INFO>=this.level&&console},isWarnEnabled:function(){return this.LEVEL_MAP.WARN>=this.level&&console},isErrorEnabled:function(){return this.LEVEL_MAP.ERROR>=this.level&&console},debug:function(){this.isDebugEnabled()&&console.debug.call(console,arguments)},warn:function(){this.isWarnEnabled()&&console.debug.call(console,arguments)},info:function(){this.isInfoEnabled()&&console.debug.call(console,arguments)},trace:function(){this.isTraceEnabled()&&console.debug.call(console,arguments)},error:function(){this.isErrorEnabled()&&console.debug.call(console,arguments)}};e.setLevel(t),d.log=e,d.debugMode=!1}(),d.browser={isIE:!1,isFF:!1,isOpera:!1,isChrome:!1,isSafari:!1,isWebkit:!1,isIE6:!1,isIE7:!1,isIE8:!1,isIE8_CORE:!1,isIE9:!1,isIE9_CORE:!1,isIE10:!1,isIE10_ABOVE:!1,isIE11:!1,isIOS:!1,isIphone:!1,isIPAD:!1,isStandard:!1,version:0},function(){var e,t,i=navigator.userAgent,n=/(msie\s|trident.*rv:)([\w.]+)/,o=/(firefox)\/([\w.]+)/,s=/(opera).+version\/([\w.]+)/,r=/(chrome)\/([\w.]+)/,a=/version\/([\w.]+).*(safari)/,l=i.toLowerCase(),c=null,u=n.exec(l);if(null!=u&&(c={browser:"IE",version:u[2]||"0"}),u=o.exec(l),null!=u&&(c={browser:u[1]||"",version:u[2]||"0"}),u=s.exec(l),null!=u&&(c={browser:u[1]||"",version:u[2]||"0"}),u=r.exec(l),null!=u&&(c={browser:u[1]||"",version:u[2]||"0"}),u=a.exec(l),null!=u&&(c={browser:u[2]||"",version:u[1]||"0"}),null!=u&&(c={browser:"",version:"0"}),(t=l.match(/opera.([\d.]+)/))?d.browser.isOpera=!0:"IE"==c.browser&&11==c.version?(d.browser.isIE11=!0,d.browser.isIE=!0):(t=l.match(/chrome\/([\d.]+)/))?(d.browser.isChrome=!0,d.browser.isStandard=!0):(t=l.match(/version\/([\d.]+).*safari/))?(d.browser.isSafari=!0,d.browser.isStandard=!0):(t=l.match(/gecko/))?(d.browser.isFF=!0,d.browser.isStandard=!0):(t=l.match(/msie ([\d.]+)/))?d.browser.isIE=!0:(t=l.match(/firefox\/([\d.]+)/))&&(d.browser.isFF=!0,d.browser.isStandard=!0),l.match(/webkit\/([\d.]+)/)&&(d.browser.isWebkit=!0),l.match(/ipad/i)&&(d.browser.isIOS=!0,d.browser.isIPAD=!0,d.browser.isStandard=!0),l.match(/iphone/i)&&(d.browser.isIOS=!0,d.browser.isIphone=!0),d.browser.version=e&&c.version?c.version:0,d.browser.isIE){var h=parseInt(d.browser.version),p=document.documentMode;null==p?6==h?d.browser.isIE6=!0:7==h&&(d.browser.isIE7=!0):(7==p?d.browser.isIE7=!0:8==p?d.browser.isIE8=!0:9==p?(d.browser.isIE9=!0,d.browser.isSTANDARD=!0):10==p?(d.browser.isIE10=!0,d.browser.isSTANDARD=!0,d.browser.isIE10_ABOVE=!0):d.browser.isSTANDARD=!0,8==h?d.browser.isIE8_CORE=!0:9==h?d.browser.isIE9_CORE=!0:11==c.version&&(d.browser.isIE11=!0))}}(),window.iweb=d}($),+function(e){"use strict";function t(e){return e.toString().length>1?e.toString():"0"+e.toString()}String.prototype.trim=function(){return this.replace(/^\s*(\b.*\b|)\s*$/,"$1")},String.prototype.replaceStr=function(e,t){var i=this.split(e);return new String(i.join(t))},String.prototype.lengthb=function(){var e=this.replace(/[^\x00-\xff]/g,"**");return e.length},String.prototype.replaceAll=function(e,t){var i=new RegExp(e,"g");return this.replace(i,t)},String.prototype.substrCH=function(e){for(var t=0,i=0;e>t&&i<this.length;){var n=this.charCodeAt(i);if(n>256&&t==e-1)break;t+=n>256?2:1,i+=1}return this.substr(0,i)},String.prototype.startWith=function(e){return 0==this.indexOf(e)},String.prototype.endWith=function(e){var t=this.indexOf(e);return-1==t?void 0:t==this.length-e.length},String.prototype.format=function(e){if(null!=e){var t=this;for(var i in e){var n=new RegExp("\\<\\#\\="+i+"\\#\\>","gi");t=t.replace(n,e[i]?"null"==e[i]?"":e[i]:"")}}return t},Date.prototype.format=function(e){var i=this.getFullYear(),n=this.getMonth()+1,o=this.getDate(),s=this.getHours(),r=this.getMinutes(),a=this.getSeconds();return e=e||"yyyy-MM-dd hh:mm:ss",e.replace(/yyyy/,i).replace(/yy/,i.toString().substr(2,2)).replace(/MM/,t(n)).replace(/M/,n).replace(/dd/,t(o)).replace(/d/,o).replace(/hh/,t(s)).replace(/h/,s).replace(/mm/,t(r)).replace(/m/,r).replace(/ss/,t(a)).replace(/s/,a)},Date.prototype.getAAAAMMJJ=function(){var e=this.getDate();10>e&&(e="0"+e);var t=this.getMonth()+1;10>t&&(t="0"+t);var i=this.getYear();return i+""+t+e},Date.prototype.getFomatDate=function(){var e=this.getFullYear(),t=this.getMonth()+1;10>t&&(t="0"+t);var i=this.getDate();return 10>i&&(i="0"+i),e+"-"+t+"-"+i},Date.prototype.getFomatDateTime=function(){var e=this.getFullYear(),t=this.getMonth()+1;10>t&&(t="0"+t);var i=this.getDate();10>i&&(i="0"+i);var n=this.getHours();10>n&&(n="0"+n);var o=this.getMinutes();10>o&&(o="0"+o);var s=this.getSeconds();return 10>s&&(s="0"+s),e+"-"+t+"-"+i+" "+n+":"+o+":"+s},Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){return 0>e||e>this.length?void alert("index out of bound"):void this.splice(e,1)},Array.prototype.removeEle=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return void this.splice(t,1)},Math.UUID=function(){return((new Date).getTime()+"").substr(9)},String.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})},Array.prototype.insert=function(e,t){return 0>e||e>this.length?void alert("index out of bound"):void this.splice(e,0,t)},Array.prototype.values=function(e){if(null==e)return null;for(var t=new Array,i=0;i<e.length;i++)t.push(this[e[i]]);return t},Array.prototype.clear=function(){this.splice(0,this.length)},window.getRequest=function(e){e||(e=document.location.search);var t=new Object;if(-1!=e.indexOf("?"))for(var i=e.substring(e.indexOf("?")+1),n=i.split("&"),o=0;o<n.length;o++)t[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return t},window.setCookie=function(e,t,i,n,o,s){var r=e+"="+encodeURIComponent(t);i&&(r+="; expires="+i.toGMTString()),n&&(r+="; path="+n),o&&(r+="; domain="+o),s&&(r+="; secure="+s),document.cookie=r},window.getCookie=function(e){var t="(?:; )?"+e+"=([^;]*);?",i=new RegExp(t);return i.test(document.cookie)?decodeURIComponent(RegExp.$1):null},window.deleteCookie=function(e,t,i){setCookie(e,"",new Date(0),t,i)},window.execIgnoreError=function(e,t,i){try{e.call(t,i)}catch(n){}},window.encodeBase64=function(e){for(var t,i,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,r=e.length,a="";r>s;){if(t=255&e[s++],s==r){a+=o.charAt(t>>2),a+=o.charAt((3&t)<<4),a+="==";break}if(i=e[s++],s==r){a+=o.charAt(t>>2),a+=o.charAt((3&t)<<4|(240&i)>>4),a+=o.charAt((15&i)<<2),a+="=";break}n=e[s++],a+=o.charAt(t>>2),a+=o.charAt((3&t)<<4|(240&i)>>4),a+=o.charAt((15&i)<<2|(192&n)>>6),a+=o.charAt(63&n)}return a},e.getFunction=function(t,i){if(!i||"function"==typeof i)return i;if("function"==typeof t[i])return t[i];if("function"==typeof window[i])return window[i];if(-1!=i.indexOf(".")){var n=e.getJSObject(t,i);if("function"==typeof n)return n;if(n=e.getJSObject(window,i),"function"==typeof n)return n}return i},e.getJSObject=function(e,t){if(t){if("object"==typeof t)return t;for(var i=t.split("."),n=e,o=0;o<i.length;o++)if(n=n[i[o]],!n)return null;return n}},window.getCurrentJsPath=function(){var e=document,t={},i=+new Date,n=/((?:http|https|file):\/\/.*?\/[^:]+)(?::\d+)?:\d+/,o=-1===(""+e.querySelector).indexOf("[native code]");if(e.currentScript)return e.currentScript.src;var s;try{t.b()}catch(r){s=r.fileName||r.sourceURL||r.stack||r.stacktrace}if(s){var a=n.exec(s)[1];if(a)return a}for(var d,l=e.scripts,c=l.length-1;d=l[c--];)if(d.className!==i&&"interactive"===d.readyState)return d.className=i,o?d.getAttribute("src",4):d.src}}($),+function(e){"use strict";if(e.i18n||window.i18n){var t=getCurrentJsPath(),i=t.substr(0,t.lastIndexOf("/")),n=i.substr(0,i.lastIndexOf("/"));window.uuii18n=e.uuii18n=e.extend(!0,{},e.i18n||window.i18n),e.uuii18n.init({postAsync:!1,getAsync:!1,fallbackLng:!1,ns:{namespaces:["uui-trans"]},resGetPath:n+"/locales/__lng__/__ns__.json"})}window.trans=e.trans=function(t,i){return e.i18n?e.i18n.t("uui-trans:"+t):i}}($),!function(){function e(e){var i=$(this);if(i.hasClass("accordion-item-toggle")||i.hasClass("item-link")&&i.parent().hasClass("accordion-item")){var n=i.parent(".accordion-item");0===n.length&&(n=i.parents(".accordion-item")),0===n.length&&(n=i.parents("li")),t.accordionToggle(n)}if(i.hasClass("close-picker")){var o=$(".picker-modal.modal-in");o.length>0?t.closeModal(o):(o=$(".popover.modal-in .picker-modal"),o.length>0&&t.closeModal(o.parents(".popover")))}if(i.hasClass("refer_prev")){var s=$(".refer_select").parents(" fieldset[enable='true']");if(s.length>0){var r=s.prev("fieldset[enable='true']").find("[data-provide='datetimepicker'] div");if(r.length>0)return void r.triggerHandler("touchend");var a=s.prev("fieldset[enable='true']").find("input");a&&a.triggerHandler("touchend")}}if(i.hasClass("refer_next")){var s=$(".refer_select").parents("fieldset[enable='true']");if(s.length>0){var r=s.next("fieldset[enable='true']").find("[data-provide='datetimepicker'] div");if(r.length>0)return void r.triggerHandler("touchend");var a=s.next("fieldset[enable='true']").find("input");a&&a.triggerHandler("toucend")}}if(i.hasClass("refer_input")){e.preventDefault();var d=$(".picker-modal.modal-in");d.addClass("refer_modal"),i.focus()}}if(navigator.userAgent.match(/iPhone|iPod|Android|ios|iPad/i)){$.fn.extend({transform:function(e){for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=e}return this},transitionEnd:function(e){function t(s){if(s.target===this)for(e.call(this,s),i=0;i<n.length;i++)o.off(n[i],t)}var i,n=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],o=this;if(e)for(i=0;i<n.length;i++)o.on(n[i],t);return this}}),$.app={};var t=$.app;t.btn=!0,t.openModal=function(e){e=$(e);var i=e.hasClass("modal");if($(".modal.modal-in:not(.modal-out)").length&&t.params.modalStack&&i)return void t.modalStack.push(function(){t.openModal(e)});var n=(e.hasClass("popover"),e.hasClass("popup")),o=e.hasClass("login-screen"),s=e.hasClass("picker-modal");i&&(e.show(),e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"}));var r;o||s||(0!==$(".modal-overlay").length||n||$("body").append('<div class="modal-overlay"></div>'),0===$(".popup-overlay").length&&n&&$("body").append('<div class="popup-overlay"></div>'),r=n?$(".popup-overlay"):$(".modal-overlay"));e[0].clientLeft;return e.trigger("open"),s&&$("body").addClass("with-picker-modal"),o||s||r.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened")}),!0},t.pickerModal=function(e,t){if("undefined"==typeof t&&(t=!1),"string"==typeof e&&e.indexOf("<")>=0){if(e=$(e),!(e.length>0))return!1;t&&e.addClass("remove-on-close"),$("body").append(e[0])}return e=$(e),0===e.length?!1:e[0]},t.closeModal=function(e){if(e.find(".refer_input").blur(),e.removeClass("refer_modal"),e=$(e||".modal-in"),"undefined"==typeof e||0!==e.length){var i=e.hasClass("modal"),n=e.hasClass("popover"),o=e.hasClass("popup"),s=e.hasClass("login-screen"),r=e.hasClass("picker-modal"),a=e.hasClass("remove-on-close"),d=o?$(".popup-overlay"):$(".modal-overlay");return o?e.length===$(".popup.modal-in").length&&d.removeClass("modal-overlay-visible"):r||d.removeClass("modal-overlay-visible"),e.trigger("close"),r&&($("body").removeClass("with-picker-modal"),$("html").removeClass("hidden_srocll"),$("body").addClass("picker-modal-closing")),n?(e.removeClass("modal-in modal-out").trigger("closed").hide(),a&&e.remove()):(e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened"),r&&($("body").removeClass("picker-modal-closing"),$("html").removeClass("hidden_srocll")),o||s||r?(e.removeClass("modal-out"),a&&e.length>0&&e.remove()):e.remove()}),i&&t.params.modalStack&&t.modalStackClearQueue()),$(".refer_select").removeClass("refer_select"),t.btn=!0,!0}},t.accordionToggle=function(e){e=$(e),0!==e.length&&(e.hasClass("accordion-item-expanded")?t.accordionClose(e):t.accordionOpen(e))},t.accordionOpen=function(e){e=$(e);var i=e.parents(".accordion-list").eq(0),n=e.children(".accordion-item-content");0===n.length&&(n=e.find(".accordion-item-content"));var o=i.length>0&&e.parent().children(".accordion-item-expanded");o.length>0&&t.accordionClose(o),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){n.transition(0),n.css("height","auto");n[0].clientLeft;n.transition(""),e.trigger("opened")}else n.css("height",""),e.trigger("closed")}),e.trigger("open"),e.addClass("accordion-item-expanded")},t.accordionClose=function(e){e=$(e);var t=e.children(".accordion-item-content");0===t.length&&(t=e.find(".accordion-item-content")),e.removeClass("accordion-item-expanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){t.transition(0),t.css("height","auto");t[0].clientLeft;t.transition(""),e.trigger("opened")}else t.css("height",""),e.trigger("closed")}),e.trigger("close")},t.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),t.mobile=function(){var e=navigator.userAgent.match(/iPhone|iPod|Android|ios|iPad/i)?!0:!1;return e}(),$.getPickerArray=function(e,t){if(e){var i,n;return i=e.split(" "),i[1]||(i[1]="00:00"),n=i[0].split("-").concat(i[1].split(":"))}},$.getTranslate=function(e,t){var i,n,o,s;return"undefined"==typeof t&&(t="x"),o=window.getComputedStyle(e,null),window.WebKitCSSMatrix?s=new WebKitCSSMatrix("none"===o.webkitTransform?"":o.webkitTransform):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),"x"===t&&(n=window.WebKitCSSMatrix?s.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=window.WebKitCSSMatrix?s.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0},$.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},$.cancelAnimationFrame=function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)},$(document).on("touchend",".refer_prev, .refer_next, .accordion-item-toggle, .close-picker",e),$(document).on("focus",".refer_input",e),$(document).on("touchstart",function(e){return 0===$(e.target).parents(".picker-modal").length?($(".modal-out").length>0&&t.closeModal($(".modal-out")),void($(".modal-in").length>0&&t.closeModal($(".modal-in")))):0===$(e.target).parents(".est").length&&0===$(e.target).parents(".toolbar-inner").length?void e.preventDefault():void 0});var i=function(e){function i(){var e=!1;return a.params.convertToPopover||a.params.onlyInPopover?(!a.inline&&a.params.input&&(a.params.onlyInPopover?e=!0:t.device.ios?e=t.device.ipad?!0:!1:$(window).width()>=768&&(e=!0)),e):e}function n(){return a.opened&&a.container&&a.container.length>0&&a.container.parents(".popover").length>0?!0:!1}function o(){if(a.opened)for(var e=0;e<a.cols.length;e++)a.cols[e].divider||(a.cols[e].calcSize(),a.cols[e].setValue(a.cols[e].value,0,!1))}function s(e){if("false"!==$(a.input).find("input").attr("h7picker")&&!a.opened){$(a.input).find("input").trigger("picker_open");var n=moment($(a.input).find("input").val()).format("YYYY-M-D HH:mm");if(a.value=n,a.params.pickerType&&(a.value=$.getPickerArray(n)),a.value||(a.value=a.params.value),a.modalNumber)return $(".modal-out").length>0&&t.closeModal($(".modal-out")),$(".modal-in").length>0&&t.closeModal($(".modal-in")),$(a.container).addClass("picker-iframe").show(),a.params.refer||a.datestart||(a.container.find(".picker-items-col").each(function(){var e=!0;(!a.initialized&&a.params.value||a.initialized&&a.value)&&(e=!1),a.initPickerCol(this,e)}),a.value?a.setValue(a.value,0):a.setValue(a.params.value,0)),a.input.parents(".input-group").addClass("refer_select"),t.openModal($(a.container)),a.datestart=!1,a.opened=!0,void(a.initialized=!0);if($(e.target).attr("load","ready"),a.params.scrollToInput&&!i()){var o=a.input.parents(".page-content");if(0===o.length)return;var s,r=parseInt(o.css("padding-top"),10),d=parseInt(o.css("padding-bottom"),10),l=o[0].offsetHeight-r-a.container.height(),c=o[0].scrollHeight-r-a.container.height(),u=a.input.offset().top-r+a.input[0].offsetHeight;if(u>l){var h=o.scrollTop()+u-l;h+l>c&&(s=h+l-c+d,l===c&&(s=a.container.height()),o.css({"padding-bottom":s+"px"})),o.scrollTop(h,300)}}}}function r(){a.opened=!1,a.input&&a.input.length>0&&a.input.parents(".page-content").css({"padding-bottom":""}),a.params.onClose&&a.params.onClose(a)}var a=this,d={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"DONE",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner"><div class="left"><input style="margin-left:30px" class="refer_input" type="text"></div><div class="right"><a href="#" class="link close-picker">{{closeText}}</a></div></div></div>'};e=e||{};for(var l in d)"undefined"==typeof e[l]&&(e[l]=d[l]);a.touchEvents={start:t.support.touch?"touchstart":"mousedown",move:t.support.touch?"touchmove":"mousemove",end:t.support.touch?"touchend":"mouseup"},a.params=e,a.cols=[],a.initialized=!1,a.inline=a.params.container?!0:!1;var c=!0;return a.setValue=function(e,t){for(var i=0,n=0;n<a.cols.length;n++)a.cols[n]&&!a.cols[n].divider&&(a.cols[n].setValue(e[i],t),i++)},a.updateValue=function(){for(var e=[],t=[],i=0;i<a.cols.length;i++)a.cols[i].divider||(e.push(a.cols[i].value),t.push(a.cols[i].displayValue));e.indexOf(void 0)>=0||(a.value=e,a.displayValue=t,a.params.onChange&&a.params.onChange(a,a.value,a.displayValue),a.input&&a.input.length>0&&($(a.input).find("input").data("dd",a.value).val(a.params.formatValue?a.params.formatValue(a,a.value,a.displayValue):a.value.join(" ")),$(a.input).find("input").trigger("picker_close")))},a.initPickerCol=function(e,t){function i(){v=$.requestAnimationFrame(function(){u.updateItems(void 0,void 0,0),i()})}function n(e){b||w||(e.preventDefault(),w=!0,y=_="touchstart"===e.type?e.originalEvent.targetTouches[0].pageY:e.pageY,C=(new Date).getTime(),I=!0,x=M=$.getTranslate(u.wrapper[0],"y"))}function o(e){if(w){e.preventDefault(),I=!1,_="touchmove"===e.type?e.originalEvent.targetTouches[0].pageY:e.pageY,b||($.cancelAnimationFrame(v),b=!0,x=M=$.getTranslate(u.wrapper[0],"y"),u.wrapper.transition(0)),e.preventDefault();var t=_-y;M=x+t,T=void 0,m>M&&(M=m-Math.pow(m-M,.8),T="min"),M>g&&(M=g+Math.pow(M-g,.8),T="max"),u.wrapper.transform("translate3d(0,"+M+"px,0)"),u.updateItems(void 0,M,0,a.params.updateValuesOnTouchmove),N=M-S||M,D=(new Date).getTime(),S=M}}function s(e){if(!w||!b)return void(w=b=!1);w=b=!1,u.wrapper.transition(""),T&&("min"===T?u.wrapper.transform("translate3d(0,"+m+"px,0)"):u.wrapper.transform("translate3d(0,"+g+"px,0)")),k=(new Date).getTime();var t,n;k-C>300?n=M:(t=Math.abs(N/(k-D)),n=M+N*a.params.momentumRatio),n=Math.max(Math.min(n,g),m);var o=-Math.floor((n-g)/p);a.params.freeMode||(n=-o*p+g),u.wrapper.transform("translate3d(0,"+parseInt(n,10)+"px,0)"),u.updateItems(o,n,"",!0),a.params.updateValuesOnMomentum&&(i(),u.wrapper.transitionEnd(function(){$.cancelAnimationFrame(v)})),setTimeout(function(){I=!0},100)}function r(e){if(I){$.cancelAnimationFrame(v);var t=$(this).attr("data-picker-value");u.setValue(t)}}var d=$(e),l=d.index(),u=a.cols[l];if(!u.divider){u.container=d,u.wrapper=u.container.find(".picker-items-col-wrapper"),u.items=u.wrapper.find(".picker-item");var h,p,f,m,g;u.replaceValues=function(e,t){u.destroyEvents(),u.values=e,u.displayValues=t;var i=a.columnHTML(u,!0);u.wrapper.html(i),u.items=u.wrapper.find(".picker-item"),u.calcSize(),u.setValue(u.values[0],0,!0),u.initEvents()},u.calcSize=function(){a.params.rotateEffect&&(u.container.removeClass("picker-items-col-absolute"),u.width||u.container.css({width:""}));var e,t;e=0,t=u.container[0].offsetHeight,h=u.wrapper[0].offsetHeight,p=u.items[0].offsetHeight,f=p*u.items.length,m=t/2-f+p/2,g=t/2-p/2,u.width&&(e=u.width,parseInt(e,10)===e&&(e+="px"),u.container.css({width:e})),a.params.rotateEffect&&(u.width||(u.items.each(function(){var t=$(this);t.css({width:"auto"}),e=Math.max(e,t[0].offsetWidth),t.css({width:""})}),u.container.css({width:e+2+"px"})),u.container.addClass("picker-items-col-absolute"))},u.calcSize(),u.wrapper.transform("translate3d(0,"+g+"px,0)").transition(0);var v;u.setValue=function(e,t,n){"undefined"==typeof t&&(t="");var o=u.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();if("undefined"!=typeof o&&-1!==o){var s=-o*p+g;u.wrapper.transition(t),u.wrapper.transform("translate3d(0,"+s+"px,0)"),a.params.updateValuesOnMomentum&&u.activeIndex&&u.activeIndex!==o&&($.cancelAnimationFrame(v),u.wrapper.transitionEnd(function(){$.cancelAnimationFrame(v)}),i()),u.updateItems(o,s,t,n)}},u.updateItems=function(e,t,i,n){"undefined"==typeof t&&(t=$.getTranslate(u.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-g)/p)),0>e&&(e=0),e>=u.items.length&&(e=u.items.length-1);var o=u.activeIndex;u.activeIndex=e,u.wrapper.find(".picker-selected, .picker-after-selected, .picker-before-selected").removeClass("picker-selected picker-after-selected picker-before-selected"),u.items.transition(i);var s=u.items.eq(e).addClass("picker-selected").transform("");s.prevAll().addClass("picker-before-selected"),s.nextAll().addClass("picker-after-selected");if((n||"undefined"==typeof n)&&(u.value=s.attr("data-picker-value"),u.displayValue=u.displayValues?u.displayValues[e]:u.value,o!==e&&(u.onChange&&u.onChange(a,u.value,u.displayValue),a.updateValue())),a.params.rotateEffect){(t-(Math.floor((t-g)/p)*p+g))/p;u.items.each(function(){var e=$(this),i=e.index()*p,n=g-t,o=i-n,s=o/p,r=Math.ceil(u.height/p/2)+1,a=-18*s;a>180&&(a=180),-180>a&&(a=-180),Math.abs(s)>r?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),e.transform("translate3d(0, "+(-t+g)+"px, "+(c?-110:0)+"px) rotateX("+a+"deg)")})}},t&&u.updateItems(0,g,0);var w,b,y,_,C,k,x,T,M,S,N,D,I=!0;u.initEvents=function(e){var t=e?"off":"on";u.container[t](a.touchEvents.start,n),u.container[t](a.touchEvents.move,o),u.container[t](a.touchEvents.end,s),u.items[t]("click",r)},u.destroyEvents=function(){u.initEvents(!0)},u.container[0].f7DestroyPickerCol=function(){u.destroyEvents()},u.initEvents()}},a.destroyPickerCol=function(e){e=$(e),"f7DestroyPickerCol"in e[0]&&e[0].f7DestroyPickerCol()},$(window).on("resize",o),a.columnHTML=function(e,t){var i="",n="";if(e.divider)n+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var o=0;o<e.values.length;o++)i+='<div class="picker-item" data-picker-value="'+e.values[o]+'">'+(e.displayValues?e.displayValues[o]:e.values[o])+"</div>";n+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+i+"</div></div>"}return t?i:n},a.layout=function(){var e,t="",i="",n="modal"+Math.floor(1001*Math.random());a.cols=[];var o="";for(e=0;e<a.params.cols.length;e++){var s=a.params.cols[e];o+=a.columnHTML(a.params.cols[e]),a.cols.push(s)}i="picker-modal picker-columns "+n+" "+(a.params.cssClass||"")+(a.params.rotateEffect?" picker-3d":""),t=a.params.refer?'<div class="'+i+'">'+(a.params.toolbar?a.params.toolbarTemplate.replace(/{{closeText}}/g,a.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+a.params.refer+"</div></div>":'<div class="'+i+'">'+(a.params.toolbar?a.params.toolbarTemplate.replace(/{{closeText}}/g,a.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+o+'<div class="picker-center-highlight"></div></div></div>',a.modalNumber="."+n,a.pickerHTML=t},a.params.input&&(a.input=$(a.params.input),a.input.length>0&&(a.params.inputReadOnly&&a.input.prop("readOnly",!0),a.inline||a.input.on("touchend",s),a.params.inputReadOnly&&a.input.on("focus mousedown",function(e){e.preventDefault()}))),a.opened=!1,a.open=function(e){var n=i();a.opened||(a.layout(),n?(a.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+a.pickerHTML+"</div></div>",a.popover=t.popover(a.pickerHTML,a.params.input,!0),a.container=$(a.popover).find(".picker-modal"),$(a.popover).on("close",function(){r()})):a.inline?(a.container=$(a.pickerHTML),a.container.addClass("picker-modal-inline"),$(a.params.container).append(a.container)):(a.container=$(t.pickerModal(a.pickerHTML)),$(a.container).on("close",function(){r()})),a.container[0].f7Picker=a),a.opened=!1,a.initialized=!1,a.params.onOpen&&a.params.onOpen(a)},a.close=function(){return a.opened&&!a.inline?n()?void t.closeModal(a.popover):void t.closeModal(a.container):void 0},a.destroy=function(){a.close(),a.params.input&&a.input.length>0&&a.input.off("touchend focus",s),$(window).off("resize",o)},a.inline&&a.open(),a.open(),a};$.app.picker_mobile=function(e){return new i(e)},$.app.switch_mobile=function(){$.app?$(".mobile_switch").wrap("<label class='label-switch'></label>").after("<div class='checkbox'></div>").removeClass("mobile_switch"):$(".mobile_switch").css("display","block")},$(function(){$.app.switch_mobile()})}}(),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return Se.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(e){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var i=!0;return f(function(){return i&&(o(e),i=!1),t.apply(this,arguments)},t)}function r(e,t){wt[e]||(o(t),wt[e]=!0)}function a(e,t){return function(i){return v(e.call(this,i),t)}}function d(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function l(e,t){var i,n,o=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(o,"months");return 0>t-s?(i=e.clone().add(o-1,"months"),n=(t-s)/(s-i)):(i=e.clone().add(o+1,"months"),n=(t-s)/(i-s)),-(o+n)}function c(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function u(){}function h(e,t){t!==!1&&R(e),m(this,e),this._d=new Date(+e._d),yt===!1&&(yt=!0,_e.updateOffset(this),yt=!1)}function p(e){var t=M(e),i=t.year||0,n=t.quarter||0,o=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,d=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*d+36e5*a,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=_e.localeData(),this._bubble()}function f(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Le.length>0)for(i in Le)n=Le[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function w(e,t){var i={
milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function b(e,t){var i;return t=P(t,e),e.isBefore(t)?i=w(e,t):(i=w(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function y(e,t){return function(i,n){var o,s;return null===n||isNaN(+n)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=_e.duration(i,n),_(this,o,e),this}}function _(e,t,i,n){var o=t._milliseconds,s=t._days,r=t._months;n=null==n?!0:n,o&&e._d.setTime(+e._d+o*i),s&&me(e,"Date",fe(e,"Date")+s*i),r&&pe(e,fe(e,"Month")+r*i),n&&_e.updateOffset(e,s||r)}function C(e){return"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function x(e,t,i){var n,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&N(e[n])!==N(t[n]))&&r++;return r+s}function T(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ut[e]||ht[t]||t}return e}function M(e){var t,n,o={};for(n in e)i(e,n)&&(t=T(n),t&&(o[t]=e[n]));return o}function S(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}_e[t]=function(o,s){var r,a,d=_e._locale[t],l=[];if("number"==typeof o&&(s=o,o=e),a=function(e){var t=_e().utc().set(n,e);return d.call(_e._locale,t,o||"")},null!=s)return a(s);for(r=0;i>r;r++)l.push(a(r));return l}}function N(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function $(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return le(_e([e,11,31+t-i]),t,i).week}function I(e){return E(e)?366:365}function E(e){return e%4===0&&e%100!==0||e%400===0}function R(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[$e]<0||e._a[$e]>11?$e:e._a[De]<1||e._a[De]>$(e._a[Ne],e._a[$e])?De:e._a[Ie]<0||e._a[Ie]>24||24===e._a[Ie]&&(0!==e._a[Ee]||0!==e._a[Re]||0!==e._a[Ae])?Ie:e._a[Ee]<0||e._a[Ee]>59?Ee:e._a[Re]<0||e._a[Re]>59?Re:e._a[Ae]<0||e._a[Ae]>999?Ae:-1,e._pf._overflowDayOfYear&&(Ne>t||t>De)&&(t=De),e._pf.overflow=t)}function A(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function O(e){return e?e.toLowerCase().replace("_","-"):e}function L(e){for(var t,i,n,o,s=0;s<e.length;){for(o=O(e[s]).split("-"),t=o.length,i=O(e[s+1]),i=i?i.split("-"):null;t>0;){if(n=F(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&x(o,i,!0)>=t-1)break;t--}s++}return null}function F(e){var t=null;if(!Oe[e]&&Fe)try{t=_e.locale(),require("./locale/"+e),_e.locale(t)}catch(i){}return Oe[e]}function P(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(_e.isMoment(e)||k(e)?+e:+_e(e))-+i,i._d.setTime(+i._d+n),_e.updateOffset(i,!1),i):_e(e).local()}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var t,i,n=e.match(He);for(t=0,i=n.length;i>t;t++)vt[n[t]]?n[t]=vt[n[t]]:n[t]=j(n[t]);return function(o){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(o,e):n[t];return s}}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),pt[t]||(pt[t]=Y(t)),pt[t](e)):e.localeData().invalidDate()}function W(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(We.lastIndex=0;n>=0&&We.test(e);)e=e.replace(We,i),We.lastIndex=0,n-=1;return e}function B(e,t){var i,n=t._strict;switch(e){case"Q":return Qe;case"DDDD":return tt;case"YYYY":case"GGGG":case"gggg":return n?it:Ue;case"Y":case"G":case"g":return ot;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?nt:ze;case"S":if(n)return Qe;case"SS":if(n)return et;case"SSS":if(n)return tt;case"DDD":return Ve;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ge;case"a":case"A":return t._locale._meridiemParse;case"x":return Ze;case"X":return Je;case"Z":case"ZZ":return Xe;case"T":return Ke;case"SSSS":return qe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?et:Be;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Be;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return i=new RegExp(J(Z(e.replace("\\","")),"i"))}}function V(e){e=e||"";var t=e.match(Xe)||[],i=t[t.length-1]||[],n=(i+"").match(lt)||["-",0,0],o=+(60*n[1])+N(n[2]);return"+"===n[0]?o:-o}function U(e,t,i){var n,o=i._a;switch(e){case"Q":null!=t&&(o[$e]=3*(N(t)-1));break;case"M":case"MM":null!=t&&(o[$e]=N(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t,e,i._strict),null!=n?o[$e]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[De]=N(t));break;case"Do":null!=t&&(o[De]=N(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=N(t));break;case"YY":o[Ne]=_e.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Ne]=N(t);break;case"a":case"A":i._meridiem=t;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Ie]=N(t);break;case"m":case"mm":o[Ee]=N(t);break;case"s":case"ss":o[Re]=N(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Ae]=N(1e3*("0."+t));break;case"x":i._d=new Date(N(t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=V(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=N(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=_e.parseTwoDigitYear(t)}}function z(e){var i,n,o,s,r,a,d;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=t(i.GG,e._a[Ne],le(_e(),1,4).year),o=t(i.W,1),s=t(i.E,1)):(r=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Ne],le(_e(),r,a).year),o=t(i.w,1),null!=i.d?(s=i.d,r>s&&++o):s=null!=i.e?i.e+r:r),d=ce(n,o,s,a,r),e._a[Ne]=d.year,e._dayOfYear=d.dayOfYear}function q(e){var i,n,o,s,r=[];if(!e._d){for(o=X(e),e._w&&null==e._a[De]&&null==e._a[$e]&&z(e),e._dayOfYear&&(s=t(e._a[Ne],o[Ne]),e._dayOfYear>I(s)&&(e._pf._overflowDayOfYear=!0),n=se(s,0,e._dayOfYear),e._a[$e]=n.getUTCMonth(),e._a[De]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=r[i]=o[i];for(;7>i;i++)e._a[i]=r[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Ie]&&0===e._a[Ee]&&0===e._a[Re]&&0===e._a[Ae]&&(e._nextDay=!0,e._a[Ie]=0),e._d=(e._useUTC?se:oe).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ie]=24)}}function G(e){var t;e._d||(t=M(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],q(e))}function X(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function K(t){if(t._f===_e.ISO_8601)return void ee(t);t._a=[],t._pf.empty=!0;var i,n,o,s,r,a=""+t._i,d=a.length,l=0;for(o=W(t._f,t._locale).match(He)||[],i=0;i<o.length;i++)s=o[i],n=(a.match(B(s,t))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),l+=n.length),vt[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),U(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=d-l,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Ie]<=12&&(t._pf.bigHour=e),t._a[Ie]=c(t._locale,t._a[Ie],t._meridiem),q(t),R(t)}function Z(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function J(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e){var t,i,o,s,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)r=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[s],K(t),A(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==o||o>r)&&(o=r,i=t));f(e,i||t)}function ee(e){var t,i,n=e._i,o=st.exec(n);if(o){for(e._pf.iso=!0,t=0,i=at.length;i>t;t++)if(at[t][1].exec(n)){e._f=at[t][0]+(o[6]||" ");break}for(t=0,i=dt.length;i>t;t++)if(dt[t][1].exec(n)){e._f+=dt[t][0];break}n.match(Xe)&&(e._f+="Z"),K(e)}else e._isValid=!1}function te(e){ee(e),e._isValid===!1&&(delete e._isValid,_e.createFromInputFallback(e))}function ie(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function ne(t){var i,n=t._i;n===e?t._d=new Date:k(n)?t._d=new Date(+n):null!==(i=Pe.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?te(t):C(n)?(t._a=ie(n.slice(0),function(e){return parseInt(e,10)}),q(t)):"object"==typeof n?G(t):"number"==typeof n?t._d=new Date(n):_e.createFromInputFallback(t)}function oe(e,t,i,n,o,s,r){var a=new Date(e,t,i,n,o,s,r);return 1970>e&&a.setFullYear(e),a}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function re(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ae(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function de(e,t,i){var n=_e.duration(e).abs(),o=Me(n.as("s")),s=Me(n.as("m")),r=Me(n.as("h")),a=Me(n.as("d")),d=Me(n.as("M")),l=Me(n.as("y")),c=o<ft.s&&["s",o]||1===s&&["m"]||s<ft.m&&["mm",s]||1===r&&["h"]||r<ft.h&&["hh",r]||1===a&&["d"]||a<ft.d&&["dd",a]||1===d&&["M"]||d<ft.M&&["MM",d]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=i,ae.apply({},c)}function le(e,t,i){var n,o=i-t,s=i-e.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=_e(e).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ce(e,t,i,n,o){var s,r,a=se(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,s=o-a+(a>n?7:0)-(o>a?7:0),r=7*(t-1)+(i-o)+s+1,{year:r>0?e:e-1,dayOfYear:r>0?r:I(e-1)+r}}function ue(t){var i,n=t._i,o=t._f;return t._locale=t._locale||_e.localeData(t._l),null===n||o===e&&""===n?_e.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),_e.isMoment(n)?new h(n,!0):(o?C(o)?Q(t):K(t):ne(t),i=new h(t),i._nextDay&&(i.add(1,"d"),i._nextDay=e),i))}function he(e,t){var i,n;if(1===t.length&&C(t[0])&&(t=t[0]),!t.length)return _e();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function pe(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),$(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function fe(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function me(e,t,i){return"Month"===t?pe(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function ge(e,t){return function(i){return null!=i?(me(this,e,i),_e.updateOffset(this,t),this):fe(this,e)}}function ve(e){return 400*e/146097}function we(e){return 146097*e/400}function be(e){_e.duration.fn[e]=function(){return this._data[e]}}function ye(e){"undefined"==typeof ender&&(Ce=Te.moment,e?Te.moment=s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):Te.moment=_e)}for(var _e,Ce,ke,xe="2.9.0",Te="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Me=Math.round,Se=Object.prototype.hasOwnProperty,Ne=0,$e=1,De=2,Ie=3,Ee=4,Re=5,Ae=6,Oe={},Le=[],Fe="undefined"!=typeof module&&module&&module.exports,Pe=/^\/?Date\((\-?\d+)/i,je=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ye=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,He=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,We=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Be=/\d\d?/,Ve=/\d{1,3}/,Ue=/\d{1,4}/,ze=/[+\-]?\d{1,6}/,qe=/\d+/,Ge=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xe=/Z|[\+\-]\d\d:?\d\d/gi,Ke=/T/i,Ze=/[\+\-]?\d+/,Je=/[\+\-]?\d+(\.\d{1,3})?/,Qe=/\d/,et=/\d\d/,tt=/\d{3}/,it=/\d{4}/,nt=/[+-]?\d{6}/,ot=/[+-]?\d+/,st=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rt="YYYY-MM-DDTHH:mm:ssZ",at=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],lt=/([\+\-]|\d\d)/gi,ct=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ht={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pt={},ft={s:45,m:45,h:22,d:26,M:11},mt="DDD w W M D d".split(" "),gt="M D H h m s w W".split(" "),vt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return N(this.milliseconds()/100)},SS:function(){return v(N(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(N(e/60),2)+":"+v(N(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(N(e/60),2)+v(N(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},wt={},bt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],yt=!1;mt.length;)ke=mt.pop(),vt[ke+"o"]=d(vt[ke],ke);for(;gt.length;)ke=gt.pop(),vt[ke+ke]=a(vt[ke],2);vt.DDDD=a(vt.DDD,3),f(u.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,i){var n,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=_e.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=_e([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.apply(t,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return le(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"",invalidDate:function(){return this._invalidDate}}),_e=function(t,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._i=t,r._f=i,r._l=o,r._strict=s,r._isUTC=!1,r._pf=n(),ue(r)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),_e.min=function(){var e=[].slice.call(arguments,0);return he("isBefore",e)},_e.max=function(){var e=[].slice.call(arguments,0);return he("isAfter",e)},_e.utc=function(t,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=o,r._i=t,r._f=i,r._strict=s,r._pf=n(),ue(r).utc()},_e.unix=function(e){return _e(1e3*e)},_e.duration=function(e,t){var n,o,s,r,a=e,d=null;return _e.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(d=je.exec(e))?(n="-"===d[1]?-1:1,a={y:0,d:N(d[De])*n,h:N(d[Ie])*n,m:N(d[Ee])*n,s:N(d[Re])*n,ms:N(d[Ae])*n}):(d=Ye.exec(e))?(n="-"===d[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:s(d[2]),M:s(d[3]),d:s(d[4]),h:s(d[5]),m:s(d[6]),s:s(d[7]),w:s(d[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=b(_e(a.from),_e(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),o=new p(a),_e.isDuration(e)&&i(e,"_locale")&&(o._locale=e._locale),o},_e.version=xe,_e.defaultFormat=rt,_e.ISO_8601=function(){},_e.momentProperties=Le,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(t,i){return ft[t]===e?!1:i===e?ft[t]:(ft[t]=i,!0)},_e.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return _e.locale(e,t)}),_e.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?_e.defineLocale(e,t):_e.localeData(e),i&&(_e.duration._locale=_e._locale=i)),_e._locale._abbr},_e.defineLocale=function(e,t){return null!==t?(t.abbr=e,Oe[e]||(Oe[e]=new u),Oe[e].set(t),_e.locale(e),Oe[e]):(delete Oe[e],null)},_e.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return _e.localeData(e)}),_e.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _e._locale;if(!C(e)){if(t=F(e))return t;e=[e]}return L(e)},_e.isMoment=function(e){return e instanceof h||null!=e&&i(e,"_isAMomentObject")},_e.isDuration=function(e){return e instanceof p};for(ke=bt.length-1;ke>=0;--ke)S(bt[ke]);_e.normalizeUnits=function(e){return T(e)},_e.invalid=function(e){var t=_e.utc(NaN);return null!=e?f(t._pf,e):t._pf.userInvalidated=!0,t},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(e){return N(e)+(N(e)>68?1900:2e3)},_e.isDate=k,f(_e.fn=h.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=_e(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return A(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0:!1},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=H(this,e||_e.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,i){var n,o,s=P(e,this),r=6e4*(s.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(o=l(this,s),"quarter"===t?o/=3:"year"===t&&(o/=12)):(n=this-s,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?o:g(o)},from:function(e,t){return _e.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(_e(),e)},calendar:function(e){var t=e||_e(),i=P(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_e(t)))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=re(e,this.localeData()),this.add(e-t,"d")):t},month:ge("Month",!0),startOf:function(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=T(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var i;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this>+e):(i=_e.isMoment(e)?+e:+_e(e),i<+this.clone().startOf(t))},isBefore:function(e,t){var i;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+e>+this):(i=_e.isMoment(e)?+e:+_e(e),+this.clone().endOf(t)<i)},isBetween:function(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)},isSame:function(e,t){var i;return t=T(t||"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this===+e):(i=+_e(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e>this?this:e}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var i,n=this._offset||0;return null!=e?("string"==typeof e&&(e=V(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?_(this,_e.duration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(V(this._i)),this},hasAlignedHourOffset:function(e){return e=e?_e(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return $(this.year(),this.month())},dayOfYear:function(e){var t=Me((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=T(e),this[e]()},set:function(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else e=T(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var i;return t===e?this._locale._abbr:(i=_e.localeData(t),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),_e.fn.millisecond=_e.fn.milliseconds=ge("Milliseconds",!1),_e.fn.second=_e.fn.seconds=ge("Seconds",!1),_e.fn.minute=_e.fn.minutes=ge("Minutes",!1),_e.fn.hour=_e.fn.hours=ge("Hours",!0),_e.fn.date=ge("Date",!0),_e.fn.dates=s("dates accessor is deprecated. Use date instead.",ge("Date",!0)),_e.fn.year=ge("FullYear",!0),_e.fn.years=s("years accessor is deprecated. Use year instead.",ge("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,_e.fn.isUTC=_e.fn.isUtc,f(_e.duration.fn=p.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,o=this._days,s=this._months,r=this._data,a=0;r.milliseconds=n%1e3,e=g(n/1e3),r.seconds=e%60,t=g(e/60),r.minutes=t%60,i=g(t/60),r.hours=i%24,o+=g(i/24),a=g(ve(o)),o-=g(we(a)),s+=g(o/30),o%=30,a+=g(s/12),s%=12,r.days=o,r.months=s,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*N(this._months/12)},humanize:function(e){var t=de(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=_e.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=_e.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=T(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=T(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*ve(t),"month"===e?i:i/12;switch(t=this._days+Math.round(we(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),_e.duration.fn.toString=_e.duration.fn.toISOString;for(ke in ct)i(ct,ke)&&be(ke.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===N(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),function(e){e(_e)}(function(e){
return e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,i){return 12>e?i?"vm":"VM":i?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[MÃ´re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(e){e(_e)}(function(e){return e.defineLocale("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahç¹mm",LTS:"Ahç¹måsç§",L:"YYYY-MM-DD",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYY-MM-DD",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiemParse:/åæ¨|æ©ä¸|ä¸å|ä¸­å|ä¸å|æä¸/,meridiemHour:function(e,t){return 12===e&&(e=0),"åæ¨"===t||"æ©ä¸"===t||"ä¸å"===t?e:"ä¸å"===t||"æä¸"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,i){var n=100*e+t;return 600>n?"åæ¨":900>n?"æ©ä¸":1130>n?"ä¸å":1230>n?"ä¸­å":1800>n?"ä¸å":"æä¸"},calendar:{sameDay:function(){return 0===this.minutes()?"[ä»å¤©]Ah[ç¹æ´]":"[ä»å¤©]LT"},nextDay:function(){return 0===this.minutes()?"[æå¤©]Ah[ç¹æ´]":"[æå¤©]LT"},lastDay:function(){return 0===this.minutes()?"[æ¨å¤©]Ah[ç¹æ´]":"[æ¨å¤©]LT"},nextWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()-t.unix()>=604800?"[ä¸]":"[æ¬]",0===this.minutes()?i+"dddAhç¹æ´":i+"dddAhç¹mm"},lastWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()<t.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?i+"dddAhç¹æ´":i+"dddAhç¹mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(æ¥|æ|å¨)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"æ¥";case"M":return e+"æ";case"w":case"W":return e+"å¨";default:return e}},relativeTime:{future:"%så",past:"%så",s:"å ç§",m:"1åé",mm:"%dåé",h:"1å°æ¶",hh:"%då°æ¶",d:"1å¤©",dd:"%då¤©",M:"1ä¸ªæ",MM:"%dä¸ªæ",y:"1å¹´",yy:"%då¹´"},week:{dow:1,doy:4}})}),_e.locale("en"),Fe?module.exports=_e:"function"==typeof define&&define.amd?(define(function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Te.moment=Ce),_e}),ye(!0)):ye()}.call(this),+function(e){"use strict";e.showMessage=function(t){var i=e('<div class="alert alert-'+t.type+' alert-dismissible"></div>'),n=e('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');i.append(n).append(t.msg),i.css({position:"fixed",display:"block"}),t.pos?t.pos.top&&t.pos.left?i.css({top:t.pos.top,left:t.pos.left}):t.pos.top&&t.pos.right?i.css({top:t.pos.top,right:t.pos.right}):t.pos.bottom&&t.pos.left?i.css({bottom:t.pos.bottom,left:t.pos.left}):t.pos.bottom&&t.pos.right?i.css({bottom:t.pos.bottom,right:t.pos.right}):t.pos.top?i.css({left:t.pos.left,top:10}):t.pos.bottom?i.css({bottom:t.pos.bottom,left:10}):t.pos.left?i.css({left:t.pos.left,top:10}):t.pos.right&&i.css({right:t.pos.right,top:10}):i.css({bottom:10,right:10}),i.css("z-index",99),setTimeout(function(){i.fadeOut("slow")},3e3),e(document.body).append(i)},e.showMessageDialog=function(t){function i(){var e=n[0].offsetWidth||500,t=n[0].offsetHeight;n.css({margin:"0px",left:((window.innerWidth?window.innerWidth:document.body.clientWidth)-e)/2,top:((window.innerHeight?window.innerHeight:document.body.clientHeight)-t)/2})}if(t.type)var n=e('<div class="alert alert-'+t.type+' alert-dismissible alert-dialog"></div>');else{t.type="warning";var n=e('<div class="alert alert-'+t.type+' alert-dismissible alert-dialog"></div>')}var o=e('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');if(t.title)var s=e("<h4>"+t.title+"</h4>");else var s=e("<h4>æç¤º</h4>");var r,a=e('<div class="alert-content"><p>'+t.msg+"</p></div>");r=e("danger"==t.type||"warning"==t.type?'<div class="alert-dialog-footer"><div class="col-md-4 diag_detail" ></div><div class="col-md-4" ><button type="button" data-role="okbtn" data-dismiss="alert" class="btn btn-danger btn-block">ç¡®å®</button></div><div class="col-md-4"><button type="button" data-dismiss="alert" data-role="cancelbtn" class="btn btn-default btn-block">åæ¶</button></div></div>':'<div class="alert-dialog-footer"><div class="col-md-4"  ></div><div class="col-md-4 diag_detail" ></div><div class="col-md-4" ><button type="button" data-role="okbtn" data-dismiss="alert" class="btn btn-danger btn-block">ç¡®å®</button></div>'),n.append(o).append(s).append(a).append(r),t.width&&n.css({width:t.width}),t.height&&n.css({height:t.height}),t.detail&&(e(n).find(".diag_detail").append('<button type="button"  class="btn btn-block">è¯¦ç»</button>'),n.on("click",".diag_detail",function(){e(".detail_p").length>0?e(".detail_p").remove():n.append("<p class='detail_p'>"+t.detail+"</p>")})),t.backdrop&&(e(document.body).append('<div class="alert-backdrop" role="alert-dialog-backdrop"></div>'),n.on("close.bs.alert",function(){e('.alert-backdrop[role="alert-dialog-backdrop"]').remove()})),n.find('[data-role="okbtn"]').on("click.alert.ok",t.okfn),t.cancelfn&&"function"==typeof t.cancelfn&&(n.find('[data-role="cancelbtn"]').on("click",t.cancelfn),n.find('[aria-hidden="true"]').on("click",t.cancelfn)),n.css("z-index",99),e(document.body).append(n),i()},e.removeAlert=function(){var t;(t=e(".alert")).length&&t.remove(),(t=e(".alert-backdrop")).length&&t.remove(),(t=e(".move-dialog ")).length&&t.remove()}}(jQuery),+function(e){e.dialog=function(t){function i(){s.css({margin:"0px",left:((window.innerWidth?window.innerWidth:document.body.clientWidth)-m)/2,top:((window.innerHeight?window.innerHeight:document.body.clientHeight)-g)/2})}function n(){s.css({width:s[0].offsetWidth,height:s[0].offsetHeight})}function o(){s.css({width:"auto",height:"auto",left:s.offset().left,top:s.offset().top,right:window.innerWidth-s.offset().left-m,bottom:window.innerHeight-s.offset().top-g})}var s=e('<div class="move-dialog "><div class="move-alert alert alert-'+t.type+' alert-dismissible"></div></div>'),r=e('<button type="button" class="close"  aria-label="Close"><span aria-hidden="true">&times;</span></button>');t.title=t.title||trans("dialog.info_dialog","æç¤ºçªå£");var a=e("<h4>"+t.title+"</h4>");if(t.url)var d=e('<p class="dialog_p"><iframe class="dialog_iframe" src='+t.url+"></iframe></p>");else{var d=e('<p style="position: absolute;top: 50px;bottom: 20px;overflow: auto;left: 30px;right: 25px;"></p>');d.append(t.msg)}var l,c,u,h,p,f,m,g;t.width&&s.css({width:t.width}),t.height&&s.css({height:t.height}),s.find(".alert").append(r).append(a).append(d).append(l),s.wrap("<div style='padding:5px'></div>"),t.backdrop&&(e(document.body).append('<div class="alert-backdrop" role="alert-dialog-backdrop"></div>'),s.on("close.bs.alert",function(t){e('.alert-backdrop[role="alert-dialog-backdrop"]').remove()})),s.find('[data-role="okbtn"]').on("click.alert.ok",t.okfn),t.cancelfn&&"function"==typeof t.cancelfn&&(s.find('[data-role="cancelbtn"]').on("click",t.cancelfn),s.find('[aria-hidden="true"]').on("click",t.cancelfn)),s.css("z-index",99),e(document.body).append(s),m=s[0].offsetWidth,g=s[0].offsetHeight,i(),r.on("click",function(){var t;(t=s).length&&t.remove(),(t=e(".alert-backdrop")).length&&t.remove()}),t.movable&&(s.on("mousedown",function(e){u=e.clientX-s.position().left,h=e.clientY-s.position().top,11>p&&12>f?(o(),c=9,s.css({cursor:"se-resize"})):p>m-20&&f>g-10?(o(),c=8,s.css({cursor:"se-resize"})):11>p&&f>g-10?(o(),c=7,s.css({cursor:"ne-resize"})):p>m-20&&12>f?(o(),c=6,s.css({cursor:"ne-resize"})):12>p?(o(),c=5,s.css({cursor:"e-resize"})):p>m-20?(o(),c=4,s.css({cursor:"e-resize"})):11>f?(c=3,o(),s.css({cursor:"n-resize"})):f>g-10?(c=2,o(),s.css({cursor:"n-resize"})):"H4"==e.target.nodeName&&(c=1,n(),s.css({cursor:"auto"}))}),e(document).on("mousemove",function(e){return p=e.clientX-s.position().left,f=e.clientY-s.position().top,1==c?void s.css({left:e.clientX-u,top:e.clientY-h,cursor:"all-scroll"}):2==c?void s.css({bottom:window.innerHeight-e.clientY-20}):3==c?void s.css({top:e.clientY-20}):4==c?void s.css({right:window.innerWidth-e.clientX-20}):5==c?void s.css({left:e.clientX-20}):6==c?void s.css({top:e.clientY-20,right:window.innerWidth-e.clientX-20}):7==c?void s.css({left:e.clientX-20,bottom:window.innerHeight-e.clientY-20}):8==c?void s.css({bottom:window.innerHeight-e.clientY-20,right:window.innerWidth-e.clientX-20}):9==c?void s.css({top:e.clientY-20,left:e.clientX-20}):void(11>p&&12>f||p>m-20&&f>g-10?s.css({cursor:"se-resize"}):11>p&&f>g-10||p>m-20&&12>f?s.css({cursor:"ne-resize"}):12>p||p>m-20?s.css({cursor:"e-resize"}):11>f||f>g-10?s.css({cursor:"n-resize"}):s.css({cursor:"auto"}))}),e(document).on("mouseup",function(){c=!1,s.css({cursor:"auto"}),m=s[0].offsetWidth,g=s[0].offsetHeight}))}}($)+function(e){"use strict";function t(e){for(var t=e.offsetLeft||0,i=e.offsetTop||0;e=e.offsetParent;)t+=e.offsetLeft,i+=e.offsetTop;return{x:t,y:i}}function i(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1}function n(t){if(1==this.length){var i=e(this),n=i.data("u.autocomplete"),s="object"==typeof t&&t;return n||i.data("u.autocomplete",n=new o(this,s)),n}}var o=function(t,i){this.$input=e(t),this.options=e.extend({},o.DEFAULTS,i),this.requestIndex=0,this.pending=0;var n=this;this.options.inputClass&&this.$input.addClass(this.options.inputClass),this.$results=e("#autocompdiv"),0==this.$results.length&&(this.$results=e('<div id="autocompdiv"></div>'),e("body").append(this.$results)),this.$results.hide().addClass(this.options.resultsClass).css("position","absolute"),this.options.width>0&&this.$results.css("width",this.options.width),this.timeout=null,this.prev="",this.active=-1,this.cache={},this.keyb=!1,this.hasFocus=!1,this.lastKeyPressCode=null,this._initSource(),this.$input.keydown(function(e){switch(n.lastKeyPressCode=e.keyCode,e.keyCode){case 38:e.preventDefault(),n.moveSelect(-1);break;case 40:e.preventDefault(),n.moveSelect(1);break;case 9:case 13:n.selectCurrent()&&(n.$input.get(0).blur(),e.preventDefault());break;default:n.active=-1,n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){n.onChange()},n.options.delay)}}).focus(function(){n.hasFocus=!0}).blur(function(){n.hasFocus=!1,n.hideResults()}),this.hideResultsNow()};o.DEFAULTS={inputClass:"ac_input",resultsClass:"ac_results",lineSeparator:"\n",cellSeparator:"|",minChars:1,delay:400,matchCase:0,matchSubset:1,matchContains:0,cacheLength:1,mustMatch:0,extraParams:{},loadingClass:"ac_loading",selectFirst:!1,selectOnly:!1,maxItemsToShow:-1,autoFill:!1,width:0,source:null,select:null},o.fn=o.prototype,o.fn.flushCache=function(){this.cache={},this.cache.data={},this.cache.length=0},o.fn._initSource=function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(e,i){i(n.filterData(e.term,t))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},o.fn._response=function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,!this.pending},this)},o.fn.__response=function(e){e&&this.receiveData2(e),this.showResults()},o.fn.onChange=function(){if(46==this.lastKeyPressCode||this.lastKeyPressCode>8&&this.lastKeyPressCode<32)return this.$results.hide();var e=this.$input.val();e!=this.prev&&(this.prev=e,e.length>=this.options.minChars?(this.$input.addClass(this.options.loadingClass),this.pending++,this.source({term:e},this._response())):(this.$input.removeClass(this.options.loadingClass),this.$results.hide()))},o.fn.moveSelect=function(t){var i=e("li",this.$results[0]);i&&(this.active+=t,this.active<0?this.active=0:this.active>=i.size()&&(this.active=i.size()-1),i.removeClass("ac_over"),e(i[this.active]).addClass("ac_over"))},o.fn.selectCurrent=function(){var t=e("li.ac_over",this.$results[0])[0];if(!t){var i=e("li",this.$results[0]);this.options.selectOnly?1==i.length&&(t=i[0]):this.options.selectFirst&&(t=i[0])}return t?(this.selectItem(t),!0):!1},o.fn.selectItem=function(t){var i=this;t||(t=document.createElement("li"),t.selectValue="");var n=e.trim(t.selectValue?t.selectValue:t.innerHTML);this.lastSelected=n,this.prev=n,this.$results.html(""),this.$input.val(n),this.hideResultsNow(),this.options.select&&setTimeout(function(){i.options.select(t._item)},1)},o.fn.createSelection=function(e,t){var i=this.$input.get(0);if(i.createTextRange){var n=i.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()}else i.setSelectionRange?i.setSelectionRange(e,t):i.selectionStart&&(i.selectionStart=e,i.selectionEnd=t);i.focus()},o.fn.autoFill=function(e){8!=this.lastKeyPressCode&&(this.$input.val(this.$input.val()+e.substring(this.prev.length)),this.createSelection(this.prev.length,e.length))},o.fn.showResults=function(){var e=t(this.$input[0]),i=this.options.width>0?this.options.width:this.$input.width();"100%"===this.options.width?this.$results.css({top:e.y+this.$input[0].offsetHeight+"px",left:e.x+"px"}).show():this.$results.css({width:parseInt(i)+"px",top:e.y+this.$input[0].offsetHeight+"px",left:e.x+"px"}).show()},o.fn.hideResults=function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.hideResultsNow()},200)},o.fn.hideResultsNow=function(){if(this.timeout&&clearTimeout(this.timeout),this.$input.removeClass(this.options.loadingClass),this.$results.hide(),this.options.mustMatch){var e=this.$input.val();e!=this.lastSelected&&this.selectItem(null)}},o.fn.receiveData=function(e,t){if(t){if(this.$input.removeClass(this.options.loadingClass),this.$results.html(""),!this.hasFocus||0==t.length)return this.hideResultsNow();this.$results.append(this.dataToDom(t)),this.options.autoFill&&this.$input.val().toLowerCase()==e.toLowerCase()&&this.autoFill(t[0][0]),this.showResults()}else this.hideResultsNow()},o.fn.filterData=function(e,t){if(!e)return t;for(var i=[],n=0,o=t.length;o>n;n++){var s=t[n].label;0==s.indexOf(e)&&i.push(t[n])}return i},o.fn.receiveData2=function(e){if(e){if(this.$input.removeClass(this.options.loadingClass),this.$results.html(""),!this.hasFocus||0==e.length)return this.hideResultsNow();this.$results.append(this.dataToDom2(e)),this.showResults()}else this.hideResultsNow()},o.fn.dataToDom2=function(t){var n=document.createElement("ul"),o=t.length,s=this;this.options.maxItemsToShow>0&&this.options.maxItemsToShow<o&&(o=this.options.maxItemsToShow);for(var r=0;o>r;r++){var a=t[r];if(a){var d=document.createElement("li");this.options.formatItem?d.innerHTML=this.options.formatItem(a,r,o):d.innerHTML=a.label,d.selectValue=a.label,d._item=a,n.appendChild(d),e(d).hover(function(){e("li",n).removeClass("ac_over"),e(this).addClass("ac_over"),s.active=i(e("li",n),e(this).get(0))},function(){e(this).removeClass("ac_over")}).mousedown(function(e){e.preventDefault(),e.stopPropagation(),s.selectItem(this)})}}return n},o.fn.parseData=function(t){if(!t)return null;for(var i=[],n=t.split(this.options.lineSeparator),o=0;o<n.length;o++){var s=e.trim(n[o]);s&&(i[i.length]=s.split(this.options.cellSeparator))}return i},o.fn.dataToDom=function(t){var n=document.createElement("ul"),o=t.length,s=this;this.options.maxItemsToShow>0&&this.options.maxItemsToShow<o&&(o=this.options.maxItemsToShow);for(var r=0;o>r;r++){var a=t[r];if(a){var d=document.createElement("li");this.options.formatItem?(d.innerHTML=this.options.formatItem(a,r,o),d.selectValue=a[0]):(d.innerHTML=a[0],d.selectValue=a[0]);var l=null;if(a.length>1){l=[];for(var c=1;c<a.length;c++)l[l.length]=a[c]}d.extra=l,n.appendChild(d),e(d).hover(function(){e("li",n).removeClass("ac_over"),e(this).addClass("ac_over"),s.active=i(e("li",n),e(this).get(0))},function(){e(this).removeClass("ac_over")}).click(function(e){e.preventDefault(),e.stopPropagation(),s.selectItem(this)})}}return n},o.fn.requestData=function(t){var i=this;this.options.matchCase||(t=t.toLowerCase());var n=this.options.cacheLength?this.loadFromCache(t):null;n?this.receiveData(t,n):"string"==typeof this.options.url&&this.options.url.length>0?e.get(this.makeUrl(t),function(e){e=i.parseData(e),i.addToCache(t,e),i.receiveData(t,e)}):this.$input.removeClass(this.options.loadingClass)},o.fn.makeUrl=function(e){var t=this.options.url+"?q="+encodeURI(e);for(var i in this.options.extraParams)t+="&"+i+"="+encodeURI(this.options.extraParams[i]);return t},o.fn.loadFromCache=function(e){if(!e)return null;if(this.cache.data[e])return this.cache.data[e];if(this.options.matchSubset)for(var t=e.length-1;t>=this.options.minChars;t--){var i=e.substr(0,t),n=this.cache.data[i];if(n){for(var o=[],s=0;s<n.length;s++){var r=n[s],a=r[0];this.matchSubset(a,e)&&(o[o.length]=r)}return o}}return null},o.fn.matchSubset=function(e,t){this.options.matchCase||(e=e.toLowerCase());var i=e.indexOf(t);return-1==i?!1:0==i||this.options.matchContains},o.fn.addToCache=function(e,t){t&&e&&this.options.cacheLength&&(!this.cache.length||this.cache.length>this.options.cacheLength?(this.flushCache(),this.cache.length++):this.cache[e]||this.cache.length++,this.cache.data[e]=t)};var s=e.fn.autocomplete;e.fn.autocomplete=n,e.fn.autocomplete.Constructor=o,e.fn.autocomplete.noConflict=function(){return e.fn.autocomplete=s,this}}($),+function(e){"use strict";function t(t){if(1==this.length){var n=e(this),o=n.data("u.backtop"),s="object"==typeof t&&t;return o||n.data("u.backtop",o=new i(this,s)),o}}var i=function(t,n){var o=this;this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),e(window).scroll(function(t){e(document).scrollTop()>o.options.toggleHeight?o.$element.addClass("active"):o.$element.removeClass("active")}),this.$element.click(function(){e(document).scrollTop(0)})};i.DEFAULTS={toggleHeight:100},i.fn=i.prototype;var n=e.fn.backtop;e.fn.backtop=t,e.fn.backtop.Constructor=i,e.fn.backtop.noConflict=function(){return e.fn.backtop=n,this}}(jQuery),+function(e,t){"use strict";function i(e){this.precision=e}function n(e){this.pattern=e}i.prototype.update=function(e){this.precision=e},i.prototype.format=function(t){if(!e.isNumeric(t))return"";for(;"0"==(t+"").charAt(0)&&t.length>1;)t=t.substring(1);var i=t;if(e.isNumeric(this.precision)){var n=parseFloat(t);if(i=(Math.round(n*Math.pow(10,this.precision))/Math.pow(10,this.precision)).toFixed(this.precision),"NaN"==i)return""}return i},n.prototype.update=function(e){this.pattern=e},n.prototype.format=function(e){return t(e).format(this.pattern)},window.DataPlugins=window.DataPlugins?window.DataPlugins:{},window.DataPlugins.formater={getter:function(e){},setter:function(t,o){var s=JSON.parse(e(this).attr("data-plugin")),r=window.DataPlugins.formater[t.type];"number"==t.type?r=r?r.update(s.formater.precision):new i(s.formater.precision):"date"==t.type&&(r=r?r.update(s.formater.pattern):new n(s.formater.pattern)),this.showValue=r.format(o),this.trueValue=this.showValue}},e.NumberFormater=i,e.DateFormater=n}($,moment),AbstractMasker.prototype.format=function(e){if(null==e)return null;var t=this.formatArgument(e);return this.innerFormat(t)},AbstractMasker.prototype.formatArgument=function(e){},AbstractMasker.prototype.innerFormat=function(e){},AbstractSplitMasker.prototype=new AbstractMasker,AbstractSplitMasker.prototype.elements=new Array,AbstractSplitMasker.prototype.format=function(e){if(null==e)return null;var t=this.formatArgument(e);return this.innerFormat(t)},AbstractSplitMasker.prototype.formatArgument=function(e){return e},AbstractSplitMasker.prototype.innerFormat=function(e){if(null==e||""==e)return new FormatResult(e);this.doSplit();var t="";return t=this.getElementsValue(this.elements,e),new FormatResult(t)},AbstractSplitMasker.prototype.getElementsValue=function(e,t){var i="";if(e instanceof Array)for(var n=0;n<e.length;n++)i+=this.getElementsValue(e[n],t);else e.getValue&&(i=e.getValue(t));return i},AbstractSplitMasker.prototype.getExpress=function(){},AbstractSplitMasker.prototype.doSplit=function(){var e=this.getExpress();(null==this.elements||0==this.elements.length)&&(this.elements=this.doQuotation(e,this.getSeperators(),this.getReplaceds(),0))},AbstractSplitMasker.prototype.doQuotation=function(e,t,i,n){if(0==e.length)return null;var o,s=new Array,r=new RegExp('".*?"',"g"),a=0;do if(o=r.exec(e),null!=o){var d=o.index,l=r.lastIndex;if(d!=l&&d>a){var c=this.doSeperator(e.substring(a,d),t,i,n);null!=c&&c.length>0&&s.push(c)}s.push(new StringElement(e.substring(d+1,l-1))),a=l}while(null!=o);if(a<e.length){var c=this.doSeperator(e.substring(a,e.length),t,i,n);null!=c&&c.length>0&&s.push(c)}return s},AbstractSplitMasker.prototype.doSeperator=function(e,t,i,n){if(n>=t.length){var o=new Array;return o.push(this.getVarElement(e)),o}if(0==e.length)return null;var s,r=0,o=new Array,a=new RegExp(t[n],"g");do if(s=a.exec(e),null!=s){var d=s.index,l=a.lastIndex;if(d!=l){if(d>r){var c=this.doSeperator(e.substring(r,d),t,i,n+1);null!=c&&c.length>0&&o.push(c)}null!=i[n]?o.push(new StringElement(i[n])):o.push(new StringElement(e.substring(d,l))),r=l}}while(null!=s);if(r<e.length){var c=this.doSeperator(e.substring(r,e.length),t,i,n+1);null!=c&&c.length>0&&o.push(c)}return o},AddressMasker.prototype=new AbstractSplitMasker,AddressMasker.prototype.update=function(e){this.formatMeta=$.extend({},AddressMasker.DefaultFormatMeta,e)},AddressMasker.prototype.getExpress=function(){return this.formatMeta.express},AddressMasker.prototype.getReplaceds=function(){return[this.formatMeta.separator]},AddressMasker.prototype.getSeperators=function(){return["(\\s)+?"]},AddressMasker.prototype.getVarElement=function(e){var t={};return"C"==e&&(t.getValue=function(e){return e.country}),"S"==e&&(t.getValue=function(e){return e.state}),"T"==e&&(t.getValue=function(e){return e.city}),"D"==e&&(t.getValue=function(e){return e.section}),"R"==e&&(t.getValue=function(e){return e.road}),"P"==e&&(t.getValue=function(e){return e.postcode}),void 0==typeof t.getValue?new StringElement(e):t},AddressMasker.prototype.formatArgument=function(e){return e},NumberMasker.prototype=new AbstractMasker,NumberMasker.prototype.formatMeta=null,NumberMasker.prototype.update=function(e){this.formatMeta=$.extend({},NumberMasker.DefaultFormatMeta,e)},NumberMasker.prototype.innerFormat=function(e){var t,i,n,o;t=e.value,t>0?(i=this.formatMeta.positiveFormat,o=t+""):0>t?(i=this.formatMeta.negativeFormat,o=(t+"").substr(1,(t+"").length-1)):(i=this.formatMeta.positiveFormat,o=t+""),n=o.indexOf("."),o=this.setTheSeperator(o,n),o=this.setTheMark(o,n);var s=null;return 0>t&&this.formatMeta.isNegRed&&(s="FF0000"),new FormatResult(i.replaceAll("n",o),s)},NumberMasker.prototype.setTheMark=function(e,t){var i,n,o;if(!this.formatMeta.isMarkEnable)return e;for(0>=t&&(t=e.length),n=e.charCodeAt(0),i=0,45==n&&(i=1),o=t-3;o>i;)e=e.substr(0,o-0)+this.formatMeta.markSymbol+e.substr(o,e.length-o),o-=3;return e},NumberMasker.prototype.setTheSeperator=function(e,t){var i;return t>0&&(i=NumberMasker.toCharArray(e),i[t]=this.formatMeta.pointSymbol,e=i.join("")),e},NumberMasker.toCharArray=function(e){for(var e=e.split(""),t=new Array,i=0;i<e.length;i++)t.push(e[i]);return t},NumberMasker.prototype.formatArgument=function(e){var t={};return t.value=e,t},CurrencyMasker.prototype=new NumberMasker,CurrencyMasker.prototype.formatMeta=null,CurrencyMasker.prototype.update=function(e){this.formatMeta=$.extend({},CurrencyMasker.DefaultFormatMeta,e)},CurrencyMasker.prototype.innerFormat=function(e){if(!e.value)return{value:""};var t=new NumberMasker(this.formatMeta).innerFormat(e);return t.value=this.formatMeta.curSymbol+t.value,t},DateTimeMasker.prototype=new AbstractSplitMasker,DateTimeMasker.prototype.formatMeta=null,DateTimeMasker.prototype.update=function(e){this.formatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,e)},DateTimeMasker.enShortMonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DateTimeMasker.enLongMonth=["January","February","March","April","May","June","July","August","September","October","November","December"],DateTimeMasker.prototype.doOne=function(e){if(0==e.length)return new"";var t=new Object;return"yyyy"==e&&(t.getValue=function(e){return DateTimeMasker.getyyyy(e)}),"yy"==e&&(t.getValue=function(e){return DateTimeMasker.getyy(e)}),"MMMM"==e&&(t.getValue=function(e){return DateTimeMasker.getMMMM(e)}),"MMM"==e&&(t.getValue=function(e){return DateTimeMasker.getMMM(e)}),"MM"==e&&(t.getValue=function(e){return DateTimeMasker.getMM(e)}),"M"==e&&(t.getValue=function(e){return DateTimeMasker.getM(e)}),"dd"==e&&(t.getValue=function(e){return DateTimeMasker.getdd(e)}),"d"==e&&(t.getValue=function(e){return DateTimeMasker.getd(e)}),"hh"==e&&(t.getValue=function(e){return DateTimeMasker.gethh(e)}),"h"==e&&(t.getValue=function(e){return DateTimeMasker.geth(e)}),"mm"==e&&(t.getValue=function(e){return DateTimeMasker.getmm(e)}),"m"==e&&(t.getValue=function(e){return DateTimeMasker.getm(e)}),"ss"==e&&(t.getValue=function(e){return DateTimeMasker.getss(e)}),"s"==e&&(t.getValue=function(e){return DateTimeMasker.gets(e)}),"HH"==e&&(t.getValue=function(e){return DateTimeMasker.getHH(e)}),"H"==e&&(t.getValue=function(e){return DateTimeMasker.getH(e)}),"t"==e&&(t.getValue=function(e){return DateTimeMasker.gett(e)}),"st"==e&&(t.getValue=function(e){return DateTimeMasker.gets(e)+DateTimeMasker.gett(e)}),"mt"==e&&(t.getValue=function(e){return DateTimeMasker.getm(e)+DateTimeMasker.gett(e)}),"yyyyMMdd"==e&&(t.getValue=function(e){return DateTimeMasker.getyyyy(e)+DateTimeMasker.getMM(e)+DateTimeMasker.getdd(e)}),"undefined"==typeof t.getValue&&(t.getValue=function(e){return DateTimeMasker.getyyyy(e)+"-"+DateTimeMasker.getMM(e)+"-"+DateTimeMasker.getdd(e)}),t},DateTimeMasker.getyyyy=function(e){return e.getFullYear()},DateTimeMasker.getyy=function(e){return(""+e.getFullYear()).substring(2)},DateTimeMasker.getM=function(e){return""+(e.getMonth()+1)},DateTimeMasker.getMM=function(e){var t=e.getMonth()+1;return 10>t?"0"+t:t},DateTimeMasker.getMMM=function(e){return this.enShortMonth[e.getMonth()]},DateTimeMasker.getMMMM=function(e){return this.enLongMonth[e.getMonth()]},DateTimeMasker.getdd=function(e){var t=e.getDate();return 10>t?"0"+t:e.getDate()+""},DateTimeMasker.getd=function(e){return e.getDate()+""},DateTimeMasker.gethh=function(e){var t=e.getHours();return 10>t?"0"+t:e.getHours()+""},DateTimeMasker.geth=function(e){return e.getHours()+""},DateTimeMasker.getHH=function(e){var t=e.getHours();return t>=12&&(t-=12),10>t?"0"+t:t+""},DateTimeMasker.getH=function(e){var t=e.getHours();return t>=12&&(t-=12),t+""},DateTimeMasker.getmm=function(e){var t=e.getMinutes();return 10>t?"0"+t:e.getMinutes()+""},DateTimeMasker.getm=function(e){return""+e.getMinutes()},DateTimeMasker.getss=function(e){var t=e.getSeconds();return 10>t?"0"+t:t+""},DateTimeMasker.gets=function(e){return e.getSeconds()+""},DateTimeMasker.gett=function(e){var t=e.getHours();return 12>=t?"AM":"PM"},DateTimeMasker.prototype.getExpress=function(){return this.formatMeta.format},DateTimeMasker.prototype.getReplaceds=function(){return[" ",this.formatMeta.speratorSymbol,":"]},DateTimeMasker.prototype.getSeperators=function(){return["(\\s)+?","-",":"]},DateTimeMasker.prototype.getVarElement=function(e){return this.doOne(e)},DateTimeMasker.prototype.formatArgument=function(e){if(0==e)return"";if(null==e||""==e)return e;if("string"==typeof e){var t=e.split(" ");if(t.length>0){var i=t[0].split("-"),n=new Date;if(n.setDate(1),n.setFullYear(parseInt(i[0],10)),n.setMonth(parseInt(i[1],10)-1),n.setDate(parseInt(i[2],10)),2==t.length&&void 0!=t[1]){var o=t[1].split(":");n.setHours(parseInt(o[0],10)),n.setMinutes(parseInt(o[1],10)),n.setSeconds(parseInt(o[2],10)),o.length>3&&n.setMilliseconds(parseInt(o[3],10))}}return n}return e},DateMasker.prototype=new DateTimeMasker,DateMasker.DefaultFormatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,{format:"yyyy-MM-dd"}),DateMasker.prototype.update=function(e){this.formatMeta=$.extend({},DateMasker.DefaultFormatMeta,e)},TimeMasker.prototype=new DateTimeMasker,TimeMasker.DefaultFormatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,{format:"hh:mm:ss"}),TimeMasker.prototype.update=function(e){this.formatMeta=$.extend({},TimeMasker.DefaultFormatMeta,e)},PercentMasker.prototype=new AbstractMasker,PercentMasker.prototype.formatArgument=function(e){return e},PercentMasker.prototype.innerFormat=function(e){var t="";if(""!=e){var i=String(e),n=i.length-i.indexOf(".")-1,o=n-2;0>o&&(o=0),t=100*parseFloat(e),t=(t*Math.pow(10,o)/Math.pow(10,o)).toFixed(o),t+="%"}return{value:t}},StringElement.prototype=new Object,StringElement.prototype.value="",StringElement.prototype.getValue=function(e){return this.value},FormatResult.prototype=new Object,NumberMasker.DefaultFormatMeta={isNegRed:!0,isMarkEnable:!0,markSymbol:",",pointSymbol:".",positiveFormat:"n",negativeFormat:"-n"},CurrencyMasker.DefaultFormatMeta=$.extend({},NumberMasker.DefaultFormatMeta,{positiveFormat:"n",negativeFormat:"-n"}),AddressMasker.defaultFormatMeta={express:"C S T R P",separator:" "},DateTimeMasker.DefaultFormatMeta={format:"yyyy-MM-dd hh:mm:ss",speratorSymbol:"-"}+function(e){"use strict";function t(){var e,t={},i=navigator.userAgent.toLowerCase();return(e=i.match(/rv:([\d.]+)\) like gecko/))?t.ie=parseInt(e[1]):(e=i.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=i.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=i.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=i.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=i.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t}function i(e,t){t.browser.ie&&t.browser.ie<9?e.show():e.css("transition","all 300ms").css("transform","translate3d(0,0,0)")}function n(e,t,i){t.browser.ie&&t.browser.ie<9?e.hide():e.css("transition","all 300ms").css("transform","translate3d("+i+"px,0,0)")}function o(t){if(1==this.length){var i=e(this),n=i.data("u.mdlayout"),o="object"==typeof t&&t;return n||i.data("u.mdlayout",n=new s(this,o)),n}}var s=function(i,n){this.browser=t();var o=this;this.$element=e(i),this.options=e.extend({},s.DEFAULTS,n),this.$element.css("position","relative").css("width","100%").css("height","100%").css("overflow","hidden"),this.$master=this.$element.find('[data-role="master"]'),this.$detail=this.$element.find('[data-role="detail"]'),this.$master.css("float","left").css("height","100%"),this.$detail.css("height","100%").css("overflow","hidden").css("position","relative"),this.masterWidth=this.$master.width(),this.detailWidth=this.$detail.width(),o.browser.ie&&o.browser.ie<9?(this.$master.find('[data-role="page"]').css("position","absolute").css("height","100%").css("width","100%").hide().eq(0).show(),this.$detail.find('[data-role="page"]').css("position","absolute").css("height","100%").css("width","100%").hide().eq(0).show()):(this.$master.find('[data-role="page"]').css("position","absolute").css("transform","translate3d("+this.masterWidth+"px,0,0)").css("height","100%").css("width","100%").eq(0).css("transform","translate3d(0,0,0)"),this.$detail.find('[data-role="page"]').css("position","absolute").css("left","0px").css("transform","translate3d("+this.detailWidth+"px,0,0)").css("height","100%").css("width","100%").eq(0).css("transform","translate3d(0,0,0)")),this.current_m_pageId=this.$master.find('[data-role="page"]').eq(0).attr("id"),
this.current_d_pageId=this.$detail.find('[data-role="page"]').eq(0).attr("id"),this.mHistory=[],this.dHistory=[],this.isNarrow=null,this.response(),e(window).resize(function(){o.response()})};s.DEFAULTS={minWidth:600,afterNarrow:function(){},afterUnNarrow:function(){},afterMasterGo:function(e){},afterMasterBack:function(e){},afterDetailGo:function(e){},afterDetailBack:function(e){}},s.fn=s.prototype,s.fn.response=function(){var e=this.$element.width();e<this.options.minWidth?((null==this.isNarrow||0==this.isNarrow)&&(this.isNarrow=!0),this.hideMaster(),this.options.afterNarrow()):((null==this.isNarrow||1==this.isNarrow)&&(this.isNarrow=!1),this.showMaster(),this.options.afterUnNarrow()),this.calcWidth()},s.fn.calcWidth=function(){(!this.browser.ie||this.browser.ie>8)&&(this.detailWidth=this.$detail.width(),this.masterWidth=this.$master.width(),this.$detail.find('[data-role="page"]').css("transform","translate3d("+this.detailWidth+"px,0,0)"),this.$detail.find("#"+this.current_d_pageId).css("transform","translate3d(0,0,0)"))},s.fn.mGo=function(e){this.current_m_pageId!=e&&(this.mHistory.push(this.current_m_pageId),n(this.$master.find("#"+this.current_m_pageId),this,"-"+this.masterWidth),this.current_m_pageId=e,i(this.$master.find("#"+this.current_m_pageId),this),this.options.afterMasterGo(e))},s.fn.mBack=function(){0!=this.mHistory.length&&(n(this.$master.find("#"+this.current_m_pageId),this,this.masterWidth),this.current_m_pageId=this.mHistory.pop(),i(this.$master.find("#"+this.current_m_pageId),this),this.options.afterMasterBack(this.current_d_pageId))},s.fn.dGo=function(e){this.current_d_pageId!=e&&(this.dHistory.push(this.current_d_pageId),n(this.$detail.find("#"+this.current_d_pageId),this,"-"+this.detailWidth),this.current_d_pageId=e,i(this.$detail.find("#"+this.current_d_pageId),this),this.options.afterDetailGo(e))},s.fn.dBack=function(){0!=this.dHistory.length&&(n(this.$detail.find("#"+this.current_d_pageId),this,this.detailWidth),this.current_d_pageId=this.dHistory.pop(),i(this.$detail.find("#"+this.current_d_pageId),this),this.options.afterDetailBack(this.current_d_pageId))},s.fn.showMaster=function(){this.browser.ie&&this.browser.ie<9?this.$master.show():this.$master.css("transform","translate3d(0,0,0)").css("transition","all 300ms"),this.isNarrow||this.$master.css("position","relative")},s.fn.hideMaster=function(){this.$master.position().left<0||0==this.$master.is(":visible")||(this.browser.ie&&this.browser.ie<9?this.$master.hide():this.$master.css("transform","translate3d(-"+this.masterWidth+"px,0,0)").css("transition","all 300ms"),this.$master.css("position","absolute").css("z-index",5),this.calcWidth())};var r=e.fn.mdlayout;e.fn.mdlayout=o,e.fn.mdlayout.Constructor=s,e.fn.mdlayout.noConflict=function(){return e.fn.mdlayout=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),n=i.data("u.pagination"),s="object"==typeof t&&t;n?n.update(s):i.data("u.pagination",n=new o(this,s))})}var i=function(e,t){this.isCurrent=function(){return t==e.currentPage},this.isFirst=function(){return 1==t},this.isLast=function(){return t==e.totalPages},this.isPrev=function(){return t==e.currentPage-1},this.isNext=function(){return t==e.currentPage+1},this.isLeftOuter=function(){return t<=e.outerWindow},this.isRightOuter=function(){return e.totalPages-t<e.outerWindow},this.isInsideWindow=function(){return e.currentPage<e.innerWindow+1?t<=2*e.innerWindow+1:e.currentPage>e.totalPages-e.innerWindow?e.totalPages-t<=2*e.innerWindow:Math.abs(e.currentPage-t)<=e.innerWindow},this.number=function(){return t},this.pageSize=function(){return e.pageSize}},n={firstPage:function(e,t,i){return'<li role="first"'+(i.isFirst()?'class="disabled"':"")+'><a href="#">'+t.first+"</a></li>"},prevPage:function(e,t,i){return'<li role="prev"'+(i.isFirst()?'class="disabled"':"")+'><a href="#" rel="prev">'+t.prev+"</a></li>"},nextPage:function(e,t,i){return'<li role="next"'+(i.isLast()?'class="disabled"':"")+'><a href="#" rel="next">'+t.next+"</a></li>"},lastPage:function(e,t,i){return'<li role="last"'+(i.isLast()?'class="disabled"':"")+'><a href="#">'+t.last+"</a></li>"},gap:function(e,t){return'<li role="gap" class="disabled"><a href="#">'+t.gap+"</a></li>"},page:function(e,t,i){return'<li role="page"'+(i.isCurrent()?'class="active"':"")+'><a href="#"'+(i.isNext()?' rel="next"':"")+(i.isPrev()?'rel="prev"':"")+">"+i.number()+"</a></li>"}},o=function(t,i){this.$element=e(t),this.options=e.extend({},o.DEFAULTS,i),this.$ul=this.$element,this.render()};o.DEFAULTS={currentPage:1,totalPages:1,pageSize:20,innerWindow:2,outerWindow:0,first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",gap:"..",totalText:"åè®¡:",truncate:!1,page:function(e){return!0}},o.prototype.update=function(t){this.$ul.empty(),this.options=e.extend({},this.options,t),this.render()},o.prototype.render=function(){var t=((new Date).valueOf(),this.options);if(!t.totalPages)return void this.$element.hide();this.$element.show();var o=[],s=new i(t,t.currentPage);s.isFirst()&&t.truncate||(t.first&&o.push(n.firstPage(this,t,s)),t.prev&&o.push(n.prevPage(this,t,s)));for(var r=!1,a=1,d=t.totalPages;d>=a;a++){var l=new i(t,a);l.isLeftOuter()||l.isRightOuter()||l.isInsideWindow()?(o.push(n.page(this,t,l)),r=!1):!r&&t.outerWindow>0&&(o.push(n.gap(this,t)),r=!0)}if(s.isLast()&&t.truncate||(t.next&&o.push(n.nextPage(this,t,s)),t.last&&o.push(n.lastPage(this,t,s))),t.totalCount>0){var c='<li><a style="cursor:default;background-color:#FFF;">'+t.totalText+t.totalCount+"</a></li>";o.push(c)}if(t.jumppage||t.pageSize){var u='<input class="page_j" style="margin-right: 6px;width: 32px;border: 1px solid #ddd; height: 20px; padding-left: 2px; border-radius: 3px;" value='+t.currentPage+">é¡µ&nbsp;&nbsp;",h='æ¾ç¤º<input  class="page_z"  style="margin:0px 6px;width: 32px;border: 1px solid #ddd; height: 20px; padding-left: 2px; border-radius: 3px;" value='+t.pageSize+">æ¡&nbsp;&nbsp;",p="<li><a>"+(t.jumppage?u:"")+(t.pageSize?h:"")+"<i class='jump_page fa fa-arrow-circle-right' style='margin-left: 8px; cursor: pointer;'></i></a></li>";o.push(p)}this.$ul[0].insertAdjacentHTML("beforeEnd",o.join(""));var f=this;e(".jump_page").off("click").on("click",function(){var i,n;return i=e(this).siblings(".page_j").val()?e(this).siblings(".page_j").val():t.currentPage,n=e(this).siblings(".page_z").val()?e(this).siblings(".page_z").val():t.pageSize,f.page(i,t.totalPages,n),f.$element.trigger("pageChange",i),!1}),this.$ul.find('[role="first"] > a').bind("click.bs-pagin",function(){return t.currentPage<=1?void 0:(f.$element.trigger("pageChange",1),f.firstPage(),!1)}),this.$ul.find('[role="prev"] > a').bind("click.bs-pagin",function(){return t.currentPage<=1?void 0:(f.$element.trigger("pageChange",t.currentPage-1),f.prevPage(),!1)}),this.$ul.find('[role="next"] > a').bind("click.bs-pagin",function(){return t.currentPage+1>t.totalPages?void 0:(f.$element.trigger("pageChange",t.currentPage+1),f.nextPage(),!1)}),this.$ul.find('[role="last"] > a').bind("click.bs-pagin",function(){return t.currentPage!=t.totalPages?(f.$element.trigger("pageChange",t.totalPages),f.lastPage(),!1):void 0}),this.$ul.find('[role="page"] > a').bind("click.bs-pagin",function(){var i=f.$element.find(".page_z").val()?f.$element.find(".page_z").val():t.pageSize;return f.page(parseInt(e(this).html()),t.totalPages,i),f.$element.trigger("pageChange",parseInt(e(this).html())),!1})},o.prototype.page=function(e,t,i){var n=this.options;return void 0===t&&(t=n.totalPages),void 0===i&&(i=n.pageSize),e>0&&t>=e&&n.page(e)&&(this.$ul.empty(),n.pageSize=i,n.currentPage=e,n.totalPages=t,this.render()),!1},o.prototype.firstPage=function(){return this.page(1)},o.prototype.lastPage=function(){return this.page(this.options.totalPages)},o.prototype.nextPage=function(){return this.page(this.options.currentPage+1)},o.prototype.prevPage=function(){return this.page(this.options.currentPage-1)};var s=e.fn.pagination;e.fn.pagination=t,e.fn.pagination.Constructor=o,e.fn.pagination.noConflict=function(){return e.fn.pagination=s,this}}(jQuery),+function(){var e=function(t){var i=t.contentId;if($.isEmptyObject(i))throw new Error("contentId is null");this.options=$.extend({},e.DEFAULTS,t),this.params=this.options.params,this.create(),this.loaded=!1};e.DEFAULTS={isPOPMode:!1,searchInput:null,contentId:null,okId:"okBtn",cancelId:"cancelBtn",width:null,height:null,title:"åç§",setVal:function(){},onOk:function(){},onCancel:function(){}},e.fn=e.prototype,e.fn.create=function(){var e=this;e.setVal=this.options.setVal,e.searchInput=this.options.searchInput;var t=this.options.contentId.replace(/[^\w\s]/gi,"\\$&");if(this.options.isPOPMode){var i=$("#"+t);if(0==i.length){e.isDefaultDialog=!0;var n=document.createElement("DIV");n.innerHTML='<div class="modal" id="'+t+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Modal title</h4></div><div class="modal-body"></div><div class="modal-footer"><button   type="button" class="btn btn-primary okBtn">ç¡®å®</button><button  type="button" class="btn btn-default cancelBtn" data-dismiss="modal">åæ¶</button></div></div></div></div>',document.body.appendChild(n),i=$("#"+t)}this.$contentEle=i.find(".modal-body"),this.$okBtn=i.find(".okBtn"),this.$cancelBtn=i.find(".cancelBtn"),this.dialog=i,this.options.width&&i.find(".modal-content").css("width",this.options.width),this.options.height&&this.$contentEle.css("height",this.options.height),this.dialog.find(".modal-title").html(this.options.title)}else 0===$("#"+this.options.contentId).length&&$("body").append($("<div>").attr("id",this.options.contentId)),this.$contentEle=$("#"+t),this.$okBtn=$("#"+t+this.options.okId),this.$cancelBtn=$("#"+t+this.options.cancelId);this.$okBtn.on("click",function(){e.submit()}),this.$cancelBtn.on("click",function(){e.cancel()})},e.fn.submit=function(){var e=this.submitData();this.options.onOk(e),t.destroy(this)},e.fn.cancel=function(){this.options.onCancel(),t.destroy(this)},e.fn.open=function(){var e=this;e.isDefaultDialog&&e.dialog.modal("show"),require([this.options.pageUrl],function(t){e.$contentEle.html(t.template),t.init(e),e.loaded=!0})},e.fn.registerSubmitFunc=function(e){this.submitData=e},e.fn.submitData=function(){};var t=function(i){var n=new e(i);return t.addRefer(n),n.open(),n};e.fn.destroy=function(){this.dialog&&(this.isDefaultDialog&&this.dialog.modal("hide"),this.dialog.parent().remove()),delete this.options},t.instances={},t.openRefer=function(i){var n=new e(i);t.addRefer(n),n.open()},t.getRefer=function(e){return t.instances[e]},t.addRefer=function(e){t.instances[e.options.id]=e},t.destroy=function(e){var i=t.instances[e.options.id];delete t.instances[e.options.id],i.destroy()},$.refer=t}(jQuery)+function(e){function t(t,i){var n=this;if(this.$element=t,this.validates=[],i&&i.single&&1==i.single)this.createValidate(this.$element,i);else if(this.$element.children().length>0){var o=this.$element.find("[valid-type], [required]");o.each(function(){var t=e(this);n.createValidate(t,i,o)})}else this.createValidate(this.$element,i);return this}var i=function(t,n,o){this.$element=t,this.$form=o,this.options=n,this.required=!1,this.timeout=null,this.required=this.options.required?this.options.required:this.$element.attr("required")?!0:!1,this.validType=this.options.validType?this.options.validType:this.$element.attr("valid-type")?this.$element.attr("valid-type"):null,this.validMode=this.options.validMode?this.options.validMode:this.$element.attr("valid-mode")?this.$element.attr("valid-mode"):i.DEFAULTS.validMode,this.nullMsg=this.options.nullMsg?this.options.nullMsg:this.$element.attr("null-msg")?this.$element.attr("null-msg"):i.NULLMSG[this.validType],this.required&&!this.nullMsg&&(this.nullMsg=i.NULLMSG.required),this.errorMsg=this.options.errorMsg?this.options.errorMsg:e(t).attr("error-msg")?this.$element.attr("error-msg"):i.ERRORMSG[this.validType],this.regExp=this.options.reg?this.options.reg:e(t).attr("reg")?this.$element.attr("reg"):i.REG[this.validType],this.tipId=this.options.tipId?this.options.tipId:e(t).attr("tip-id")?this.$element.attr("tip-id"):null,this.placement=this.options.placement?this.options.placement:e(t).attr("placement")?this.$element.attr("placement"):i.DEFAULTS.placement,this.minLength=this.options.minLength?this.options.minLength:e(t).attr("min-length")?this.$element.attr("min-length"):null,this.maxLength=this.options.maxLength?this.options.maxLength:e(t).attr("max-length")?this.$element.attr("max-length"):null,this.min=this.options.min?this.options.min:e(t).attr("min")?this.$element.attr("min"):null,this.max=this.options.max?this.options.max:e(t).attr("max")?this.$element.attr("max"):null,this.create()};i.tipTemplate='<div class="tooltip" role="tooltip"><div class="tooltip-arrow tooltip-arrow-c"></div><div class="tooltip-arrow"></div><div class="tooltip-inner" style="color:#ed7103;border:1px solid #ed7103;background-color:#fff7f0;"></div></div>',i.NULLMSG={required:trans("validate.required","ä¸è½ä¸ºç©ºï¼"),integer:trans("validate.integer","è¯·å¡«åæ´æ°ï¼"),"float":trans("validate.float","è¯·å¡«åæ°å­ï¼"),zipCode:trans("validate.zipCode","è¯·å¡«åé®æ¿ç¼ç ï¼"),phone:trans("validate.phone","è¯·å¡«åææºå·ç ï¼"),email:trans("validate.email","è¯·å¡«åé®ç®±å°åï¼"),url:trans("validate.url","è¯·å¡«åç½åï¼")},i.ERRORMSG={integer:trans("validate.integer","è¯·å¡«åæ´æ°ï¼"),"float":trans("validate.float","è¯·å¡«åæ°å­ï¼"),zipCode:trans("validate.zipCode","é®æ¿ç¼ç æ ¼å¼ä¸å¯¹ï¼"),phone:trans("validate.phone","ææºå·ç æ ¼å¼ä¸å¯¹ï¼"),email:trans("validate.email","é®ç®±å°åæ ¼å¼ä¸å¯¹ï¼"),url:trans("validate.url","ç½åæ ¼å¼ä¸å¯¹ï¼")},i.REG={integer:/^-?\d+$/,"float":/^-?\d+(\.\d+)?$/,zipCode:/^[0-9]{6}$/,phone:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,email:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},i.DEFAULTS={validMode:"blur",placement:"top"},i.fn=i.prototype,i.fn.create=function(){var t=this;this.$element.on("blur",function(e){"blur"==t.validMode&&t.doValid()}).on("focus",function(e){t.hideMsg()}).on("change",function(e){t.hideMsg()}).on("keydown",function(i){if("float"==t.validType){var n=t.$element.val();if(window.event.shiftKey)return event.returnValue=!1,!1;if(9==event.keyCode)return!0;if(!(event.keyCode>=48&&event.keyCode<=57||event.keyCode>=96&&event.keyCode<=105||e.inArray(event.keyCode,[8,110,190,189,109])>-1))return event.returnValue=!1,!1;if((!n||n.indexOf(".")>-1)&&(190==event.keyCode||110==event.keyCode))return event.returnValue=!1,!1}if("integer"==t.validType){var n=t.$element.val();if(window.event.shiftKey)return event.returnValue=!1,!1;if(9==event.keyCode)return!0;if(!(event.keyCode>=48&&event.keyCode<=57||event.keyCode>=96&&event.keyCode<=105||e.inArray(event.keyCode,[8])>-1))return event.returnValue=!1,!1}})},i.fn.updateOptions=function(e){},i.fn.doValid=function(e){if(this.needClean=!1,this.$element.attr("readonly"))return!0;var t=null;if(t="undefined"!=typeof e?e:this.getValue(),this.isEmpty(t)&&this.required)return this.showMsg(this.nullMsg),!1;if(this.isEmpty(t)&&!this.required)return!0;if(this.regExp){var i=new RegExp(this.regExp);"number"==typeof t&&(t+="");var n=t.match(i);if(null===n||n===!1)return this.showMsg(this.errorMsg),this.needClean=!0,!1}return this.minLength&&t.lengthb()<this.minLength?(this.showMsg("è¾å¥é¿åº¦ä¸è½å°äº"+this.minLength+"ä½"),!1):this.maxLength&&t.lengthb()>this.maxLength?(this.showMsg("è¾å¥é¿åº¦ä¸è½å¤§äº"+this.maxLength+"ä½"),!1):this.max&&parseFloat(t)>this.max?(this.showMsg("è¾å¥å¼ä¸è½å¤§äº"+this.max),!1):this.min&&parseFloat(t)<this.min?(this.showMsg("è¾å¥å¼ä¸è½å°äº"+this.min),!1):!0},i.fn.some=Array.prototype.some?Array.prototype.some:function(){for(var e,t=0;t<this.length&&("function"!=typeof arguments[0]||!(e=arguments[0](this[t])));t++);return e},i.fn.getValue=function(){var t="",i=this.some.call(this.$element.children('[type="checkbox"],[type="radio"]'),function(e){return"checkbox"==e.type||"radio"==e.type});if(this.$element.children().length>0&&i){var n=this.$element.find('[type="checkbox"],[type="radio"]'),o=n[0];"checkbox"==o.type?this.$element.find(":checkbox[name='"+e(o).attr("name")+"']:checked").each(function(){t+=e(this).val()+","}):"radio"==o.type&&(t=this.$element.find(":radio[name='"+e(o).attr("name")+"']:checked").val())}else this.$element.is(":radio")?t=this.$element.parent().find(":radio[name='"+this.$element.attr("name")+"']:checked").val():this.$element.is(":checkbox")?(t="",this.$element.parent().find(":checkbox[name='"+this.$element.attr("name")+"']:checked").each(function(){t+=e(this).val()+","})):t=this.$element.find("input").length>0?this.$element.find("input").val():this.$element.val();return t=e.trim(t),this.isEmpty(t)?"":t},i.fn.isEmpty=function(t){return""===t||void 0===t||null===t||t===e.trim(this.$element.attr("tip"))},i.fn.showMsg=function(t){var n=this;if(this.tipId)e("#"+this.tipId).html(t).show();else{var o={title:t,trigger:"manual",selector:"validtip",placement:this.placement};i.tipTemplate&&(o.template=i.tipTemplate),this.$element.tooltip(o),this.$element.tooltip("show"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){n.hideMsg()},3e3)}},i.fn.hideMsg=function(){this.tipId?e("#"+this.tipId).hide():this.$element.tooltip("destroy")},t.fn=t.prototype,t.fn.createValidate=function(e,t,n){var o=e.data("u.validate"),t="object"==typeof t&&t;o||e.data("u.validate",o=new i(e,t,n)),this.validates.push(o)},t.fn.check=function(e){for(var t=!0,i=0;i<this.validates.length;i++)t=this.validates[i].doValid(e)&&t;return t},t.fn._needClean=function(){return this.validates[0].needClean};var n=e.fn.validate;e.fn.validate=function(e){var i=new t(this,e);return i},e.fn.validate.noConflict=function(){return e.fn.validate=n,this}}(jQuery),function(e){var t=function(i,n){var o=this;this.$element=i,this.options=e.extend({},t.DEFAULTS,n),this.items=[],this.mutilPks=[],this.oDiv=null,Object.defineProperty(i[0],"value",{get:function(){return this.trueValue},set:function(t){var n=o.items,s=e(o.oDiv).find("li");if("true"==o.options.single||1==o.options.single)for(var r=0,a=n.length;a>r;r++){var d=n[r].pk;if(d==t){this.innerHTML=n[r].name,this.trueValue=t;break}this.trueValue="",this.innerHTML=""}else if("true"==o.options.mutil||1==o.options.mutil){if(!e.isArray(t)){if("string"!=typeof t||""===t)return;t=t.split(","),o.mutilPks=t}0==o.mutilPks.length&&(o.mutilPks=t),e(this).html("");for(var l=[],c=0;c<t.length;c++)for(var r=0,a=s.length;a>r;r++){var d=s[r].item.pk;if(t[c]==d){l.push(t[c]),s[r].style.display="none";var u=e("<i class='fa fa-close'></i>");u.on("mousedown",function(){for(var t=e(this),n=e(o.oDiv).find("li"),s=0,r=n.length;r>s;s++)if(n[s].item.name==t.siblings(".itemName").html()){n[s].style.display="block";for(var a=0;a<o.mutilPks.length;a++)o.mutilPks[a]==n[s].item.pk&&(o.mutilPks.splice(a,1),a--);for(var d=0;d<l.length;d++)l[d]==n[s].item.pk&&(l.splice(d,1),d--)}t.parent().remove(),i[0].trueValue="",i[0].trueValue=l.toString(),e(i).trigger("mutilSelect",l.toString())});var h=e("<i class='itemName'>"+n[r].name+"</i>"),p=e("<div class='mutil-select-div'></div>");p.append(u),p.append(h),e(this).append(p)}}this.trueValue=l.toString()}}}),"readonly"!==this.options.readonly&&(("true"==this.options.single||1==this.options.single)&&this.singleSelect(),("true"==this.options.mutil||1==this.options.mutil)&&this.mutilSelect(),this.clickEvent(),this.blurEvent(),this.comboFilter(),this.comboFilterClean())};t.DEFAULTS={dataSource:{},mutil:!1,enable:!0,single:!0,onSelect:function(){}},t.fn=t.prototype,t.fn.createDom=function(){var t=this.options.dataSource;if(e.isEmptyObject(t))throw new Error("dataSourceä¸ºç©ºï¼");var i=document.createElement("div");i.className="select-list-div",this.oDiv=i;var n=document.createElement("div");n.className="select-search";var o=document.createElement("input");n.appendChild(o),i.appendChild(n),this.options.readchange&&(n.style.display="none");var s=document.createElement("ul");s.className="select-list-ul";for(var r=0;r<t.length;r++){var a={pk:t[r].pk,name:t[r].name};this.items.push(a);var d=document.createElement("li");d.item=a,d.innerHTML=t[r].name,s.appendChild(d)}i.appendChild(s),i.style.display="none",document.body.appendChild(i)},t.fn.focusEvent=function(){var e=this;this.$element.on("click",function(t){if(e.$element.data("enable")||1!=e.options.readchange){var i=e.show();1!==i&&(e.floatLayer(),e.floatLayerEvent(),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}})},t.fn.clickEvent=function(){var t=this,i=this.$element.next(".input-group-addon")[0]||this.$element.next(":button")[0];e(i).on("click",function(e){t.show(),t.floatLayer(),t.floatLayerEvent(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})},t.fn.blurEvent=function(){var e=this;this.$element.on("keyup",function(t){var i=t.which||t.keyCode;9==i&&e.show()}).on("keydown",function(t){var i=t.which||t.keyCode;9==i&&e.hide()})},t.fn.floatLayer=function(){if(0==e(".select-floatDiv").length){var t=document.createElement("div");t.className="select-floatDiv",document.body.appendChild(t)}},t.fn.floatLayerEvent=function(){var t=this;e(".select-floatDiv").click(function(i){t.hide(),e(this).remove(),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0})},t.fn.show=function(){for(var t=e(this.oDiv).find("li"),i=0,n=0,o=t.length;o>n;n++)"none"==t[n].style.display&&i++;if(i===o)return 1;var s=this.$element.offset().left,r=this.$element.offset().top,a=30*this.options.dataSource.length+10+10,d=r+this.$element.outerHeight()+a-(e(window).height()+e(window).scrollTop()),l=this.oDiv;d>0?(l.style.left=s+"px",l.style.top=r-a+"px"):(l.style.left=s+"px",l.style.top=r+this.$element.outerHeight()+"px"),l.style.display="block"},t.fn.hide=function(){this.oDiv.style.display="none"},t.fn.singleDivValue=function(){for(var t=this,i=e(this.oDiv).find("li"),n=0;n<i.length;n++)e(i[n]).click(function(){var e=this.item;t.$element.val(e.pk),t.oDiv.style.display="none",t.options.onSelect(e),t.$element.trigger("change")})},t.fn.mutilDivValue=function(){for(var t=this,i=e(this.oDiv).find("li"),n=0;n<i.length;n++)e(i[n]).click(function(){var e=this.item.pk,i=t.mutilPks,n=i.length;if(n>0)for(var o=0;n>o;o++)e==i[o]&&(i.splice(o,1),o--);i.push(e),t.$element.val(i),t.$element.trigger("mutilSelect",i.toString()),t.oDiv.style.display="none",this.style.display="none",t.$element.trigger("change")})},t.fn.singleSelect=function(){this.createDom(),this.focusEvent(),this.singleDivValue()},t.fn.mutilSelect=function(){this.createDom(),this.mutilDivValue(),this.focusEvent()},t.fn.comboFilter=function(){e(this.oDiv).on("keyup",function(){for(var t=e(this).find(".select-search input").val(),i=e(this).find("li"),n=0;n<i.length;n++)-1!=i[n].item.name.indexOf(t)?i[n].style.display="block":i[n].style.display="none"})},t.fn.comboFilterClean=function(){var t=this;e(this.$element).on("click",function(){e(t.oDiv).find(".select-search input").val("");var i=e(t.oDiv).find("li");if("true"==t.options.single||1==t.options.single)for(var n=0;n<i.length;n++)i[n].style.display="block";else if("true"==t.options.mutil||1==t.options.mutil){for(var o=[],s=e(this).find(".mutil-select-div .itemName"),n=0;n<s.length;n++)for(var r=0;r<i.length;r++)e(s[n]).html()==i[r].item.name&&o.push(r);for(var a=0;a<i.length;a++){i[a].style.display="block";for(var d=0;d<o.length;d++)a==o[d]&&(i[a].style.display="none")}}})};var i=function(i){var n=e(this),o=n.data("s.select"),s="object"==typeof i&&i;o||n.data("s.select",new t(this,s))};e.fn.setComboData=function(t){var i=e(this).data("s.select");if(i){var n=t;if(e.isArray(n)&&0!=n.length){i.items.length=0;var o=e(i.oDiv).find("li");if(n.length<o.length)for(var s=n.length;s<o.length;s++)e(o[s]).remove();else if(n.length>o.length)for(var r=o[0],a=e(i.oDiv).find("ul"),d=0;d<n.length-o.length;d++)e(r).clone(!0).appendTo(a);o=e(i.oDiv).find("li");for(var l=0;l<n.length;l++){var c={pk:n[l].pk,name:n[l].name};i.items.push(c),o[l].item=c,o[l].innerHTML=n[l].name}}}},e.fn.Combobox=i}(jQuery),+function(e,t){"use strict";if("function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){var i=t,n=0,o=this.length;if("undefined"==typeof t&&(i=this[0],n=1),"function"==typeof e)for(n;o>n;n++)this.hasOwnProperty(n)&&(i=e(i,this[n],n,this));return i}),e.app)return void(e.fn.datetimepicker=function(t){var i,n,o,s,r,t=t?t:{};i=e(this).find("input").val(),i?i=e.getPickerArray(i):(n=new Date,i=[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()<10?"0"+n.getHours():n.getHours(),n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()]),r=t.picker_type?t.picker_type:"datetime","datetime"==r?(o=function(e,t,i){return t[0]+"-"+t[1]+"-"+t[2]+" "+t[3]+":"+t[4]},s=[{values:function(){for(var e=[],t=1950;2030>=t;t++)e.push(t);return e}(),textAlign:"left",width:100},{divider:!0,content:"-"},{values:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),textAlign:"left"},{divider:!0,content:"-"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],textAlign:"left"},{divider:!0,content:"  "},{values:function(){for(var e=[],t=0;23>=t;t++)e.push(10>t?"0"+t:t);return e}()},{divider:!0,content:":"},{values:function(){for(var e=[],t=0;59>=t;t++)e.push(10>t?"0"+t:t);return e}()}]):(o=function(e,t,i){return t[0]+"-"+t[1]+"-"+t[2]},s=[{values:function(){for(var e=[],t=1950;2030>=t;t++)e.push(t);return e}(),textAlign:"left",width:100},{divider:!0,content:"-"},{values:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),textAlign:"left"},{divider:!0,content:"-"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],textAlign:"left"}]),e(this).addClass("moblie_input").find("input").attr("readonly","readonly"),e("#picker-date-container").html(""),e.app.picker_mobile({input:this,convertToPopover:!1,cssClass:t.cssClass,toolbar:!0,refer:t.refer,rotateEffect:!0,value:i,formatValue:o,cols:s,pickerType:r})});if(!t)throw new Error("datetimepicker requires Moment.js to be loaded first");var i="input,div[contenteditable=true]",n=function(n,o){var s,r,a,d,l,c={},u=t().startOf("d"),h=u.clone(),p=!0,f=!1,m=!1,g=0,v=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],w=["days","months","years"],b=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==a.indexOf("Y");case"M":return-1!==a.indexOf("M");case"d":return-1!==a.toLowerCase().indexOf("d");case"h":case"H":return-1!==a.toLowerCase().indexOf("h");case"m":return-1!==a.indexOf("m");case"s":return-1!==a.indexOf("s");default:return!1}},y=function(){return b("h")||b("m")||b("s")},_=function(){return b("y")||b("M")||b("d")},C=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(o.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan","5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(o.icons.next)))),i=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan","7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone()))]},k=function(){var t=e("<tr>"),i=e("<tr>"),n=e("<tr>");return b("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(o.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(o.icons.down))))),b("m")&&(b("h")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),n.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(o.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(o.icons.down))))),b("s")&&(b("m")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),n.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(o.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(o.icons.down))))),r||(t.append(e("<td>").addClass("separator")),i.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),n.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,i,n]))},x=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),o=[k()];return b("h")&&o.push(t),b("m")&&o.push(i),b("s")&&o.push(n),o},T=function(){var t=[];return o.showTodayButton&&t.push(e("<td>").append(e("<a>").attr("data-action","today").append(e("<span>").addClass(o.icons.today)))),!o.sideBySide&&_()&&y()&&t.push(e("<td>").append(e("<a>").attr("data-action","togglePicker").append(e("<span>").addClass(o.icons.time)))),o.showClear&&t.push(e("<td>").append(e("<a>").attr("data-action","clear").append(e("<span>").addClass(o.icons.clear)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},M=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=e("<div>").addClass("datepicker").append(C()),n=e("<div>").addClass("timepicker").append(x()),s=e("<ul>").addClass("list-unstyled"),a=e("<li>").addClass("picker-switch accordion-toggle").append(T());return r&&t.addClass("usetwentyfour"),o.sideBySide&&_()&&y()?(t.addClass("timepicker-sbs"),t.append(e("<div>").addClass("row").append(i.addClass("col-sm-6")).append(n.addClass("col-sm-6"))),t.append(a),t):(_()&&s.append(e("<li>").addClass(y()?"collapse in":"").append(i)),s.append(a),y()&&s.append(e("<li>").addClass(_()?"collapse":"").append(n)),t.append(s))},S=function(){var t,s={};return t=n.is(i)?n.data():n.find(i).data(),t.dateOptions&&t.dateOptions instanceof Object&&(s=e.extend(!0,s,t.dateOptions)),e.each(o,function(e){var i="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[i]&&(s[e]=t[i])}),s},N=function(){var t,s=(f||n).position(),r=(f||n).offset(),a="auto",d="auto";if(o.widgetParent?t=o.widgetParent.append(m):n.is(i)?t=n.parent().append(m):(t=n,n.children().first().after(m)),a=r.top+1.5*m.height()>=e(window).height()+e(window).scrollTop()&&m.height()+n.outerHeight()<r.top?"top":"bottom",d=t.width()<r.left+m.outerWidth()/2&&r.left+m.outerWidth()>e(window).width()?"right":"left","top"===a?m.addClass("top").removeClass("bottom"):m.addClass("bottom").removeClass("top"),"right"===d?m.addClass("pull-right"):m.removeClass("pull-right"),"relative"!==t.css("position")&&"BODY"!==t[0].nodeName&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first(),0===t.length&&(t=e("body"))),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");
m.css({top:"top"===a?"auto":s.top+n.outerHeight(),bottom:"top"===a?s.top+n.outerHeight():"auto",left:"left"===d?t.css("padding-left"):"auto",right:"left"===d?"auto":t.width()-n.outerWidth()}),o.widgetParent&&("top"===a?m.css({top:n.offset().top-m.outerHeight(),left:n.offset().left,bottom:"auto",right:"auto"}):m.css({top:n.offset().top+n.outerHeight(),left:n.offset().left,bottom:"auto",right:"auto"}))},$=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},D=function(e){m&&(e&&(l=Math.max(g,Math.min(2,l+e))),m.find(".datepicker > div").hide().filter(".datepicker-"+v[l].clsName).show())},I=function(){for(var t=e("<tr>"),i=h.clone().startOf("w").subtract(1,"d");i.isBefore(h.clone().endOf("w").subtract(1,"d"));)t.append(e("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");m.find(".datepicker-days thead").append(t)},E=function(e,t){return e.isValid()?o.minDate&&e.isBefore(o.minDate,t)?!1:o.maxDate&&e.isAfter(o.maxDate,t)?!1:!0:!1},R=function(){for(var t=[],i=h.clone().startOf("y").hour(12);i.isSame(h,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");m.find(".datepicker-months td").empty().append(t)},A=function(){var t=m.find(".datepicker-months"),i=t.find("th"),n=t.find("tbody").find("span");t.find(".disabled").removeClass("disabled"),E(h.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(h.year()),E(h.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),n.removeClass("active"),u.isSame(h,"y")&&n.eq(u.month()).addClass("active"),n.each(function(t){E(h.clone().month(t),"M")||e(this).addClass("disabled")})},O=function(){var e=m.find(".datepicker-years"),t=e.find("th"),i=h.clone().subtract(5,"y"),n=h.clone().add(6,"y"),s="";for(e.find(".disabled").removeClass("disabled"),o.minDate&&o.minDate.isAfter(i,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(i.year()+"-"+n.year()),o.maxDate&&o.maxDate.isBefore(n,"y")&&t.eq(2).addClass("disabled");!i.isAfter(n,"y");)s+='<span data-action="selectYear" class="year'+(i.isSame(u,"y")?" active":"")+(E(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");e.find("td").html(s)},L=function(){var i,n,o,s,r=m.find(".datepicker-days"),a=r.find("th"),d=[];if(_()){for(r.find(".disabled").removeClass("disabled"),a.eq(1).text(h.format("YYYY MMMM")),E(h.clone().subtract(1,"M"),"M")||a.eq(0).addClass("disabled"),E(h.clone().add(1,"M"),"M")||a.eq(2).addClass("disabled"),i=h.clone().startOf("M").startOf("week").subtract(1,"day"),6==h.clone().startOf("M").weekday()&&(i=h.clone().startOf("M")),n=h.clone().endOf("M").endOf("w").subtract(1,"day"),6==h.clone().endOf("M").weekday()&&(n=n.add(1,"w"));!n.isBefore(i,"d");)6===i.weekday()&&(o=e("<tr>"),d.push(o)),s="",i.isBefore(h,"M")&&(s+=" old"),i.isAfter(h,"M")&&(s+=" new"),i.isSame(u,"d")&&!p&&(s+=" active"),E(i,"d")||(s+=" disabled"),i.isSame(t(),"d")&&(s+=" today"),(0===i.day()||6===i.day())&&(s+=" weekend"),o.append('<td data-action="selectDay" class="day'+s+'">'+i.date()+"</td>"),i.add(1,"d");r.find("tbody").empty().append(d),A(),O()}},F=function(){var t=m.find(".timepicker-hours table"),i=h.clone().startOf("d"),n=[],o=e("<tr>");for(h.hour()>11&&!r&&i.hour(12);i.isSame(h,"d")&&(r||h.hour()<12&&i.hour()<12||h.hour()>11);)i.hour()%4===0&&(o=e("<tr>"),n.push(o)),o.append('<td data-action="selectHour" class="hour'+(E(i,"h")?"":" disabled")+'">'+i.format(r?"HH":"hh")+"</td>"),i.add(1,"h");t.empty().append(n)},P=function(){for(var t=m.find(".timepicker-minutes table"),i=h.clone().startOf("h"),n=[],o=e("<tr>"),s=5;h.isSame(i,"h");)i.minute()%(4*s)===0&&(o=e("<tr>"),n.push(o)),o.append('<td data-action="selectMinute" class="minute'+(E(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(s,"m");t.empty().append(n)},j=function(){for(var t=m.find(".timepicker-seconds table"),i=h.clone().startOf("m"),n=[],o=e("<tr>");h.isSame(i,"m");)i.second()%20===0&&(o=e("<tr>"),n.push(o)),o.append('<td data-action="selectSecond" class="second'+(E(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");t.empty().append(n)},Y=function(){var e=m.find(".timepicker span[data-time-component]");r||m.find(".timepicker [data-action=togglePeriod]").text(u.format("A")),e.filter("[data-time-component=hours]").text(u.format(r?"HH":"hh")),e.filter("[data-time-component=minutes]").text(u.format("mm")),e.filter("[data-time-component=seconds]").text(u.format("ss")),F(),P(),j()},H=function(){m&&(L(),Y())},W=function(e){var t=p?null:u;return e?(e=e.clone().locale(o.locale),void(E(e)?(u=e,h=u.clone(),te(s,u.format(a)),n.data("date",u.format(a)),H(),p=!1,$({type:"dp.change",date:u.clone(),oldDate:t})):(te(s,p?"":u.format(a)),$({type:"dp.error",date:e})))):(p=!0,te(s,""),n.data("date",""),$({type:"dp.change",date:null,oldDate:t}),void H())},B=function(){var t=!1;return m?(m.find(".collapse").each(function(){var i=e(this).data("collapse");return i&&i.transitioning?(t=!0,!1):!0}),t?c:(f&&f.hasClass("btn")&&f.toggleClass("active"),m.hide(),e(window).off("resize",N),m.off("mousedown","[data-action]"),m.off("mouseenter"),m.off("mouseleave"),m.remove(),m=!1,$({type:"dp.hide",date:u.clone()}),c)):c},V=function(){W(null)},U={next:function(){h.add(v[l].navStep,v[l].navFnc),L()},previous:function(){h.subtract(v[l].navStep,v[l].navFnc),L()},pickerSwitch:function(){D(1)},selectMonth:function(t){var i=e(t.target).closest("tbody").find("span").index(e(t.target));h.month(i),l===g?(W(u.clone().year(h.year()).month(h.month())),B()):(D(-1),L())},selectYear:function(t){var i=parseInt(e(t.target).text(),10)||0;h.year(i),l===g?(W(u.clone().year(h.year())),B()):(D(-1),L())},selectDay:function(t){var i=h.clone();e(t.target).is(".old")&&i.subtract(1,"M"),e(t.target).is(".new")&&i.add(1,"M"),W(i.date(parseInt(e(t.target).text(),10))),e(n).find("input").blur(),B()},incrementHours:function(){W(u.clone().add(1,"h"))},incrementMinutes:function(){W(u.clone().add(1,"m"))},incrementSeconds:function(){W(u.clone().add(1,"s"))},decrementHours:function(){W(u.clone().subtract(1,"h"))},decrementMinutes:function(){W(u.clone().subtract(1,"m"))},decrementSeconds:function(){W(u.clone().subtract(1,"s"))},togglePeriod:function(){W(u.clone().add(u.hours()>=12?-12:12,"h"))},togglePicker:function(t){var i,n=e(t.target),s=n.closest("ul"),r=s.find(".in"),a=s.find(".collapse:not(.in)");if(r&&r.length){if(i=r.data("collapse"),i&&i.transitioning)return;r.collapse?(r.collapse("hide"),a.collapse("show")):(r.removeClass("in"),a.addClass("in")),n.is("span")?n.toggleClass(o.icons.time+" "+o.icons.date):n.find("span").toggleClass(o.icons.time+" "+o.icons.date)}},showPicker:function(){m.find(".timepicker > div:not(.timepicker-picker)").hide(),m.find(".timepicker .timepicker-picker").show()},showHours:function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-hours").show()},showMinutes:function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(e(t.target).text(),10);r||(u.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),W(u.clone().hours(i)),U.showPicker.call(c)},selectMinute:function(t){W(u.clone().minutes(parseInt(e(t.target).text(),10))),U.showPicker.call(c)},selectSecond:function(t){W(u.clone().seconds(parseInt(e(t.target).text(),10))),U.showPicker.call(c)},clear:V,today:function(){W(t())},close:B},z=function(t){return e(t.currentTarget).is(".disabled")?!1:(U[e(t.currentTarget).data("action")].apply(c,arguments),!1)},q=function(){return s.prop("disabled")||!o.ignoreReadonly&&s.prop("readonly")||0==s.prop("contenteditable")||m||s.closest("fieldset").prop("disabled")?c:(p&&s.is(i)&&0===ee(s).trim().length,m=M(),I(),R(),m.find(".timepicker-hours").hide(),m.find(".timepicker-minutes").hide(),m.find(".timepicker-seconds").hide(),H(),D(),e(window).on("resize",N),m.on("mousedown","[data-action]",z),m.on("mouseenter",function(){s.off("blur.picker")}),m.on("mouseleave",function(){s.on("blur.picker",B)}),f&&f.hasClass("btn")&&f.toggleClass("active"),m.show(),N(),s.is(":focus")||s.focus(),$({type:"dp.show"}),c)},G=function(){return m?B():q()},X=function(e){return e=t.isMoment(e)||e instanceof Date?t(e):t(e,d),e.locale(o.locale),e},K=function(t){var i=ee(e(t.target)).trim(),n=i?X(i):null;return W(n),t.stopImmediatePropagation(),!1},Z=function(){s.on({change:K,"blur.picker":B}),s.on({focus:q}),f&&(f.on("click",G),f.on("mousedown",!1))},J=function(){s.off({change:K,blur:B}),s.off({focus:q}),f&&(f.off("click",G),f.off("mousedown",!1))},Q=function(){var e=o.format||"L LT";a=o.format||"YYYY-M-D  HH:mm",d=o.extraFormats?o.extraFormats.slice():[],d.indexOf(e)<0&&d.indexOf(a)<0&&d.push(a),r=a.toLowerCase().indexOf("a")<1&&a.indexOf("h")<1,b("y")&&(g=2),b("M")&&(g=1),b("d")&&(g=0),l=Math.max(g,l),p||W(u)},ee=function(e){var t;if(e.is("input"))t=e.val();else{if(!e.is("div[contenteditable=true]"))throw new Error("Must be a input or contenteditable div");t=e.html()}return t},te=function(e,t){if(e.is("input"))e.val(t);else{if(!e.is("div[contenteditable=true]"))throw new Error("Must be a input or contenteditable div");e[0].value=t}};if(c.destroy=function(){B(),J(),n.removeData("DateTimePicker"),n.removeData("date")},c.toggle=G,c.show=q,c.hide=B,c.ignoreReadonly=function(e){if(0===arguments.length)return o.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return o.ignoreReadonly=e,c},c.options=function(t){if(0===arguments.length)return e.extend(!0,{},o);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,o,t),e.each(o,function(e,t){void 0!==c[e]&&c[e](t)}),c},c.date=function(e){if(0===arguments.length)return p?null:u.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return W(null===e?null:X(e)),c},c.format=function(e){if(0===arguments.length)return o.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return o.format=e,a&&Q(),c},c.extraFormats=function(e){if(0===arguments.length)return o.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return o.extraFormats=e,d&&Q(),c},c.maxDate=function(e){if(0===arguments.length)return o.maxDate?o.maxDate.clone():o.maxDate;if("boolean"==typeof e&&e===!1)return o.maxDate=!1,H(),c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var i=X(e);if(!i.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(o.minDate&&i.isBefore(o.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+i.format(a));return o.maxDate=i,o.maxDate.isBefore(e)&&W(o.maxDate),h.isAfter(i)&&(h=i.clone()),H(),c},c.minDate=function(e){if(0===arguments.length)return o.minDate?o.minDate.clone():o.minDate;if("boolean"==typeof e&&e===!1)return o.minDate=!1,H(),c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var i=X(e);if(!i.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(o.maxDate&&i.isAfter(o.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+i.format(a));return o.minDate=i,o.minDate.isAfter(e)&&W(o.minDate),h.isBefore(i)&&(h=i.clone()),H(),c},c.defaultDate=function(e){if(0===arguments.length)return o.defaultDate?o.defaultDate.clone():o.defaultDate;if(!e)return o.defaultDate=!1,c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var i=X(e);if(!i.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!E(i))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return o.defaultDate=i,o.defaultDate&&""===ee(s).trim()&&void 0===s.attr("placeholder")&&W(o.defaultDate),c},c.locale=function(e){if(0===arguments.length)return o.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return o.locale=e,u.locale(o.locale),h.locale(o.locale),a&&Q(),m&&(B(),q()),c},c.sideBySide=function(e){if(0===arguments.length)return o.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return o.sideBySide=e,m&&(B(),q()),c},c.viewMode=function(e){if(0===arguments.length)return o.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===w.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+w.join(", ")+") value");return o.viewMode=e,l=Math.max(w.indexOf(e),g),D(),c},c.showTodayButton=function(e){if(0===arguments.length)return o.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return o.showTodayButton=e,m&&(B(),q()),c},c.showClear=function(e){if(0===arguments.length)return o.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return o.showClear=e,m&&(B(),q()),c},c.clear=function(){return V(),c},s=n.is(i)?n:n.find(i),n.hasClass("input-group")&&(f=0===n.find(".datepickerbutton").size()?n.find('[class^="input-group-"]'):n.find(".datepickerbutton")),!s.is(i))throw new Error("Could not initialize DateTimePicker without an input element");return e.extend(!0,o,S()),c.options(o),Q(),Z(),s.is(i)&&0!==ee(s).trim().length?W(X(ee(s).trim())):o.defaultDate&&void 0===s.attr("placeholder")&&W(o.defaultDate),c};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this);i.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),i.data("DateTimePicker",n(i,t)))})},e.fn.datetimepicker.defaults={format:!1,extraFormats:!1,minDate:!1,maxDate:!1,locale:t.locale("zh-cn"),defaultDate:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash"},sideBySide:!1,viewMode:"days",showTodayButton:!0,showClear:!0,ignoreReadonly:!1},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);if(!i.data("DateTimePicker")){t.preventDefault();var n=JSON.parse(i.attr("data-options")||null);i.datetimepicker(n||{}),i.data("DateTimePicker").show(),i.on("dp.change",function(){e(this).find("input").trigger("change")})}})}($,moment),!function(e){var t=function(){this.addData=function(t,i,n){var o,i=i,s=e(i),r=s.next(".multilang_body");o="object"==typeof t?t:t.split(","),r.val(o),e.each(o,function(e,t){r.find(".m_context").eq(e).text(t)}),this.ko_vm&&ko.applyBindings(this.ko_vm,r[0])},this.ko_vm,this.add_ko_vm=function(e){this.ko_vm=e},this.multinfo=function(t){var n=i.target,o=e(n),s=i,r="",a=!0,d="name";t.lang_name&&(d=t.lang_name),e.isArray(t)?(o.addClass("multilang_array").after("<div class='multilang_body'><input class='lang_value' contenteditable='true'><span class='fa fa-sort-desc lang_icon'><span class='m_icon'></span></span>").css("display","none"),e.each(t,function(e,t){r+=e?"<label attr='"+d+(e+1)+"'><span class='m_context'></span><span class='m_icon'>"+t+"</span></label>":"<label attr='"+d+"'><span class='m_context'></span><span class='m_icon'>"+t+"</span></label>"}),o.next(".multilang_body").append("<div class='multilang_menu '>"+r+"</div>"),o.next(".multilang_body").off("click mouseenter mouseleave").on({click:function(){var t=e(this),i=t.parents(".multilang_body");t.siblings("input").focus(),"block"==i.find(".multilang_menu").css("display")?i.find(".multilang_menu").css("display","none"):i.find(".multilang_menu").css("display","block")},mouseenter:function(){a=!1},mouseleave:function(){a=!0}},".lang_icon").off("blur").on("blur",".lang_value",function(){var t=e(this),i=s.fixtarget(t),n=t.parents(".multilang_body"),o=t.attr("class").split(" ")[2],r=t.val();t.hasClass("ready_change")&&s.changeData(i,o,r),a&&n.find(".multilang_menu").css("display","none")}),o.next(".multilang_body").find(".multilang_menu").off("click").on("click","label",function(){var t=e(this),i=t.parents(".multilang_body"),n=t.attr("attr");tmptext=t.children(".m_context").text(),tmpicon=t.children(".m_icon").clone(),i.find(".lang_value").attr("class","").addClass("ready_change lang_value "+n).val(tmptext).focus(),i.find(".lang_icon").removeClass("fa-sort-desc").html(tmpicon)}).off("mouseenter mouseleave").on({mouseenter:function(){a=!1},mouseleave:function(){a=!0}})):console.error("Not object")},this.multidata=function(e,t){var n=i.target;i.addData(e,n,t)},this.changeData=function(t,i,n){var o=t.value;jq_t=e(t),jq_t.find("label[attr='"+i+"']").find(".m_context").text(n).prop("value",n).trigger("change"),e.each(jq_t.find(".m_context"),function(t,i){o[t]=e(i).text()}),jq_t.siblings("input").trigger("change.u.multilang",{newValue:n,field:i})},this.getData=function(){var t=e(i.target).next(".multilang_body")[0],n=t.value;return n},this.fixtarget=function(e){return i.target=e.parents(".multilang_body")[0],i.target},this.target="",this.doSth=function(t){return i.target=this[0],"object"!=typeof t?i[t]():(e.each(t,function(e,t){i[e](t)}),void(i.target=""))}},i=new t;e.fn.extend({multilang:i.doSth})}(jQuery),+function(e){e.showLoading=function(t){e(document.body).append('<div class="alert alert-waiting"><i class="fa fa-spinner fa-spin"></i></div>').append('<div class="alert-backdrop" role="waiting-backdrop"></div>')},e.hideLoadding=function(){var t;(t=e(".alert.alert-waiting")).length&&t.remove(),(t=e('.alert-backdrop[role="waiting-backdrop"]')).length&&t.remove()},e.showWaiting=e.showLoading,e.removeWaiting=e.hideLoadding}($),function(e){var t=function(t,i){var t=e(t),n=this,o='li:has([data-toggle="tab"])',s=[],r=e.extend({},e.fn.bootstrapWizard.defaults,i),a=null,d=null;this.rebindClick=function(e,t){e.unbind("click",t).bind("click",t)},this.fixNavigationButtons=function(){return a.length||(d.find("a:first").tab("show"),a=d.find(o+":first")),e(r.previousSelector,t).toggleClass("disabled",n.firstIndex()>=n.currentIndex()),e(r.nextSelector,t).toggleClass("disabled",n.currentIndex()>=n.navigationLength()),e(r.nextSelector,t).toggleClass("hidden",n.currentIndex()>=n.navigationLength()&&e(r.finishSelector,t).length>0),e(r.lastSelector,t).toggleClass("hidden",n.currentIndex()>=n.navigationLength()&&e(r.finishSelector,t).length>0),e(r.finishSelector,t).toggleClass("hidden",n.currentIndex()<n.navigationLength()),e(r.backSelector,t).toggleClass("disabled",0==s.length),e(r.backSelector,t).toggleClass("hidden",n.currentIndex()>=n.navigationLength()&&e(r.finishSelector,t).length>0),n.rebindClick(e(r.nextSelector,t),n.next),n.rebindClick(e(r.previousSelector,t),n.previous),n.rebindClick(e(r.lastSelector,t),n.last),n.rebindClick(e(r.firstSelector,t),n.first),n.rebindClick(e(r.finishSelector,t),n.finish),n.rebindClick(e(r.backSelector,t),n.back),r.onTabShow&&"function"==typeof r.onTabShow&&r.onTabShow(a,d,n.currentIndex())===!1?!1:void 0},this.next=function(e){if(t.hasClass("last"))return!1;if(r.onNext&&"function"==typeof r.onNext&&r.onNext(a,d,n.nextIndex())===!1)return!1;var i=n.currentIndex();$index=n.nextIndex(),$index>n.navigationLength()||(s.push(i),d.find(o+":eq("+$index+") a").tab("show"))},this.previous=function(e){if(t.hasClass("first"))return!1;if(r.onPrevious&&"function"==typeof r.onPrevious&&r.onPrevious(a,d,n.previousIndex())===!1)return!1;var i=n.currentIndex();$index=n.previousIndex(),$index<0||(s.push(i),d.find(o+":eq("+$index+") a").tab("show"))},this.first=function(e){return r.onFirst&&"function"==typeof r.onFirst&&r.onFirst(a,d,n.firstIndex())===!1?!1:t.hasClass("disabled")?!1:(s.push(n.currentIndex()),void d.find(o+":eq(0) a").tab("show"))},this.last=function(e){return r.onLast&&"function"==typeof r.onLast&&r.onLast(a,d,n.lastIndex())===!1?!1:t.hasClass("disabled")?!1:(s.push(n.currentIndex()),void d.find(o+":eq("+n.navigationLength()+") a").tab("show"))},this.finish=function(e){r.onFinish&&"function"==typeof r.onFinish&&r.onFinish(a,d,n.lastIndex())},this.back=function(){if(0==s.length)return null;var e=s.pop();return r.onBack&&"function"==typeof r.onBack&&r.onBack(a,d,e)===!1?(s.push(e),!1):void t.find(o+":eq("+e+") a").tab("show")},this.currentIndex=function(){return d.find(o).index(a)},this.firstIndex=function(){return 0},this.lastIndex=function(){return n.navigationLength()},this.getIndex=function(e){return d.find(o).index(e)},this.nextIndex=function(){return d.find(o).index(a)+1},this.previousIndex=function(){return d.find(o).index(a)-1},this.navigationLength=function(){return d.find(o).length-1},this.activeTab=function(){return a},this.nextTab=function(){return d.find(o+":eq("+(n.currentIndex()+1)+")").length?d.find(o+":eq("+(n.currentIndex()+1)+")"):null},this.previousTab=function(){return n.currentIndex()<=0?null:d.find(o+":eq("+parseInt(n.currentIndex()-1)+")")},this.show=function(e){var i=isNaN(e)?t.find(o+" a[href=#"+e+"]"):t.find(o+":eq("+e+") a");i.length>0&&(s.push(n.currentIndex()),i.tab("show"))},this.disable=function(e){d.find(o+":eq("+e+")").addClass("disabled")},this.enable=function(e){d.find(o+":eq("+e+")").removeClass("disabled")},this.hide=function(e){d.find(o+":eq("+e+")").hide()},this.display=function(e){d.find(o+":eq("+e+")").show()},this.remove=function(t){var i=t[0],n="undefined"!=typeof t[1]?t[1]:!1,s=d.find(o+":eq("+i+")");if(n){var r=s.find("a").attr("href");e(r).remove()}s.remove()};var l=function(t){var i=d.find(o),s=i.index(e(t.currentTarget).parent(o)),l=e(i[s]);return r.onTabClick&&"function"==typeof r.onTabClick&&r.onTabClick(a,d,n.currentIndex(),s,l)===!1?!1:void 0},c=function(t){$element=e(t.target).parent();var i=d.find(o).index($element);return $element.hasClass("disabled")?!1:r.onTabChange&&"function"==typeof r.onTabChange&&r.onTabChange(a,d,n.currentIndex(),i)===!1?!1:(a=$element,void n.fixNavigationButtons())};this.resetWizard=function(){e('a[data-toggle="tab"]',d).off("click",l),e('a[data-toggle="tab"]',d).off("shown shown.bs.tab",c),d=t.find("ul:first",t),a=d.find(o+".active",t),e('a[data-toggle="tab"]',d).on("click",l),e('a[data-toggle="tab"]',d).on("shown shown.bs.tab",c),n.fixNavigationButtons()},d=t.find("ul:first",t),a=d.find(o+".active",t),d.hasClass(r.tabClass)||d.addClass(r.tabClass),r.onInit&&"function"==typeof r.onInit&&r.onInit(a,d,0),r.onShow&&"function"==typeof r.onShow&&r.onShow(a,d,n.nextIndex()),e('a[data-toggle="tab"]',d).on("click",l),e('a[data-toggle="tab"]',d).on("shown shown.bs.tab",c)};e.fn.bootstrapWizard=function(i){if("string"==typeof i){var n=Array.prototype.slice.call(arguments,1);return 1===n.length&&n.toString(),this.data("bootstrapWizard")[i](n)}return this.each(function(n){var o=e(this);if(!o.data("bootstrapWizard")){var s=new t(o,i);o.data("bootstrapWizard",s),s.fixNavigationButtons()}})},e.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",finishSelector:".wizard li.finish",backSelector:".wizard li.back",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onFinish:null,onBack:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),+function(e){"use strict";function t(e){var t=o,i=t.biDivideByRadixPower(e,this.k-1),n=t.biMultiply(i,this.mu),s=t.biDivideByRadixPower(n,this.k+1),r=t.biModuloByRadixPower(e,this.k+1),a=t.biMultiply(s,this.modulus),d=t.biModuloByRadixPower(a,this.k+1),l=t.biSubtract(r,d);l.isNeg&&(l=t.biAdd(l,this.bkplus1));for(var c=t.biCompare(l,this.modulus)>=0;c;)l=t.biSubtract(l,this.modulus),c=t.biCompare(l,this.modulus)>=0;return l}function i(e,t){var i=o.biMultiply(e,t);return this.modulo(i)}function n(e,t){var i=new m;i.digits[0]=1;for(var n=e,s=t;;){if(0!=(1&s.digits[0])&&(i=this.multiplyMod(i,n)),s=o.biShiftRight(s,1),0==s.digits[0]&&0==o.biHighIndex(s))break;n=this.multiplyMod(n,n)}return i}if("undefined"==typeof e.RSAUtils)var o=e.RSAUtils={};var s,r,a,d,l=16,c=l,u=65536,h=u>>>1,p=u*u,f=u-1,m=e.BigInt=function(e){"boolean"==typeof e&&1==e?this.digits=null:this.digits=r.slice(0),this.isNeg=!1};o.setMaxDigits=function(e){s=e,r=new Array(s);for(var t=0;t<r.length;t++)r[t]=0;a=new m,d=new m,d.digits[0]=1},o.setMaxDigits(20);var g=15;o.biFromNumber=function(e){var t=new m;t.isNeg=0>e,e=Math.abs(e);for(var i=0;e>0;)t.digits[i++]=e&f,e=Math.floor(e/u);return t};var v=o.biFromNumber(1e15);o.biFromDecimal=function(e){for(var t,i="-"==e.charAt(0),n=i?1:0;n<e.length&&"0"==e.charAt(n);)++n;if(n==e.length)t=new m;else{var s=e.length-n,r=s%g;for(0==r&&(r=g),t=o.biFromNumber(Number(e.substr(n,r))),n+=r;n<e.length;)t=o.biAdd(o.biMultiply(t,v),o.biFromNumber(Number(e.substr(n,g)))),n+=g;t.isNeg=i}return t},o.biCopy=function(e){var t=new m(!0);return t.digits=e.digits.slice(0),t.isNeg=e.isNeg,t},o.reverseStr=function(e){for(var t="",i=e.length-1;i>-1;--i)t+=e.charAt(i);return t};var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];o.biToString=function(e,t){var i=new m;i.digits[0]=t;for(var n=o.biDivideModulo(e,i),s=w[n[1].digits[0]];1==o.biCompare(n[0],a);)n=o.biDivideModulo(n[0],i),digit=n[1].digits[0],s+=w[n[1].digits[0]];return(e.isNeg?"-":"")+o.reverseStr(s)},o.biToDecimal=function(e){var t=new m;t.digits[0]=10;for(var i=o.biDivideModulo(e,t),n=String(i[1].digits[0]);1==o.biCompare(i[0],a);)i=o.biDivideModulo(i[0],t),n+=String(i[1].digits[0]);return(e.isNeg?"-":"")+o.reverseStr(n)};var b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];o.digitToHex=function(e){for(var t=15,i="",n=0;4>n;++n)i+=b[e&t],e>>>=4;return o.reverseStr(i)},o.biToHex=function(e){for(var t="",i=(o.biHighIndex(e),o.biHighIndex(e));i>-1;--i)t+=o.digitToHex(e.digits[i]);return t},o.charToHex=function(e){var t,i=48,n=i+9,o=97,s=o+25,r=65,a=90;return t=e>=i&&n>=e?e-i:e>=r&&a>=e?10+e-r:e>=o&&s>=e?10+e-o:0},o.hexToDigit=function(e){for(var t=0,i=Math.min(e.length,4),n=0;i>n;++n)t<<=4,t|=o.charToHex(e.charCodeAt(n));return t},o.biFromHex=function(e){for(var t=new m,i=e.length,n=i,s=0;n>0;n-=4,++s)t.digits[s]=o.hexToDigit(e.substr(Math.max(n-4,0),Math.min(n,4)));return t},o.biFromString=function(e,t){var i="-"==e.charAt(0),n=i?1:0,s=new m,r=new m;r.digits[0]=1;for(var a=e.length-1;a>=n;a--){var d=e.charCodeAt(a),l=o.charToHex(d),c=o.biMultiplyDigit(r,l);s=o.biAdd(s,c),r=o.biMultiplyDigit(r,t)}return s.isNeg=i,s},o.biDump=function(e){return(e.isNeg?"-":"")+e.digits.join(" ")},o.biAdd=function(e,t){var i;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,i=o.biSubtract(e,t),t.isNeg=!t.isNeg;else{i=new m;for(var n,s=0,r=0;r<e.digits.length;++r)n=e.digits[r]+t.digits[r]+s,i.digits[r]=n%u,s=Number(n>=u);i.isNeg=e.isNeg}return i},o.biSubtract=function(e,t){var i;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,i=o.biAdd(e,t),t.isNeg=!t.isNeg;else{i=new m;var n,s;s=0;for(var r=0;r<e.digits.length;++r)n=e.digits[r]-t.digits[r]+s,i.digits[r]=n%u,i.digits[r]<0&&(i.digits[r]+=u),s=0-Number(0>n);if(-1==s){s=0;for(var r=0;r<e.digits.length;++r)n=0-i.digits[r]+s,i.digits[r]=n%u,i.digits[r]<0&&(i.digits[r]+=u),s=0-Number(0>n);i.isNeg=!e.isNeg}else i.isNeg=e.isNeg}return i},o.biHighIndex=function(e){for(var t=e.digits.length-1;t>0&&0==e.digits[t];)--t;return t},o.biNumBits=function(e){var t,i=o.biHighIndex(e),n=e.digits[i],s=(i+1)*c;for(t=s;t>s-c&&0==(32768&n);--t)n<<=1;return t},o.biMultiply=function(e,t){for(var i,n,s,r=new m,a=o.biHighIndex(e),d=o.biHighIndex(t),c=0;d>=c;++c){i=0,s=c;for(var u=0;a>=u;++u,++s)n=r.digits[s]+e.digits[u]*t.digits[c]+i,r.digits[s]=n&f,i=n>>>l;r.digits[c+a+1]=i}return r.isNeg=e.isNeg!=t.isNeg,r},o.biMultiplyDigit=function(e,t){var i,n,s,r=new m;i=o.biHighIndex(e),n=0;for(var a=0;i>=a;++a)s=r.digits[a]+e.digits[a]*t+n,r.digits[a]=s&f,n=s>>>l;return r.digits[1+i]=n,r},o.arrayCopy=function(e,t,i,n,o){for(var s=Math.min(t+o,e.length),r=t,a=n;s>r;++r,++a)i[a]=e[r]};var y=[0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535];o.biShiftLeft=function(e,t){var i=Math.floor(t/c),n=new m;o.arrayCopy(e.digits,0,n.digits,i,n.digits.length-i);for(var s=t%c,r=c-s,a=n.digits.length-1,d=a-1;a>0;--a,--d)n.digits[a]=n.digits[a]<<s&f|(n.digits[d]&y[s])>>>r;return n.digits[0]=n.digits[a]<<s&f,n.isNeg=e.isNeg,n};var _=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];o.biShiftRight=function(e,t){var i=Math.floor(t/c),n=new m;o.arrayCopy(e.digits,i,n.digits,0,e.digits.length-i);for(var s=t%c,r=c-s,a=0,d=a+1;a<n.digits.length-1;++a,++d)n.digits[a]=n.digits[a]>>>s|(n.digits[d]&_[s])<<r;return n.digits[n.digits.length-1]>>>=s,n.isNeg=e.isNeg,n},o.biMultiplyByRadixPower=function(e,t){var i=new m;return o.arrayCopy(e.digits,0,i.digits,t,i.digits.length-t),i},o.biDivideByRadixPower=function(e,t){var i=new m;return o.arrayCopy(e.digits,t,i.digits,0,i.digits.length-t),i},o.biModuloByRadixPower=function(e,t){var i=new m;return o.arrayCopy(e.digits,0,i.digits,0,t),i},o.biCompare=function(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var i=e.digits.length-1;i>=0;--i)if(e.digits[i]!=t.digits[i])return e.isNeg?1-2*Number(e.digits[i]>t.digits[i]):1-2*Number(e.digits[i]<t.digits[i]);return 0},o.biDivideModulo=function(e,t){var i,n,s=o.biNumBits(e),r=o.biNumBits(t),a=t.isNeg;if(r>s)return e.isNeg?(i=o.biCopy(d),i.isNeg=!t.isNeg,e.isNeg=!1,t.isNeg=!1,n=biSubtract(t,e),e.isNeg=!0,t.isNeg=a):(i=new m,n=o.biCopy(e)),[i,n];i=new m,n=e;for(var l=Math.ceil(r/c)-1,g=0;t.digits[l]<h;)t=o.biShiftLeft(t,1),++g,++r,l=Math.ceil(r/c)-1;n=o.biShiftLeft(n,g),s+=g;for(var v=Math.ceil(s/c)-1,w=o.biMultiplyByRadixPower(t,v-l);-1!=o.biCompare(n,w);)++i.digits[v-l],n=o.biSubtract(n,w);for(var b=v;b>l;--b){var y=b>=n.digits.length?0:n.digits[b],_=b-1>=n.digits.length?0:n.digits[b-1],C=b-2>=n.digits.length?0:n.digits[b-2],k=l>=t.digits.length?0:t.digits[l],x=l-1>=t.digits.length?0:t.digits[l-1];y==k?i.digits[b-l-1]=f:i.digits[b-l-1]=Math.floor((y*u+_)/k);for(var T=i.digits[b-l-1]*(k*u+x),M=y*p+(_*u+C);T>M;)--i.digits[b-l-1],T=i.digits[b-l-1]*(k*u|x),M=y*u*u+(_*u+C);w=o.biMultiplyByRadixPower(t,b-l-1),n=o.biSubtract(n,o.biMultiplyDigit(w,i.digits[b-l-1])),n.isNeg&&(n=o.biAdd(n,w),--i.digits[b-l-1])}return n=o.biShiftRight(n,g),i.isNeg=e.isNeg!=a,e.isNeg&&(i=a?o.biAdd(i,d):o.biSubtract(i,d),t=o.biShiftRight(t,g),n=o.biSubtract(t,n)),0==n.digits[0]&&0==o.biHighIndex(n)&&(n.isNeg=!1),[i,n]},o.biDivide=function(e,t){return o.biDivideModulo(e,t)[0]},o.biModulo=function(e,t){return o.biDivideModulo(e,t)[1]},o.biMultiplyMod=function(e,t,i){return o.biModulo(o.biMultiply(e,t),i)},o.biPow=function(e,t){for(var i=d,n=e;;){if(0!=(1&t)&&(i=o.biMultiply(i,n)),t>>=1,0==t)break;n=o.biMultiply(n,n)}return i},o.biPowMod=function(e,t,i){for(var n=d,s=e,r=t;;){if(0!=(1&r.digits[0])&&(n=o.biMultiplyMod(n,s,i)),r=o.biShiftRight(r,1),0==r.digits[0]&&0==o.biHighIndex(r))break;s=o.biMultiplyMod(s,s,i)}return n},e.BarrettMu=function(e){this.modulus=o.biCopy(e),this.k=o.biHighIndex(this.modulus)+1;var s=new m;s.digits[2*this.k]=1,this.mu=o.biDivide(s,this.modulus),this.bkplus1=new m,this.bkplus1.digits[this.k+1]=1,this.modulo=t,this.multiplyMod=i,this.powMod=n};var C=function(t,i,n){var s=o;this.e=s.biFromHex(t),this.d=s.biFromHex(i),this.m=s.biFromHex(n),this.chunkSize=2*s.biHighIndex(this.m),this.radix=16,this.barrett=new e.BarrettMu(this.m)};o.getKeyPair=function(e,t,i){return new C(e,t,i)},"undefined"==typeof e.twoDigit&&(e.twoDigit=function(e){return(10>e?"0":"")+String(e)}),o._encryptedString=function(e,t){for(var i=[],n=t.length,s=0;n>s;)i[s]=t.charCodeAt(s),s++;for(;i.length%e.chunkSize!=0;)i[s++]=0;var r,a,d,l=i.length,c="";for(s=0;l>s;s+=e.chunkSize){for(d=new m,r=0,a=s;a<s+e.chunkSize;++r)d.digits[r]=i[a++],d.digits[r]+=i[a++]<<8;var u=e.barrett.powMod(d,e.e),h=16==e.radix?o.biToHex(u):o.biToString(u,e.radix);
c+=h+" "}return c.substring(0,c.length-1)},o._decryptedString=function(e,t){var i,n,s,r=t.split(" "),a="";for(i=0;i<r.length;++i){var d;for(d=16==e.radix?o.biFromHex(r[i]):o.biFromString(r[i],e.radix),s=e.barrett.powMod(d,e.d),n=0;n<=o.biHighIndex(s);++n)a+=String.fromCharCode(255&s.digits[n],s.digits[n]>>8)}return 0==a.charCodeAt(a.length-1)&&(a=a.substring(0,a.length-1)),a},o.setMaxDigits(130),o.encryptedString=function(e){var t=e.text;if(e.exponent&&e.modulus){var i=o.getKeyPair(e.exponent,"",e.modulus);t=o._encryptedString(i,e.text)}return t},o.decryptedString=function(e){var t=e.text;if(e.exponent&&e.modulus){var i=o.getKeyPair("",e.exponent,e.modulus);t=o._decryptedString(i,e.text)}return t}}(window.jQuery),!function(){var e=function(e,t){var i=this,e=$(e),t=$.extend(!0,{},i.progress_default,t);t.tmpbox=$('<div class="progress"></div>'),t.tmpbar=$('<div class="progress-bar" style="width:50%"></div>'),t.render=function(e,t,i){t.tmpbar.addClass(t.type),t.animate&&t.tmpbox.addClass("active"),t.striped&&t.tmpbox.addClass("progress-striped"),t.tmpbox.css({height:t.height,width:t.width}),t.tmpbar.css({"line-height":t.tmpbox.css("height"),width:t.value+"%"}).text(t.value+"%"),t.propess=t.tmpbox.append(t.tmpbar),i?e.data("progress",t):e.html("").append(t.propess).data("progress",t)},t.render(e,t),t.update=function(e,i){e=$(e),t=$.extend(!0,{},t,i),t.render(e,t,!0)}};e.prototype={progress_default:{value:0,type:" ",height:20,width:"100%",animate:!1,striped:!1}},$.fn.progress=function(t){$.each(this,function(i,n){var o=$(n).data("progress");o?o.update(n,t):new e(n,t)})}}(),!function(){var e=function(e,t){var i=this,e=$(e),t=$.extend(!0,{},i.slider_default,t),n={};t.parent_box.css("height",t.height),e.wrap(t.parent_box);var o=$("<div class='slider_box'></div>"),s=t.height/e.height(),r=$("<div class='slider_button'></div>"),a=$("<div class='u_slider_box'></div>");o.append(r),a.append(o),r.css("height",100*s+"%"),e.parent().after(a),n.box_height=o.height(),n.button_height=r.height(),n.ele_height=e.height(),n.con_height=t.height,r.on({mousedown:function(e){t.button_move=!0,n.b_clientY=e.clientY},mouseleave:function(){},mouseup:function(){t.button_move=!1}}),o.on({mousemove:function(i){if(t.button_move){var o,o=r.position().top+(i.clientY-n.b_clientY),s=e.parent(".u_slider_con");if(3>o)return r.css("top",3),s.scrollTop(0),!1;if(o+n.button_height>n.box_height-3)return r.css("top",n.box_height-n.button_height-3),s.scrollTop(e.height()),!1;r.css("top",o);var o=(n.ele_height-n.con_height)*o/(n.box_height-n.button_height);return s.scrollTop(o),n.b_clientY=i.clientY,i.stopPropagation(),!1}},mouseup:function(e){return t.button_move=!1,e.stopPropagation(),!1}})};e.prototype={slider_default:{parent_box:$("<div class='u_slider'><div class='u_slider_con' style='position:relative'></div></div>"),height:400,button_move:!1}},$.fn.slider=function(t){$.each(this,function(i,n){new e(n,t)})}}(),+function(e){function t(e){this.options=e||{},this.init(e)}t.prototype={init:function(e){this.render(e.container),this.uploaderInit(e),this.eventBind()},render:function(t){var i='<div class="picker">éæ©æä»¶</div><button class="ctlBtn btn btn-default">å¼å§ä¸ä¼ </button>';e("#thelist").length||e("body").append('<div class="file_wrap"><h3>æ­£å¨ä¸ä¼ ï¼<strong id="suc">0</strong>/<strong id="count"></strong><img class="close_all" src="images/close.png" alt="å³é­" /></h3><div id="thelist" class="uploader-list"></div></div>'),t.append(i)},uploaderInit:function(e){this.uploader=WebUploader.create({swf:"./swf/Uploader.swf?v="+Math.random(),server:"/upload",pick:".picker",chunked:!0,chunkSize:5242880,threads:20})},addBtn:function(e,t){this.uploader.addButton({id:"#"+e,innerHTML:t})},eventBind:function(){this.fileQueued(),this.btnClick()},uploadBeforeSend:function(){var e=function(e,t,i){i["Access-Control-Allow-Origin"]="*",i["Access-Control-Request-Headers"]="content-type",i["Access-Control-Request-Method"]="POST"};this.uploader.on("uploadBeforeSend ",e)},fileQueued:function(){var t=this.uploader,i=this;t.on("fileQueued",function(n){var o=e("#thelist");e(".file_wrap").css({display:"block"}),o.append('<div id="'+n.id+'" class="item"><h4 class="info">'+n.name+"</h4><span>"+(n.size/1048576).toFixed(2)+'M</span><p class="state">ç­å¾ä¸ä¼ ...</p><img class="close_item" src="images/itemcancel.png" alt="å³é­" /></div>'),i.closeRelative(),e("#count").html(t.getFiles().length)})},uploadProgress:function(){var t=this.uploader;t.on("uploadProgress",function(t,i){var n=e("#"+t.id),o=n.find(".progress .progress-bar");o.length||(o=e('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(n).find(".progress-bar")),n.find("p.state").text("ä¸ä¼ ä¸­"),o.css("width",100*i+"%")})},sucCount:0,handle:function(){var t=this.uploader,i=this;t.on("uploadSuccess",function(t){e("#"+t.id).find("p.state").text("å·²ä¸ä¼ "),e("#suc").html(++i.sucCount)}),t.on("uploadError",function(t){e("#"+t.id).find("p.state").text("ä¸ä¼ åºé")}),t.on("uploadComplete",function(t){e("#"+t.id).find(".progress").fadeOut()})},btnClick:function(){var t=this;e(".ctlBtn").on("click",function(e){t.uploader.upload()}),this.uploadProgress(),this.handle()},closeRelative:function(){var t=e(".close_all"),i=e(".close_item"),n=e(".file_wrap");t.on("click",function(e){n.css({display:"none"})});for(var o=0;o<i.length;o++)e(i[o]).on("click",function(t){e(this).parent().remove()})}},e.Uploader=t}($),+function(e){var t=function(){function e(){if(!V){try{var e=F.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}V=!0;for(var i=Y.length,n=0;i>n;n++)Y[n]()}}function i(e){V?e():Y[Y.length]=e}function n(e){if(typeof L.addEventListener!=$)L.addEventListener("load",e,!1);else if(typeof F.addEventListener!=$)F.addEventListener("load",e,!1);else if(typeof L.attachEvent!=$)w(L,"onload",e);else if("function"==typeof L.onload){var t=L.onload;L.onload=function(){t(),e()}}else L.onload=e}function o(){j?s():r()}function s(){var e=F.getElementsByTagName("body")[0],t=v(D);t.setAttribute("type",R);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=$){var o=i.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),q.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,r()}()}else r()}function r(){var e=H.length;if(e>0)for(var t=0;e>t;t++){var i=H[t].id,n=H[t].callbackFn,o={success:!1,id:i};if(q.pv[0]>0){var s=g(i);if(s)if(!b(H[t].swfVersion)||q.wk&&q.wk<312)if(H[t].expressInstall&&d()){var r={};r.data=H[t].expressInstall,r.width=s.getAttribute("width")||"0",r.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(r.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(r.align=s.getAttribute("align"));for(var u={},h=s.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(u[h[f].getAttribute("name")]=h[f].getAttribute("value"));l(r,u,i,n)}else c(s),n&&n(o);else _(i,!0),n&&(o.success=!0,o.ref=a(i),n(o))}else if(_(i,!0),n){var m=a(i);m&&typeof m.SetVariable!=$&&(o.success=!0,o.ref=m),n(o)}}}function a(e){var t=null,i=g(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=$)t=i;else{var n=i.getElementsByTagName(D)[0];n&&(t=n)}return t}function d(){return!U&&b("6.0.65")&&(q.win||q.mac)&&!(q.wk&&q.wk<312)}function l(e,t,i,n){U=!0,T=n||null,M={success:!1,id:i};var o=g(i);if(o){"OBJECT"==o.nodeName?(k=u(o),x=null):(k=o,x=i),e.id=A,(typeof e.width==$||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==$||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var s=q.ie&&q.win?"ActiveX":"PlugIn",r="MMredirectURL="+L.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+F.title;if(typeof t.flashvars!=$?t.flashvars+="&"+r:t.flashvars=r,q.ie&&q.win&&4!=o.readyState){var a=v("div");i+="SWFObjectNew",a.setAttribute("id",i),o.parentNode.insertBefore(a,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function c(e){if(q.ie&&q.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=v("div");if(q.win&&q.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(D)[0];if(i){var n=i.childNodes;if(n)for(var o=n.length,s=0;o>s;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||t.appendChild(n[s].cloneNode(!0))}}return t}function h(e,t,i){var n,o=g(i);if(q.wk&&q.wk<312)return n;if(o)if(typeof e.id==$&&(e.id=i),q.ie&&q.win){var s="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?s+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(s+=" "+r+'="'+e[r]+'"'));var a="";for(var d in t)t[d]!=Object.prototype[d]&&(a+='<param name="'+d+'" value="'+t[d]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+a+"</object>",W[W.length]=e.id,n=g(e.id)}else{var l=v(D);l.setAttribute("type",R);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,e[c]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&p(l,u,t[u]);o.parentNode.replaceChild(l,o),n=l}return n}function p(e,t,i){var n=v("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function f(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(q.ie&&q.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=g(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=F.getElementById(e)}catch(i){}return t}function v(e){return F.createElement(e)}function w(e,t,i){e.attachEvent(t,i),B[B.length]=[e,t,i]}function b(e){var t=q.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function y(e,t,i,n){if(!q.ie||!q.mac){var o=F.getElementsByTagName("head")[0];if(o){var s=i&&"string"==typeof i?i:"screen";if(n&&(S=null,N=null),!S||N!=s){var r=v("style");r.setAttribute("type","text/css"),r.setAttribute("media",s),S=o.appendChild(r),q.ie&&q.win&&typeof F.styleSheets!=$&&F.styleSheets.length>0&&(S=F.styleSheets[F.styleSheets.length-1]),N=s}q.ie&&q.win?S&&typeof S.addRule==D&&S.addRule(e,t):S&&typeof F.createTextNode!=$&&S.appendChild(F.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(z){var i=t?"visible":"hidden";V&&g(e)?g(e).style.visibility=i:y("#"+e,"visibility:"+i)}}function C(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=$?encodeURIComponent(e):e}var k,x,T,M,S,N,$="undefined",D="object",I="Shockwave Flash",E="ShockwaveFlash.ShockwaveFlash",R="application/x-shockwave-flash",A="SWFObjectExprInst",O="onreadystatechange",L=window,F=document,P=navigator,j=!1,Y=[o],H=[],W=[],B=[],V=!1,U=!1,z=!0,q=function(){var e=typeof F.getElementById!=$&&typeof F.getElementsByTagName!=$&&typeof F.createElement!=$,t=P.userAgent.toLowerCase(),i=P.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),o=i?/mac/.test(i):/mac/.test(t),s=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,a=[0,0,0],d=null;if(typeof P.plugins!=$&&typeof P.plugins[I]==D)d=P.plugins[I].description,!d||typeof P.mimeTypes!=$&&P.mimeTypes[R]&&!P.mimeTypes[R].enabledPlugin||(j=!0,r=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=$)try{var l=new ActiveXObject(E);l&&(d=l.GetVariable("$version"),d&&(r=!0,d=d.split(" ")[1].split(","),a=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]))}catch(c){}return{w3:e,pv:a,wk:s,ie:r,win:n,mac:o}}();(function(){q.w3&&((typeof F.readyState!=$&&"complete"==F.readyState||typeof F.readyState==$&&(F.getElementsByTagName("body")[0]||F.body))&&e(),V||(typeof F.addEventListener!=$&&F.addEventListener("DOMContentLoaded",e,!1),q.ie&&q.win&&(F.attachEvent(O,function(){"complete"==F.readyState&&(F.detachEvent(O,arguments.callee),e())}),L==top&&!function(){if(!V){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),q.wk&&!function(){return V?void 0:/loaded|complete/.test(F.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))})(),function(){q.ie&&q.win&&window.attachEvent("onunload",function(){for(var e=B.length,i=0;e>i;i++)B[i][0].detachEvent(B[i][1],B[i][2]);for(var n=W.length,o=0;n>o;o++)f(W[o]);for(var s in q)q[s]=null;q=null;for(var r in t)t[r]=null;t=null})}();return{registerObject:function(e,t,i,n){if(q.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,H[H.length]=o,_(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return q.w3?a(e):void 0},embedSWF:function(e,t,n,o,s,r,a,c,u,p){var f={success:!1,id:t};q.w3&&!(q.wk&&q.wk<312)&&e&&t&&n&&o&&s?(_(t,!1),i(function(){n+="",o+="";var i={};if(u&&typeof u===D)for(var m in u)i[m]=u[m];i.data=e,i.width=n,i.height=o;var g={};if(c&&typeof c===D)for(var v in c)g[v]=c[v];if(a&&typeof a===D)for(var w in a)typeof g.flashvars!=$?g.flashvars+="&"+w+"="+a[w]:g.flashvars=w+"="+a[w];if(b(s)){var y=h(i,g,t);i.id==t&&_(t,!0),f.success=!0,f.ref=y}else{if(r&&d())return i.data=r,void l(i,g,t,p);_(t,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){z=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return q.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,n){q.w3&&d()&&l(e,t,i,n)},removeSWF:function(e){q.w3&&f(e)},createCSS:function(e,t,i,n){q.w3&&y(e,t,i,n)},addDomLoadEvent:i,addLoadEvent:n,getQueryParamValue:function(e){var t=F.location.search||F.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return C(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=g(A);e&&k&&(e.parentNode.replaceChild(k,e),x&&(_(x,!0),q.ie&&q.win&&(k.style.display="block")),T&&T(M)),U=!1}}}}();window.isSwfCompressReady=function(){return window.compressObj=document.getElementById("Compress"),window.compressObj?!0:!1},window.preCompressContent=function(){if(null==window.compressObjSign){window.compressObjSign=1;var e=document.createElement("DIV");e.id="compressDivContent",document.body.appendChild(e);try{var i="0.0.0",n="",o={},s={};s.allowscriptaccess="always";var r={};r.id="Compress",r.name="Compress",r.align="middle";var a=getCurrentJsPath(),d=a.substr(0,a.lastIndexOf("/")),l=d.substr(0,d.lastIndexOf("/"));t.embedSWF(l+"/external/Compress.swf","compressDivContent","0","0",i,n,o,s,r)}catch(c){}}},window.swfCompress=function(e){var t=compressContent(e);return t},preCompressContent()}(jQuery),+function(e){this.special_keys={27:"esc",9:"tab",32:"space",13:"enter",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},this.shift_nums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},this.add=function(t,i,n){e.isFunction(i)&&(n=i,i={});var o={},s={type:"keydown",propagate:!1,disableInInput:!1,target:e("html")[0],checkParent:!0},r=this;o=e.extend(o,s,i||{}),t=t.toLowerCase();var a=function(t){t=e.event.fix(t);var i=this;if(i=3==i.nodeType?i.parentNode:i,o.disableInInput){var n=e(i);if(n.is("input")||n.is("textarea"))return}var s=t.which,a=t.type,d=String.fromCharCode(s).toLowerCase(),l=r.special_keys[s],c=t.shiftKey,u=t.ctrlKey,h=t.altKey,p=null;if(o.checkParent)for(;!e(i).data("u.hotkeys")&&i.parentNode;)i=i.parentNode;var f=e(i).data("u.hotkeys").events[a].callbackMap;if(c||u||h){var m="";h&&(m+="alt+"),u&&(m+="ctrl+"),c&&(m+="shift+"),p=f[m+l]||f[m+d]||f[m+r.shift_nums[d]]}else p=f[l]||f[d];return p&&(p.cb(t),!p.propagate)?(t.stopPropagation(),t.preventDefault(),!1):void 0},d=e(o.target).data("u.hotkeys");return d||e(o.target).data("u.hotkeys",d={events:{}}),d.events[o.type]||(d.events[o.type]={callbackMap:{}},e.event.add(o.target,o.type,a)),d.events[o.type].callbackMap[t]={cb:n,propagate:o.propagate},e.hotkeys},this.remove=function(t,i){return i=i||{},target=i.target||e("html")[0],type=i.type||"keydown",t=t.toLowerCase(),delete e(target).data("u.hotkeys").events[type].callbackMap[t],e},this.scan=function(t,i){t=t||document.body,e(t).find("[u-enter]").each(function(){var t=e(this).attr("u-enter");if(t)if("#"==t.substring(0,1))e.hotkeys.add("enter",{target:this},function(){e(t).focus()});else{i=i||window;var n=e.getFunction(i,t);e.hotkeys.add("enter",{target:this},function(){n.call(this)})}}),e(t).find("[u-hotkey]").each(function(){var t=e(this).attr("u-hotkey"),i=this;t&&e.hotkeys.add(t,function(){e(i).click()})})},e.hotkeys=this}($),function($,window,document,undefined){var dataSource=function(e,t){this.defaults={},this.gridComp=t,this.options=$.extend({},this.defaults,e),this.rows=new Array,this.hasParentRows=new Array,this.nothasParentRows=new Array,this.sortRows()},gridCompColumn=function(e,t){this.defaults={width:200,sortable:!0,canDrag:!0,fixed:!1,visible:!0,canVisible:!0,sumCol:!1,editable:!0,editFormShow:!0,autoExpand:!1,editType:"text",dataType:"String",format:"yyyy-MM-dd hh:mm:ss",headerLevel:1};var i={sortable:t.sortable,canDrag:t.canDrag,width:t.columnWidth};"Date"==e.dataType&&(this.defaults.format="yyyy-MM-dd"),t.showTree&&(e.sortable=!1),this.options=$.extend({},this.defaults,i,e),this.options.width=parseInt(this.options.width),this.firstColumn=!1},gridComp=function(e,t){this.dataSource=dataSource,this.gridCompColumn=gridCompColumn,this.ele=e[0],this.$ele=e,this.defaults={id:"grid",columnWidth:200,sortable:!0,canDrag:!0,canSwap:!0,showHeader:!0,columnMenu:!0,showNumCol:!1,multiSelect:!1,showSumRow:!1,editable:!1,editType:"default",showTree:!1,autoExpand:!0,cancelFocus:!1,maxHeaderLevel:1},this.transDefault={ml_show_column:trans("gridComp.show_column","æ¾ç¤º/éèå"),ml_clear_set:trans("gridComp.clear_set","æ¸é¤è®¾ç½®"),ml_no_rows:trans("gridComp.no_rows","æ æ°æ®"),ml_sum:trans("gridComp.sum","åè®¡:"),ml_close:trans("gridComp.close","å³é­")},this.transMap=$.extend({},this.transDefault,t.transMap),t.maxHeaderLevel>1&&(t.canSwap=!1),this.options=$.extend({},this.defaults,t),this.gridCompColumnArr=new Array,this.gridCompColumnFixedArr=new Array,this.basicGridCompColumnArr=new Array,this.gridCompLevelColumn=new Array,this.treeLeft=10,this.multiSelectWidth=40,this.numWidth=40,this.multiWidth=40,this.headerHeight=34,this.headerHeight=34*parseInt(this.options.maxHeaderLevel),this.countContentHeight=!0,this.minColumnWidth=80,this.columnMenuWidth=160,this.scrollBarHeight=16,this.columnMenuHeight=33,this.initGrid()};gridComp.prototype={initGrid:function(){var e=this;this.initOptions(),this.initVariable(),this.initWidthVariable(),this.initGridCompColumn(),this.initDataSource(),this.createDivs(),this.inte=setInterval(function(){e.setIntervalFun.call(e)},100)},destroySelf:function(){clearInterval(this.inte),this.$ele.data("gridComp",null),this.ele.innerHTML=""},initOptions:function(){this.options.width=this.formatWidth(this.options.width),this.options.height=this.formatWidth(this.options.height),"100%"!=this.options.height&&this.options.height||(this.countContentHeight=!1),this.leftW=0,this.options.showNumCol&&(this.leftW+=this.numWidth),this.options.multiSelect&&(this.leftW+=this.multiWidth),this.exceptContentHeight=0,this.options.showHeader&&(this.exceptContentHeight+=this.headerHeight);var e=window.location.href,t=e.indexOf("?");t>0&&(e=e.substring(0,t)),this.localStorageId=this.options.id+e},initVariable:function(){this.initDataSourceVariable(),this.mouseUpX="mouseUpX",this.mouseUpY="mouseUpY",this.mouseDownX="mouseDownX",this.mouseDownY="mouseDownY",this.mouseMoveX="mouseMoveX",this.mouseMoveY="mouseMoveY",this.scrollLeft=0,this.scrollTop=0,this.showType="",this.createGridFlag=!1,this.createFormFlag=!1,this.columnClickX=0,this.columnClickY=0,this.$sd_storageData=null,this.columnMenuMove=!1,this.createColumnMenuFlage=!1,this.firstColumn=!0,this.lastVisibleColumn=null,this.lastVisibleColumnWidth=0,this.menuColumnsHeight=0},initDataSourceVariable:function(){this.selectRows=new Array,this.selectRowsObj=new Array,this.selectRowsIndex=new Array,this.allRows=new Array,this.eidtRowIndex=-1},initWidthVariable:function(){this.wholeWidth=0,this.wholeHeight=0,this.rowHeight=0,this.fixedRealWidth=0,this.fixedWidth=0,this.contentRealWidth=0,this.contentWidth=0,this.contentMinWidth=0,this.contentHeight=0},initGridCompColumn:function(){var e=this;e.gridCompColumnFixedArr=new Array,this.options.columns&&$.each(this.options.columns,function(t){if(this.headerLevel>1)e.gridCompLevelColumn.push(this);else{var i=new gridCompColumn(this,e.options);e.gridCompColumnArr.push(i);var n=new gridCompColumn(this,e.options);e.basicGridCompColumnArr.push(n)}});var t=this.getGridCompColumnArrFromLocal();null!=t&&(this.gridCompColumnArr=t,$.each(this.gridCompColumnArr,function(){for(var t=this.options.field,i=0;i<e.options.columns.length;i++){var n=e.options.columns[i];if(n.field==t){var o=$.extend({},n,this.options);this.options=o;break}}})),this.menuColumnsHeight=this.gridCompColumnArr.length*this.columnMenuHeight,this.initGridCompFixedColumn(),this.columnsVisibleFun()},setRequired:function(e,t){var i=this;$.each(this.gridCompColumnArr,function(n){this.options.field==e&&(this.options.required=t,t?$("#"+i.options.id+"_edit_"+this.options.field).parent().find(".u-grid-edit-mustFlag").show():$("#"+i.options.id+"_edit_"+this.options.field).parent().find(".u-grid-edit-mustFlag").hide())})},getLevelTitleByField:function(e){for(var t=0;t<this.gridCompLevelColumn.length;t++){var i=this.gridCompLevelColumn[t].field;if(i==e)return this.gridCompLevelColumn[t].title}return""},initGridCompFixedColumn:function(){var e=this;$.each(this.gridCompColumnArr,function(t){1==this.options.fixed&&e.gridCompColumnFixedArr.push(this)}),$.each(this.gridCompColumnFixedArr,function(t){for(var t=e.gridCompColumnArr.length;t>-1;t--)if(e.gridCompColumnArr[t]==this){e.gridCompColumnArr.splice(t,1);break}})},initDataSource:function(){this.dataSourceObj=new dataSource(this.options.dataSource,this)},createDivs:function(){this.ele.innerHTML="";var e="",t="";t+=this.options.width?"width:"+this.options.width+";":"width:auto;",t+=this.options.height?"height:"+this.options.height+";":"height:auto;",""!=t&&(e='style="'+t+'"');var i='<div id="'+this.options.id+'" data-role="grid" class="u-grid" '+e+">";i+="</div>",this.ele.insertAdjacentHTML("afterBegin",i);var i='<div id="'+this.options.id+'_top" class="u-grid-top"></div>';this.ele.insertAdjacentHTML("afterBegin",i),this.initEventFun(),this.widthChangeFun()},repaintDivs:function(){this.repaintGridDivs()},createGridDivs:function(){if(!this.createGridFlag){$("#"+this.options.id)[0]&&($("#"+this.options.id)[0].innerHTML="");var e='<div id="'+this.options.id+'_grid" class="u-grid-grid">';e+=this.createColumnMenu(),e+=this.createHeader(),e+=this.createContent(),e+="</div>",$("#"+this.options.id)[0]&&$("#"+this.options.id).html(e),this.headerFirstClassFun(),this.initGridEventFun(),this.afterGridDivsCreate(),this.createGridFlag=!0}},repaintGridDivs:function(){$("#"+this.options.id+"_grid").remove(null,!0),this.showType="",this.wholeWidth=0,this.createGridFlag=!1,this.columnsVisibleFun(),this.widthChangeFun()},createColumnMenu:function(){var e=this,t='<div class="u-grid-column-menu" id="'+this.options.id+'_column_menu">';return t+='<ul data-role="menu" role="menubar" class="u-grid-column-menu-ul" id="'+this.options.id+'_column_menu_ul">',t+='<li class="u-grid-column-menu-li" role="menuitem">',t+='<div class="u-grid-column-menu-div1" id="'+this.options.id+'_showColumn">',t+='<span class="u-grid-column-menu-span">'+this.transMap.ml_show_column+"</span>",t+='<div class="u-grid-column-menu-div3 fa fa-caret-right"></div>',t+="</div></li>",t+='<li class="u-grid-column-menu-li" role="menuitem">',t+='<div class="u-grid-column-menu-div1" id="'+this.options.id+'_clearSet">',t+='<span class="u-grid-column-menu-span">'+this.transMap.ml_clear_set+"</span>",t+="</div></li>",t+="</ul></div>",t+='<div class="u-grid-column-menu-columns" id="'+this.options.id+'_column_menu_columns">',t+='<ul data-role="menu" role="menubar" class="u-grid-column-menu-columns-ul" id="'+this.options.id+'_column_menu_columns_ul">',$.each(this.gridCompColumnArr,function(i){if(""!=e.getString(this.options.title,"")){t+='<li class="u-grid-column-menu-columns-li" role="menuitem" index="'+i+'">',t+='<div class="u-grid-column-menu-columns-div1">';var n="";this.options.visible&&(n=" checked"),this.options.canVisible||(n+=' style="display:none;"'),t+='<div class="u-grid-column-menu-columns-div2"><input type="checkbox" '+n+"></div>",t+='<span class="u-grid-column-menu-columns-span">'+this.options.title+"</span>",t+="</div></li>"}}),t+="</ul></div>"},createHeader:function(){var e="";this.wholeWidth>0;var t="";this.options.showHeader||(t='style="display:none;"');var i='<div class="u-grid-header" id="'+this.options.id+'_header" '+t+'><div class="u-grid-header-wrap" id="'+this.options.id+'_header_wrap" data-role="resizable" '+e+">";return(this.options.multiSelect||this.options.showNumCol)&&(i+='<div id="'+this.options.id+'_header_left" class="u-grid-header-left" style="width:'+this.leftW+'px;">',this.options.multiSelect&&(i+=iweb.browser.isIE8?'<div class="u-grid-header-multi-select" style="width:'+this.multiWidth+'px;"><input class="u-grid-multi-input"   type="checkbox" id="'+this.options.id+'_header_multi_input"></div>':'<div class="u-grid-header-multi-select  checkbox check-success" style="width:'+this.multiWidth+'px;"><input  class="u-grid-multi-input"  type="checkbox" id="'+this.options.id+'_header_multi_input"><label for="'+this.options.id+'_header_multi_input"></label></div>'),this.options.showNumCol&&(i+='<div class="u-grid-header-num" style="width:'+this.numWidth+'px;"></div>'),i+="</div>"),i+=this.createHeaderTable("fixed"),i+=this.createHeaderTable(),i+="</div>",i+='<div class="u-grid-header-resize-handle" id="'+this.options.id+'_resize_handle"><div class="u-grid-header-resize-handle-inner"></div></div>',i+="</div>"},createHeaderTable:function(e){var t,i,n;"fixed"==e?(t=parseInt(this.leftW),i="absolute;width:"+this.fixedWidth+"px;z-index:11;background:#F9F9F9;",n="fixed_"):(t=parseInt(this.leftW)+parseInt(this.fixedWidth),i="relative;",n="",this.contentMinWidth>0&&(i+="width:"+this.contentMinWidth+"px;"));var o='<table role="grid" id="'+this.options.id+"_header_"+n+'table" style="position:'+i+";left:"+t+'px">';return o+=this.createColgroup(e),o+='<thead role="rowgroup" id="'+this.options.id+"_header_"+n+'thead">',o+=this.createThead(e),o+="</thead></table>"},createColgroup:function(e){var t,i=this,n="<colgroup>";return t="fixed"==e?this.gridCompColumnFixedArr:this.gridCompColumnArr,$.each(t,function(){this.options.visible&&(n+="<col",n+=' style="width:'+i.formatWidth(this.options.width)+'"',n+=">")}),n+="</colgroup>"},createThead:function(e){var t,i=this,n=0,o="";this.options.maxHeaderLevel>1&&(o='style="height:'+this.headerHeight+'px;"');var s='<tr role="row" '+o+">";return t="fixed"==e?this.gridCompColumnFixedArr:this.gridCompColumnArr,$.each(t,function(t){var o=n,r="";0==this.options.visible?(o=-1,r='style="display:none;"'):n++,s+='<th role="columnheader" data-filed="'+this.options.field+'" rowspan="1" class="u-grid-header-th" '+r+'field="'+this.options.field+'" index="'+t+'" visibleIndex="'+o+'"><div style="position:relative;">';var a="";this.options.headerColor&&(a='style="color:'+this.options.headerColor+'"'),s+='<div class="u-grid-header-link" field="'+this.options.field+'" title="'+this.options.title+'" '+a+">"+this.options.title+"</div>",i.options.columnMenu&&"fixed"!=e&&(s+='<div class="u-grid-header-columnmenu fa fa-bars " field="'+this.options.field+'" style="display:none;"></div>'),s+="</div></th>"}),s+="</tr>"},createContent:function(){var e="",t="",i="";if(this.countContentHeight){var n=$("#"+this.options.id)[0].offsetHeight;this.wholeHeight=n,n>0&&(this.contentHeight=parseInt(n)-this.exceptContentHeight>0?parseInt(n)-this.exceptContentHeight:0,this.contentHeight>0&&(e='style="max-height:'+this.contentHeight+'px;"'))}var o='<div id="'+this.options.id+'_content" class="u-grid-content" '+e+">";return(this.options.showNumCol||this.options.multiSelect)&&(o+=this.createContentLeft(),this.contentWidth>this.contentMinWidth||(t="display:none;",i="bottom:0px;"),this.options.showSumRow&&(o+='<div class="u-grid-content-left-sum-bottom" id="'+this.options.id+'_content_left_sum_bottom" style="width:'+(this.leftW+this.fixedWidth)+"px;"+i+'">',o+="</div>"),o+='<div class="u-grid-content-left-bottom" id="'+this.options.id+'_content_left_bottom" style="width:'+(this.leftW+this.fixedWidth)+"px;"+t+'">',o+="</div>"),o+=this.createContentTable("fixed"),o+=this.createContentTable(),o+="</div>"},createContentLeft:function(){var e=this,t="",i=0;return this.options.multiSelect&&(t+='<div class="u-grid-content-left" id="'+this.options.id+'_content_multiSelect" style="width:'+this.multiSelectWidth+'px;">',this.dataSourceObj.rows&&$.each(this.dataSourceObj.rows,function(i){t+=e.createContentLeftMultiSelectRow(this)}),t+="</div>",i+=this.multiSelectWidth),this.options.showNumCol&&(t+='<div class="u-grid-content-left" id="'+this.options.id+'_content_numCol" style="width:'+this.numWidth+"px;left:"+i+'px;">',this.dataSourceObj.rows&&$.each(this.dataSourceObj.rows,function(i){t+=e.createContentLeftNumColRow(i)}),t+="</div>"),t},createContentLeftMultiSelectRow:function(e,t){var i="";!this.options.autoExpand&&e.level>0&&"block"!=t&&(i="display:none;");var n=e.value["$_#_@_id"];if(n||(n=setTimeout(function(){})),iweb.browser.isIE8)var o='<div style="width:'+this.multiSelectWidth+"px;"+i+'" class="u-grid-content-multiSelect " ><input class="u-grid-multi-input" id="checkbox'+n+'" type="checkbox" value="1" ></div>';else var o='<div style="width:'+this.multiSelectWidth+"px;"+i+'" class="u-grid-content-multiSelect checkbox check-success" ><input class="u-grid-multi-input" id="checkbox'+n+'" type="checkbox" value="1" ><label for="checkbox'+n+'"></label></div>';return o},createContentLeftNumColRow:function(e){var t='<div style="width:'+this.numWidth+'px;" class="u-grid-content-num">'+(e+1)+"</div>";return t},createContentTable:function(e){var t,i,n,o,s,r;o=this.countContentHeight&&parseInt(this.contentHeight)>0?"max-height:"+this.contentHeight+"px;":"","fixed"==e?(t=parseInt(this.leftW),i="fixed_",s="fixed-",n='style="position:absolute;width:'+this.fixedWidth+"px;left:"+t+"px;"+o+'"',r='style="width:'+this.fixedWidth+'px;"'):(t=parseInt(this.leftW)+parseInt(this.fixedWidth),i="",s="",n='style="position:relative;left:'+t+"px;"+o,this.contentMinWidth>0&&(n+="width:"+this.contentMinWidth+"px;"),n+='"',r="",this.contentMinWidth>0&&(r=this.contentWidth>0?'style="min-width:'+this.contentMinWidth+"px;width:"+this.contentWidth+'px;"':'style="min-width:'+this.contentMinWidth+'px;"'));var a='<div id="'+this.options.id+"_content_"+i+'div" class="u-grid-content-'+s+'div" '+n+">";return a+='<div style="height:30px;position:absolute;top:-30px;width:100%;"></div><table role="grid" id="'+this.options.id+"_content_"+i+'table" '+r+">",a+=this.createColgroup(e),a+='<thead role="rowgroup" id="'+this.options.id+"_content_"+i+'thead" style="display:none">',
a+=this.createThead(e),a+="</thead>",a+=this.createContentRows(e),a+="</table>","fixed"!=e&&(a+=this.createNoRowsDiv()),a+="</div>"},createNoRowsDiv:function(){var e="",t="";this.contentMinWidth>0&&(e+='style="width:'+this.contentMinWidth+'px;"'),this.contentWidth>0&&(t+='style="width:'+this.contentWidth+'px;"');var i='<div class="u-grid-noRowsDiv"'+t+' id="'+this.options.id+'_noRows"></div>';return i+='<div class="u-grid-noRowsShowDiv"'+e+' id="'+this.options.id+'_noRowsShow">'+this.transMap.ml_no_rows+"</div>"},createContentRows:function(e){var t,i=this,n="";return t="fixed"==e?"fixed_":"",this.dataSourceObj.rows&&(n+='<tbody role="rowgroup" id="'+this.options.id+"_content_"+t+'tbody">',$.each(this.dataSourceObj.rows,function(t){n+=i.createContentOneRow(this,e)}),i.options.showSumRow&&this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0&&(n+=i.createSumRow(e)),n+="</tbody>"),n},createContentOneRow:function(e,t,i){var n="";!this.options.autoExpand&&e.level>0&&"block"!=i&&(n='style="display:none"');var o='<tr role="row" '+n+">";return o+=this.createContentOneRowTd(e,t),o+="</tr>"},createContentOneRowForIE:function(e,t,i,n,o){var s=e.insertRow(t+1);s.setAttribute("role","row"),!this.options.autoExpand&&s.level>0&&"block"!=o&&(s.style.display="none"),this.createContentOneRowTdForIE(s,i,n)},repaintRow:function(e){var t=$("#"+this.options.id+"_content_tbody").find('tr[role="row"]')[e],i=$("#"+this.options.id+"_content_fixed_tbody").find('tr[role="row"]')[e],n=this.dataSourceObj.rows[e],o=$(t),s=this.getTrIndex(o);iweb.browser.isIE8||iweb.browser.isIE9?(this.createContentOneRowTdForIE(t,n),this.createContentOneRowTdForIE(i,n,"fixed")):(t.innerHTML=this.createContentOneRowTd(n),i.innerHTML=this.createContentOneRowTd(n,"fixed"));var r={};r.begin=s,r.length=1,this.renderTypeFun(r)},createContentOneRowTd:function(e,t){var i,n=this,o="";i="fixed"==t?this.gridCompColumnFixedArr:this.gridCompColumnArr;var s=e.value;return $.each(i,function(){var t=this.options.field,i=$(s).attr(t);i=n.getString(i,""),"object"==$.type(i)&&(i=i.showValue);var r=(this.options.renderType,""),a="",d="",l="";if(n.options.showTree&&this.firstColumn){var c=parseInt(n.treeLeft)*parseInt(e.level);r='style="position:relative;',e.hasChild?a=n.options.autoExpand?'<span class=" fa fa-minus-square-o u-grid-content-tree-span"></span>':'<span class=" fa fa-plus-square-o u-grid-content-tree-span"></span>':c+=16,r+="left:"+c+'px;"'}this.options.visible||(l='style="display:none;"'),this.options.icon&&(d='<span class="'+this.options.icon+'"></span>'),o+='<td role="rowcell"  '+l+'><div class="u-grid-content-td-div" '+r+">"+a+d+"<span>"+i+"</span></div></td>"}),o},createContentOneRowTdForIE:function(e,t,i){var n,o=this;n="fixed"==i?this.gridCompColumnFixedArr:this.gridCompColumnArr;var s=t.value;$.each(n,function(){var i=this.options.field,n=$(s).attr(i);n=o.getString(n,""),"object"==$.type(n)&&(n=n.showValue);var r=(this.options.renderType,""),a="",d="",l="",c=e.insertCell();if(c.setAttribute("role","rowcell"),c.title=n,o.options.showTree&&this.firstColumn){var u=parseInt(o.treeLeft)*parseInt(t.level);r='style="position:relative;',t.hasChild?a=o.options.autoExpand?'<span class=" fa fa-minus-square-o u-grid-content-tree-span"></span>':'<span class=" fa fa-plus-square-o u-grid-content-tree-span"></span>':u+=18,r+="left:"+u+'px;"'}this.options.visible||(c.style.display="none"),this.options.icon&&(d='<span class="'+this.options.icon+'"></span>'),l+='<div class="u-grid-content-td-div" '+r+">"+a+d+"<span>"+n+"</span></div>",c.insertAdjacentHTML("afterBegin",l)})},createSumRow:function(e){if(this.options.showSumRow){var t,i,n=this;"fixed"==e?(t="fixed_",i=this.gridCompColumnFixedArr):(t="",i=this.gridCompColumnArr);var o=parseInt(this.wholeHeight)-this.exceptContentHeight-48-this.scrollBarHeight;o=o>0?o:0;var s='<tr role="row" class="u-grid-content-sum-row" id="'+this.options.id+"_content_"+t+'sum_row" style="top:'+o+'px;">';return $.each(i,function(){var e=this.options.field,t=n.dataSourceObj.getSumValue(e,this,n),i="";this.options.visible||(i='style="display:none;"'),s+='<td role="rowcell" title="'+t+'" '+i+">",this.firstColumn&&(s+='<div class="u-gird-centent-sum-div"><span>'+n.transDefault.ml_sum+"</span></div>"),s+='<div class="u-grid-content-td-div"><span>'+t+"</span></div></td>"}),s+="</tr>"}},createSumRowForIE:function(e,t){if(this.options.showSumRow){var i,n,o=this;"fixed"==t?(i="fixed_",n=this.gridCompColumnFixedArr):(i="",n=this.gridCompColumnArr);var s=parseInt(this.wholeHeight)-this.exceptContentHeight-48-this.scrollBarHeight;s=s>0?s:0;var r=e.insertRow();r.row="row",r.className="u-grid-content-sum-row",r.id=this.options.id+"_content_"+i+"sum_row",r.style.top=s+"px",$.each(n,function(){var e=this.options.field,t=o.dataSourceObj.getSumValue(e,this,o),i=r.insertCell();i.role="rowcell",i.title=t;var n='<div class="u-grid-content-td-div"><span>'+t+"</span></div>";i.insertAdjacentHTML("afterBegin",n)})}},repairSumRow:function(){if(this.options.showSumRow){$("#"+this.options.id+"_content_div tbody .u-grid-content-sum-row").remove(),$("#"+this.options.id+"_content_fixed_div tbody .u-grid-content-sum-row").remove();try{if(this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0){var e=this.createSumRow();$("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",e);var e=this.createSumRow("fixed");$("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",e)}}catch(t){var i=$("#"+this.options.id+"_content_div table")[0];$("#"+this.options.id+"_content_fixed_div table")[0];this.createSumRowForIE(i),this.createSumRowForIE(i,"fixed")}}},repairContent:function(){var e=$("#"+this.options.id+"_content").parent();if($("#"+this.options.id+"_content").remove(null,!0),e[0]){var t=this.createContent();e[0].insertAdjacentHTML("beforeEnd",t),this.initContentDivEventFun(),$("#"+this.options.id+"_content_div")[0]&&($("#"+this.options.id+"_content_div")[0].scrollLeft=this.scrollLeft),$("#"+this.options.id+"_content_edit_menu").css("display","none")}},createFromDivs:function(){if(!this.createFormFlag){var e='<div id="'+this.options.id+'_form" class="u-grid-form">';e+=this.createFromContent(),$("#"+this.options.id)[0].insertAdjacentHTML("afterBegin",e),this.createFormFlag=!0}},createFromContent:function(){var e='<div class="u-grid-form-content" id="'+this.options.id+'_form_content" class="u-grid-content">';return e+='<table role="grid" id="'+this.options.id+'_form_content_table">',e+=this.createFormContentRows(),e+="</table>"},createFormContentRows:function(){var e=this,t="";return this.dataSourceObj.rows&&(t+='<tbody role="rowgroup" id="'+this.options.id+'_form_content_tbody">',$.each(this.dataSourceObj.rows,function(){t+='<tr role="row"><td role="rowcell">';var i=this.value;$.each(e.gridCompColumnArr,function(){var e=this.options.field,n=this.options.title,o=$(i).attr(e);t+="<div>"+n+":</div>",t+="<div>"+o+"</div>"}),t+="</td></tr>"}),t+="</tbody>"),t},initEventFun:function(){var e=this;$("#"+this.options.id).on("mousedown",function(t){if($(t.target).closest("#"+e.options.id+"_header").length>0){e.mouseDownX=t.clientX,e.mouseDownY=t.clientY;var i=$(t.target).closest("th")[0];e.canSwap&&e.swapColumnStart(t,i),t.preventDefault()}else $(t.target).closest("#"+e.options.id+"_content").length>0}),$("#"+this.options.id).on("mousemove",function(t){if($(t.target).closest("#"+e.options.id+"_header").length>0){var i=$(t.target).closest("th")[0];e.headerThDrag(t,i)}e.mouseMoveX=t.clientX,e.mouseMoveY=t.clientY,e.mouseMoveX==e.mouseDownX&&e.mouseDownY==e.mouseMoveY||"mouseDownX"==e.mouseDownX||!e.canSwap||(e.swapColumnFlag=!0),e.dragFun(t),e.swapColumnFun(t),t.stopPropagation()}),$("#"+this.options.id+"_top").on("mousemove",function(t){e.mouseMoveX=t.clientX,e.mouseMoveY=t.clientY,e.mouseMoveX==e.mouseDownX&&e.mouseDownY==e.mouseMoveY||"mouseDownX"==e.mouseDownX||!e.canSwap||(e.swapColumnFlag=!0),e.dragFun(t),e.swapColumnFun(t),t.stopPropagation()}),$("#"+this.options.id).on("mouseup",function(t){if($(t.target).closest("#"+e.options.id+"_header").length>0){if(e.mouseUpX=t.clientX,e.mouseUpY=t.clientY,e.mouseDownX==e.mouseUpX&&e.mouseDownY==e.mouseUpY){e.columnClickX=t.clientX,e.columnClickY=t.clientY;var i=$(t.target).closest("th")[0];if($(t.target).hasClass("u-grid-header-columnmenu")){$("#"+e.options.id+"_column_menu").css("display","block");var n=i.attrRightTotalWidth-e.scrollLeft+e.leftW+e.fixedWidth-20;n+e.columnMenuWidth>e.wholeWidth&&(n=i.attrRightTotalWidth-e.scrollLeft+e.leftW+e.fixedWidth-e.columnMenuWidth+1),$("#"+e.options.id+"_column_menu").css("left",n),$("#"+e.options.id+"_column_menu").css("top",e.headerHeight),e.ele.createColumnMenuFlage=!0}else e.canSortable(t,i)}}else $(t.target).closest("#"+e.options.id+"_content").length>0;e.dragEnd(t),e.swapColumnEnd(t),e.mouseUpX="mouseUpX",e.mouseUpY="mouseUpY",e.mouseDownX="mouseDownX",e.mouseDownY="mouseDownY",e.mouseMoveX="mouseMoveX",e.mouseMoveY="mouseMoveY"}),$("#"+this.options.id+"_top").on("mouseup",function(t){e.dragEnd(t),e.swapColumnEnd(t),e.mouseUpX="mouseUpX",e.mouseUpY="mouseUpY",e.mouseDownX="mouseDownX",e.mouseDownY="mouseDownY",e.mouseMoveX="mouseMoveX",e.mouseMoveY="mouseMoveY"}),$(document).on("click",function(){0==e.columnMenuMove&&0==e.ele.createColumnMenuFlage&&$("#"+e.options.id+"_column_menu",e.$ele).css("display","none"),e.ele.createColumnMenuFlage=!1})},initGridEventFun:function(){var e=this;$("#"+this.options.id+"_resize_handle").on("mousedown",function(t){return e.dragStart(t),!1}),$("#"+this.options.id+"_header_table th").on("mousemove",function(e){$(".u-grid-header-columnmenu",$(this)).css("display","block")}),$("#"+this.options.id+"_header_table th").on("mouseout",function(e){$(".u-grid-header-columnmenu",$(this)).css("display","none")}),this.initContentDivEventFun(),$("#"+this.options.id+"_header_multi_input").on("click",function(t){this.checked?e.setAllRowSelect():e.setAllRowUnSelect()}),$("#"+this.options.id+"_column_menu_ul").on("mousemove",function(t){e.columnMenuMove=!0}),$("#"+this.options.id+"_column_menu_ul").on("mouseout",function(t){e.columnMenuMove=!1}),$("#"+this.options.id+"_showColumn").on("mousemove",function(t){if(e.hideMenuColumns&&clearTimeout(e.hideMenuColumns),"block"!=$("#"+e.options.id+"_column_menu_columns").css("display")){var i=$(window).width(),n=$(window).height(),o=$("#"+e.options.id+"_column_menu").css("left"),s=parseInt(o)+e.columnMenuWidth,r=e.columnClickX+2*e.columnMenuWidth;r>i&&(s=parseInt(o)-e.columnMenuWidth),$("#"+e.options.id+"_column_menu_columns").css("left",s);var a=e.headerHeight,d=t.clientY,l=e.menuColumnsHeight;e.menuColumnsHeight+30>n?(l=n-30,$("#"+e.options.id+"_column_menu_columns").css("height",l+"px")):$("#"+e.options.id+"_column_menu_columns").css("height","");var c=d+l;c>n&&(a=-1*(d-(n-l))+30),$("#"+e.options.id+"_column_menu_columns").css("top",a),$("#"+e.options.id+"_column_menu_columns").css("display","block"),e.columnMenuMove=!0}}),$("#"+this.options.id+"_showColumn").on("mouseout",function(t){e.hideMenuColumns=setTimeout(function(){$("#"+e.options.id+"_column_menu_columns").css("display","none"),e.columnMenuMove=!1},200)}),$("#"+this.options.id+"_column_menu_columns").on("mousemove",function(t){e.hideMenuColumns&&clearTimeout(e.hideMenuColumns),$("#"+e.options.id+"_column_menu_columns").css("display","block"),e.columnMenuMove=!0}),$("#"+this.options.id+"_column_menu_columns").on("mouseout",function(t){e.hideMenuColumns=setTimeout(function(){$("#"+e.options.id+"_column_menu_columns").css("display","none"),e.columnMenuMove=!1},200)}),$("#"+this.options.id+"_clearSet").on("click",function(t){e.clearLocalData(),e.initGridCompColumn(),e.dataSourceObj.sortRows(),e.repaintGridDivs(),"function"==typeof e.options.onClearSetFun&&e.options.onClearSetFun(e)}),$("#"+this.options.id+"_column_menu_columns_ul li input").on("click",function(t){var i=$(this).closest("li").attr("index");if(e.gridCompColumnArr[i].options.visible){$(this)[0].checked=!1;var n=$("input:checked",$("#"+e.options.id+"_column_menu_columns_ul")).length;if(0==n)return void($(this)[0].checked=!0);8==document.documentMode?(e.gridCompColumnArr[i].options.visible=!1,e.repaintGridDivs()):(e.setColumnVisibleByIndex(i,!1),e.gridCompColumnArr[i].options.visible=!1)}else $(this)[0].checked=!0,8==document.documentMode?(e.gridCompColumnArr[i].options.visible=!0,e.repaintGridDivs()):(e.setColumnVisibleByIndex(i,!0),e.gridCompColumnArr[i].options.visible=!0);e.saveGridCompColumnArrToLocal(),t.stopPropagation()}),$("#"+this.options.id+"_column_menu_columns_ul li").on("click",function(t){var i=$(this).attr("index"),n=e.gridCompColumnArr[i];if(!n.options.canVisible)return!1;if(n.options.visible){$("input",$(this))[0].checked=!1;var o=$("input:checked",$("#"+e.options.id+"_column_menu_columns_ul")).length;if(0==o)return void($("input",$(this))[0].checked=!0);e.setColumnVisibleByIndex(i,!1),e.gridCompColumnArr[i].options.visible=!1}else $("input",$(this))[0].checked=!0,e.setColumnVisibleByIndex(i,!0),e.gridCompColumnArr[i].options.visible=!0;e.saveGridCompColumnArrToLocal()})},initContentDivEventFun:function(){var e=this;$("#"+e.options.id+"_content .u-grid-content-left").on("click",function(t){var i=$(t.target).closest("input");if(i.length>0){var n=$(i.parent()),o=$(".u-grid-content-multiSelect",n.parent()).index(n);i[0].checked?e.setRowSelect(o):e.setRowUnselect(o)}}),$("#"+this.options.id+"_content_div").on("scroll",function(t){e.scrollLeft=this.scrollLeft,e.scrollTop=this.scrollTop,$("#"+e.options.id+"_header_table").css("left",e.leftW-e.scrollLeft+e.fixedWidth+"px"),$("#"+e.options.id+"_noRowsShow").css("left",e.scrollLeft+"px"),$("#"+e.options.id+"_content_multiSelect").css("top",-e.scrollTop+"px"),$("#"+e.options.id+"_content_numCol").css("top",-e.scrollTop+"px"),$("#"+e.options.id+"_content_fixed_div").css("top",-e.scrollTop+"px")}),$("#"+this.options.id+"_content_tbody").on("click",function(t){"function"==typeof e.options.onDblClickFun?e.isDblEvent("tbodyClick",e.dblClickFun,t,e.clickFun,t):e.clickFun(t)}),$("#"+this.options.id+"_content_fixed_tbody").on("click",function(t){"function"==typeof e.options.onDblClickFun?e.isDblEvent("tbodyClick",e.dblClickFun,t,e.clickFun,t):e.clickFun(t)}),$("#"+this.options.id+"_content_tbody").on("mousemove",function(t){var i=$(t.target).closest("tr");if($("#"+e.options.id+"_content_tbody").find("tr").removeClass("u-grid-move-bg"),$("#"+e.options.id+"_content_fixed_tbody").find("tr").removeClass("u-grid-move-bg"),e.options.multiSelect&&$("#"+e.options.id+"_content_multiSelect").find("div").removeClass("u-grid-move-bg"),e.options.showNumCol&&$("#"+e.options.id+"_content_numCol").find("div").removeClass("u-grid-move-bg"),(!i[0].id||i[0].id!=e.options.id+"_edit_tr")&&i.length>0){var n=$("tr",i.parent()).index(i);$("#"+e.options.id+"_content_tbody").find("tr").eq(n).addClass("u-grid-move-bg"),$("#"+e.options.id+"_content_fixed_tbody").find("tr").eq(n).addClass("u-grid-move-bg"),e.options.multiSelect&&$("#"+e.options.id+"_content_multiSelect").find("div").eq(n).addClass("u-grid-move-bg"),e.options.showNumCol&&$("#"+e.options.id+"_content_numCol").find("div").eq(n).addClass("u-grid-move-bg")}}),$("#"+this.options.id+"_content_fixed_tbody").on("mousemove",function(t){var i=$(t.target).closest("tr");if($("#"+e.options.id+"_content_tbody").find("tr").removeClass("u-grid-move-bg"),$("#"+e.options.id+"_content_fixed_tbody").find("tr").removeClass("u-grid-move-bg"),e.options.multiSelect&&$("#"+e.options.id+"_content_multiSelect").find("div").removeClass("u-grid-move-bg"),e.options.showNumCol&&$("#"+e.options.id+"_content_numCol").find("div").removeClass("u-grid-move-bg"),(!i[0].id||i[0].id!=e.options.id+"_edit_tr")&&i.length>0){var n=$("tr",i.parent()).index(i);$("#"+e.options.id+"_content_tbody").find("tr").eq(n).addClass("u-grid-move-bg"),$("#"+e.options.id+"_content_fixed_tbody").find("tr").eq(n).addClass("u-grid-move-bg"),e.options.multiSelect&&$("#"+e.options.id+"_content_multiSelect").find("div").eq(n).addClass("u-grid-move-bg"),e.options.showNumCol&&$("#"+e.options.id+"_content_numCol").find("div").eq(n).addClass("u-grid-move-bg")}}),$("#"+this.options.id+"_content").on("mouseout",function(t){$("#"+e.options.id+"_content_tbody").find("tr").removeClass("u-grid-move-bg"),$("#"+e.options.id+"_content_fixed_tbody").find("tr").removeClass("u-grid-move-bg"),e.options.multiSelect&&$("#"+e.options.id+"_content_multiSelect").find("div").removeClass("u-grid-move-bg"),e.options.showNumCol&&$("#"+e.options.id+"_content_numCol").find("div").removeClass("u-grid-move-bg")})},setIntervalFun:function(e){this.widthChangeFun(),this.heightChangeFun(),this.editorRowChangeFun()},editorRowChangeFun:function(){if($("#"+this.options.id+"_edit_form").length>0){var e=$("#"+this.options.id+"_edit_form")[0].offsetHeight;$("#"+this.options.id+"_numCol_edit").css("height",e),$("#"+this.options.id+"_multiSelect_edit").css("height",e)}},afterGridDivsCreate:function(){this.columnsVisibleFun(),this.resetThVariable(),this.countRowHeight(),this.noRowsShowFun();this.renderTypeFun(),this.resetScrollLeft(),this.hideEditMenu()},countRowHeight:function(){$("#"+this.options.id+"_content_tbody tr")[0]&&(this.rowHeight=$("#"+this.options.id+"_content_tbody tr")[0].offsetHeight)},noRowsShowFun:function(){this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0?($("#"+this.options.id+"_noRowsShow").css("display","none"),$("#"+this.options.id+"_noRows").css("display","none")):($("#"+this.options.id+"_noRowsShow").css("display","block"),$("#"+this.options.id+"_noRows").css("display","block"))},updateLastRowFlag:function(){for(var e=$("#"+this.options.id+"_content_tbody").find("tr[role=row]"),t=0,i=e.length;i>t;t++)t==i-1?$(e[t]).addClass("last-row"):$(e[t]).removeClass("last-row")},updateNumColLastRowFlag:function(){for(var e=$("#"+this.options.id+"_content_numCol").find(".u-grid-content-num"),t=0,i=e.length;i>t;t++)t==i-1?$(e[t]).addClass("last-row"):$(e[t]).removeClass("last-row")},renderTypeFun:function(e){if("undefined"==typeof e)var t=null,i=null,n="";else var t="undefined"==typeof e.begin?null:e.begin,i="undefined"==typeof e.length?null:e.length,n="undefined"==typeof e.field?"":e.field;var o=this,t=parseInt(t),i=parseInt(i),s=t;if(i>0&&(s=parseInt(t+i-1)),""==n)$.each(this.gridCompColumnFixedArr,function(e){o.renderTypeByColumn(this,e,t,i,!0)}),$.each(this.gridCompColumnArr,function(e){o.renderTypeByColumn(this,e,t,i,!1)});else{var r=!1;$.each(this.gridCompColumnFixedArr,function(e){return this.options.field==n?(o.renderTypeByColumn(this,e,t,i,!0),void(r=!0)):void 0}),r||$.each(this.gridCompColumnArr,function(e){return this.options.field==n?void o.renderTypeByColumn(this,e,t,i,!1):void 0})}},renderTypeByColumn:function(e,t,i,n,o){var s=this,r=e.options.renderType,a=e.options.dataType,d=e.options.precision,l=e.options.format,c=e.options.field,u=i,h=o===!0?"_content_fixed_tbody":"_content_tbody";n>0&&(u=parseInt(i+n-1)),$.each(s.dataSourceObj.rows,function(n){if(i>=0&&n>=i&&u>=n||isNaN(i)){var o=$("#"+s.options.id+h).find('tr[role="row"]').eq(n).find("td")[t];if(o){var p=$("#"+s.options.id+h).find('tr[role="row"]').eq(n).find("td").eq(t).find("span:last-child")[0];if(p){var f=$(this.value).attr(c);if(p.innerHTML="","function"==typeof r){f=s.getString(f,"");var m={};m.value=f,m.element=p,m.gridObj=s,m.row=this,m.gridCompColumn=e,m.rowIndex=n,r.call(s,m)}else if("date"==a||"datetime"==a){(null==f||f==undefined||"null"==f||"undefined"==f||""==f)&&(f="");var g=new Date(f);parseInt(g.valueOf())>0?f=g.format(l):(g=moment(f,"YYYY-MM-DD HH:mm:ss").toDate(),parseInt(g.valueOf())>0&&(f=g.format(l))),p.innerHTML=f,o.title=f}else if("integer"==a)f=parseInt(f),p.innerHTML=f,o.title=f;else if("float"==a){if(d){var v={};v.value=f,v.precision=d,f=s.DicimalFormater(v)}else f=parseFloat(f);p.innerHTML=f,o.title=f}else f=s.getString(f,""),v1=f.replace(/\</g,"<"),v1=v1.replace(/\>/g,">"),o.title=f,f=f.replace(/\</g,"&lt;"),f=f.replace(/\>/g,"&gt;"),p.innerHTML=f}}}})},afterRepaintGrid:function(){this.resetScrollLeft(),this.hideEditMenu()},resetScrollLeft:function(){$("#"+this.options.id+"_content_div")[0]&&($("#"+this.options.id+"_content_div")[0].scrollLeft=this.scrollLeft)},hideEditMenu:function(){$("#"+this.options.id+"_content_edit_menu").css("display","none")},widthChangeFun:function(){var e=this;if($("#"+this.options.id)[0]){var t=$("#"+this.options.id).width();this.wholeWidth!=t&&(this.wholeWidth=t,t>300&&("form"==this.showType||""==this.showType||!$("#"+this.options.id+"_content_div tbody")[0])?e.widthChangeGridFun():t>0&&300>t&&("grid"==this.showType||""==this.showType),t>300&&(this.contentMinWidth=parseInt(this.wholeWidth)-parseInt(this.leftW)-parseInt(this.fixedWidth),this.contentMinWidth<0&&(this.contentMinWidth=0),setTimeout(function(){$("#"+e.options.id+"_header_wrap").css("max-width",e.wholeWidth-4+"px"),$("#"+e.options.id+"_content_div").css("width",e.contentMinWidth+"px"),$("#"+e.options.id+"_content_table").css("min-width",e.contentMinWidth+"px"),$("#"+e.options.id+"_content_table").css("width",e.contentMinWidth+"px"),$("#"+e.options.id+"_header_table").css("min-width",e.contentMinWidth+"px"),$("#"+e.options.id+"_header_table").css("width",e.contentMinWidth+"px"),"function"==typeof e.options.afterCreate&&e.options.afterCreate.call(e)},300))),$("#"+e.options.id+"_header_table").css("width",e.contentMinWidth+"px"),$("#"+e.options.id+"_edit_form").css("width",e.contentMinWidth+"px")}},widthChangeGridFun:function(){var e=parseInt(this.wholeWidth/2);if(this.fixedRealWidth>e?this.fixedWidth=e:this.fixedWidth=this.fixedRealWidth,this.contentMinWidth=parseInt(this.wholeWidth)-parseInt(this.leftW)-parseInt(this.fixedWidth),this.contentMinWidth<0&&(this.contentMinWidth=0),this.contentRealWidth<this.contentMinWidth){this.contentWidth=this.contentMinWidth;var t=this.lastVisibleColumn.options.width;this.lastVisibleColumnWidth=t+(this.contentMinWidth-this.contentRealWidth),this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth}else this.contentWidth=this.contentRealWidth;this.createGridFlag=!1,this.createGridDivs(),$("#"+this.options.id+"_form").css("display","none"),$("#"+this.options.id+"_grid").css("display","block"),this.showType="grid"},widthChangeFormFun:function(){this.createFromDivs(),$("#"+this.options.id+"_grid").css("display","none"),$("#"+this.options.id+"_form").css("display","block"),this.showType="form","function"==typeof this.options.afterCreate&&this.options.afterCreate.call(this)},heightChangeFun:function(){if(this.countContentHeight){var e=this.wholeHeight,t=$("#"+this.options.id)[0].offsetHeight;if(this.wholeHeight=t,e!=t){var i=t-this.exceptContentHeight>0?t-this.exceptContentHeight:0;$("#"+this.options.id+"_content").css("height",i+"px"),$("#"+this.options.id+"_content_div").css("height",i+"px")}}},columnsVisibleFun:function(){var e=this,t=0,i=0;this.firstColumn=!0,$.each(this.gridCompColumnFixedArr,function(){this.options.visible&&(t+=parseInt(this.options.width),this.firstColumn=e.firstColumn,e.firstColumn=!1)}),this.fixedRealWidth=t,$.each(this.gridCompColumnArr,function(){this.options.visible&&(i+=parseInt(this.options.width),this.firstColumn=e.firstColumn,e.firstColumn=!1,e.lastVisibleColumn=this,e.lastVisibleColumnWidth=this.options.width)}),this.contentRealWidth=i},resetThVariable:function(){var e=this;this.contentWidth=0;var t="",i=0;$("#"+this.options.id+"_header_table th",this.$ele).each(function(n){var o=e.gridCompColumnArr[n],s=e.getString(o.options.parentHeader,""),r=0;if(o.options.visible&&(r=o.options.width),this.attrLeftTotalWidth=e.contentWidth,e.contentWidth+=r,!$("#"+e.options.id+"_resize_handle")[0].nowTh&&o.options.canDrag&&($("#"+e.options.id+"_resize_handle").css("left",r-4+e.leftW),$("#"+e.options.id+"_resize_handle")[0].nowTh=this),this.gridCompColumn=o,this.attrWidth=r,this.attrRightTotalWidth=e.contentWidth,""!=t&&s!=t&&$("#"+e.options.id+t).css("width",i-1+"px"),""!=s){var a=e.getLevelTitleByField(s);if(s!=t&&(i=0,!e.parentFlag)){var d='<div id="'+e.options.id+s+'" class="u-gird-parent"><div class="u-grid-header-link" title="'+a+'">'+a+"</div></div>";this.insertAdjacentHTML("afterBegin",d)}i+=r}t=s}),""!=t&&$("#"+e.options.id+t).css("width",i-1+"px"),this.parentFlag=!0},contentWidthChange:function(e){if(e<this.contentMinWidth){var t=this.lastVisibleColumn.options.width;this.lastVisibleColumnWidth=t+(this.contentMinWidth-e),$("#"+this.options.id+"_header_table col:last").css("width",this.lastVisibleColumnWidth+"px"),$("#"+this.options.id+"_content_table col:last").css("width",this.lastVisibleColumnWidth+"px"),e=this.contentMinWidth}return $("#"+this.options.id+"_content_table").css("width",e+"px"),$("#"+this.options.id+"_noRows").css("width",e+"px"),e>this.contentMinWidth?($("#"+this.options.id+"_content_left_bottom").css("display","block"),$("#"+this.options.id+"_content_left_sum_bottom").css("bottom",16)):($("#"+this.options.id+"_content_left_bottom").css("display","none"),$("#"+this.options.id+"_content_left_sum_bottom").css("bottom",0)),e},getColumnAttr:function(e,t){for(var i=0;i<this.gridCompColumnArr.length;i++)if(this.gridCompColumnArr[i].options.field==t)return $(this.gridCompColumnArr[i].options).attr(e);return""},getColumnByField:function(e){for(var t=0;t<this.gridCompColumnArr.length;t++)if(this.gridCompColumnArr[t].options.field==e)return this.gridCompColumnArr[t];return null},getIndexOfColumn:function(e){for(var t=-1,i=0;i<this.gridCompColumnArr.length;i++)if(this.gridCompColumnArr[i]==e){t=i;break}return t},getVisibleIndexOfColumn:function(e){for(var t=-1,i=0,n=0;n<this.gridCompColumnArr.length;n++){if(this.gridCompColumnArr[n]==e){"none"!=$("#"+this.options.id+"_header").find("th").eq(n).css("display")&&(t=i);break}"none"!=$("#"+this.options.id+"_header").find("th").eq(n).css("display")&&i++}return t},getNextVisibleInidexOfColumn:function(e){for(var t=-1,i=!1,n=0,o=0;o<this.gridCompColumnArr.length;o++)if(this.gridCompColumnArr[o]!=e){if(1==i&&"none"!=$("#"+this.options.id+"_header").find("th").eq(o).css("display")){t=n;break}"none"!=$("#"+this.options.id+"_header").find("th").eq(o).css("display")&&n++}else i=!0;return t},headerFirstClassFun:function(){$("#"+this.options.id+"_grid .u-grid-header-th-first").removeClass("u-grid-header-th-first"),$("#"+this.options.id+"_grid").find("th").eq(0).addClass("u-grid-header-th-first")},isDblEvent:function(e,t,i,n,o){if(null!=this.currentEventName&&this.currentEventName==e)t.call(this,i),this.currentEventName=null,this.cleanCurrEventName&&clearTimeout(this.cleanCurrEventName);else{var s=this;this.cleanCurrEventName&&clearTimeout(this.cleanCurrEventName),this.currentEventName=e,this.cleanCurrEventName=setTimeout(function(){s.currentEventName=null,n.call(s,o)},500)}},dblClickFun:function(e){if("function"==typeof this.options.onDblClickFun){var t=$(e.target).closest("tr");if(t[0].id==this.options.id+"_edit_tr")return;var i=0;t.length>0&&(i=this.getTrIndex(t));var n={};n.gridObj=this,n.rowObj=this.dataSourceObj.rows[i],n.rowIndex=i,this.options.onDblClickFun(n)}},clickFun:function(e){var t=this,i=$(e.target).closest("td"),n=i.index();if(i.length>0){var o=i.parent(),s=this.getTrIndex(o),r=t.dataSourceObj.rows[s];if(r){var a=r.childRowIndex,d=i.find(".fa-minus-square-o"),l=i.find(".fa-plus-square-o");if(d.length>0){if(d.removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),a.length>0){var c=t.getAllChildRowIndex(r);$.each(c,function(){var e=$("tr:eq("+parseInt(this)+")",o.parent());e.css("display","none"),$("#"+t.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")").css("display","none"),$(".fa-minus-square-o",e).removeClass("fa-minus-square-o").addClass("fa-plus-square-o")})}return}if(l.length>0)return l.removeClass("fa-plus-square-o").addClass("fa-minus-square-o"),void(a.length>0&&$.each(a,function(){var e=$("tr:eq("+parseInt(this)+")",o.parent());e.css("display","");$("#"+t.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")")[0];$("#"+t.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")").css("display","")}))}}var o=$(e.target).closest("tr");if(!(o.length>0&&o[0].id==this.options.id+"_edit_tr")&&o.length>0){var s=this.getTrIndex(o),r=t.dataSourceObj.rows[s];if(r){if(t.options.rowClickBan)return;var a=r.childRowIndex;t.dataSourceObj.rows[s].focus&&t.options.cancelFocus?t.setRowUnFocus(s):t.dataSourceObj.rows[s].focus||t.setRowFocus(s),t.options.editable&&(t.eidtRowIndex!=s||"default"==t.options.editType&&t.editColIndex!=n)&&t.editRowFun(o,n)}}},setColumnVisibleByColumn:function(e,t){var i=this.getIndexOfColumn(e);this.setColumnVisibleByIndex(i,t)},setColumnVisibleByIndex:function(e,t){if(e>=0){var i=this.gridCompColumnArr[e],n=this.getVisibleIndexOfColumn(i);if(0==i.options.visible&&t){var o="<col";i.options.width&&(o+=' style="width:'+this.formatWidth(i.options.width)+'"'),o+=">",$("#"+this.options.id+"_header th:eq("+e+")").css("display",""),$("#"+this.options.id+"_content th:eq("+e+")").css("display",""),$("td:eq("+e+")",$("#"+this.options.id+"_content tbody tr")).css("display","");var s=this.getNextVisibleInidexOfColumn(i);if(-1==s)try{$("#"+this.options.id+"_header col:last")[0].insertAdjacentHTML("afterEnd",o),$("#"+this.options.id+"_content col:last")[0].insertAdjacentHTML("afterEnd",o)}catch(r){$("#"+this.options.id+"_header col:last").after(o),$("#"+this.options.id+"_content col:last").after(o)}else try{$("#"+this.options.id+"_header col:eq("+s+")")[0].insertAdjacentHTML("beforeBegin",o),$("#"+this.options.id+"_content col:eq("+s+")")[0].insertAdjacentHTML("beforeBegin",o)}catch(r){$("#"+this.options.id+"_header col:eq("+s+")").before(o),$("#"+this.options.id+"_content col:eq("+s+")").before(o)}var a=this.contentWidth+i.options.width}if(1==i.options.visible&&!t){$("#"+this.options.id+"_header th:eq("+e+")").css("display","none"),$("#"+this.options.id+"_header col:eq("+n+")").remove(),$("#"+this.options.id+"_content th:eq("+e+")").css("display","none"),$("#"+this.options.id+"_content col:eq("+n+")").remove(),$("td:eq("+e+")",$("#"+this.options.id+"_content tbody tr")).css("display","none");var a=this.contentWidth-i.options.width}i.options.visible=t,this.columnsVisibleFun();var d=this.contentWidthChange(a);this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth,this.contentWidth=d,this.resetThVariable(),this.saveGridCompColumnArrToLocal()}},dragStart:function(e){this.dragFlag=!0,this.dragW=null,this.dragStartX=e.clientX},dragFun:function(e){if(this.dragFlag){var t=$("#"+this.options.id+"_resize_handle")[0].nowTh,i=$(t),n=i.attr("index"),o=this.gridCompColumnArr[n];if(nowVisibleThIndex=this.getVisibleIndexOfColumn(o),t&&o!=this.lastVisibleColumn){this.dragEndX=e.clientX;var s=this.dragEndX-this.dragStartX,r=t.attrWidth+s;cWidth=this.contentWidth+s,r>this.minColumnWidth&&(this.dragW=this.contentWidthChange(cWidth),$("#"+this.options.id+"_header_table col:eq("+nowVisibleThIndex+")").css("width",r+"px"),$("#"+this.options.id+"_content_table col:eq("+nowVisibleThIndex+")").css("width",r+"px"),o.options.width=r)}$("#"+this.options.id+"_top").css("display","block")}},dragEnd:function(e){this.dragFlag&&(this.resetThVariable(),this.saveGridCompColumnArrToLocal()),this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth,this.dragW&&(this.contentWidth=this.dragW),$("#"+this.options.id+"_resize_handle")[0].nowTh=null,this.dragFlag=!1,$("#"+this.options.id+"_top").css("display","none")},headerThDrag:function(e,t){if(!this.dragFlag&&!this.swapColumnFlag&&t&&t.gridCompColumn&&t.gridCompColumn.options.canDrag&&$("#"+this.options.id+"_resize_handle")[0].nowTh!=t){$(t);$("#"+this.options.id+"_resize_handle").css("left",t.attrRightTotalWidth-this.scrollLeft-4+this.leftW+this.fixedWidth),$("#"+this.options.id+"_resize_handle")[0].nowTh=t}},swapColumnStart:function(e,t){this.canSwap&&(this.swapColumnEle=t,this.swapColumnStartX=e.clientX,this.swapColumnStartY=e.clientY)},swapColumnFun:function(e){if(this.canSwap){var t=this;if(this.swapColumnFlag){var i=this.swapColumnEle,n=$(i),o=i.gridCompColumn;
if(0==$("#"+this.options.id+"_clue").length){var s=$('<div class="u-grid u-grid-header-drag-clue" id="'+this.options.id+'_clue" />').css({width:i.scrollWidth+"px",left:i.attrLeftTotalWidth-t.scrollLeft+t.leftW+t.fixedWidth+"px",top:"0px",paddingLeft:n.css("paddingLeft"),paddingRight:n.css("paddingRight"),lineHeight:n.height()+"px",paddingTop:n.css("paddingTop"),paddingBottom:n.css("paddingBottom")}).html(o.options.title||o.options.field).prepend('<span class="fa fa-ban u-grid-header-drag-status" />');$("#"+this.options.id)[0].insertAdjacentElement("afterBegin",s[0]),s.on("mousemove",function(){e.stopPropagation()})}this.swapColumnEndX=e.clientX,this.swapColumnEndY=e.clientY;var r=this.swapColumnEndX-this.swapColumnStartX,a=this.swapColumnEndY-this.swapColumnStartY;if($("#"+this.options.id+"_clue").css({left:i.attrLeftTotalWidth+r-t.scrollLeft+t.leftW+t.fixedWidth+"px",top:a+"px"}),0==$("#"+this.options.id+"_swap_top").length){var s=$('<span class="fa fa-sort-desc u-grid-header-swap-tip-span"  id="'+this.options.id+'_swap_top"/>');s.css({top:n.height()-6+"px"});var d=$('<span class="fa fa-sort-asc u-grid-header-swap-tip-span" id="'+this.options.id+'_swap_down" />');d.css({top:"6px"}),$("#"+this.options.id)[0].insertAdjacentElement("afterBegin",s[0]),$("#"+this.options.id)[0].insertAdjacentElement("afterBegin",d[0])}this.canSwap=!1,$("#"+this.options.id+"_header_table th").each(function(i){var n=$(this).offset().left,o=n+parseInt(this.attrWidth);if(0==i&&e.clientX<n)t.swapColumnEle!=this&&(t.swapToColumnEle="LeftEle",$("#"+t.options.id+"_swap_top").css({left:-t.scrollLeft-3+t.leftW+t.fixedWidth+"px",display:"block"}),$("#"+t.options.id+"_swap_down").css({left:-t.scrollLeft-3+t.leftW+t.fixedWidth+"px",display:"block"})),t.canSwap=!0;else if(n<e.clientX&&e.clientX<o&&t.swapColumnEle!=this&&parseInt($(this).attr("index"))+1!=parseInt($(t.swapColumnEle).attr("index")))return t.swapToColumnEle!=this&&(t.swapToColumnEle=this,$("#"+t.options.id+"_swap_top").css({left:this.attrRightTotalWidth-t.scrollLeft-3+t.leftW+t.fixedWidth+"px",display:"block"}),$("#"+t.options.id+"_swap_down").css({left:this.attrRightTotalWidth-t.scrollLeft-3+t.leftW+t.fixedWidth+"px",display:"block"})),t.canSwap=!0,!1}),this.canSwap?$(".u-grid-header-drag-status").removeClass("fa-ban").addClass("fa-plus-circle"):($("#"+this.options.id+"_swap_top").css("display","none"),$("#"+this.options.id+"_swap_down").css("display","none"),$(".u-grid-header-drag-status").removeClass("fa-plus-circle").addClass("fa-ban"),this.swapToColumnEle=null),$("#"+this.options.id+"_top").css("display","block")}}},swapColumnEnd:function(e){if(this.canSwap){if(this.swapColumnFlag){if(this.swapToColumnEle){var t=this.swapColumnEle,i=this.swapToColumnEle,n=$(t).attr("index"),o=$(i).attr("index"),s=this.gridCompColumnArr[n];this.gridCompColumnArr.splice(parseInt(o)+1,0,s),o>n?this.gridCompColumnArr.splice(n,1):this.gridCompColumnArr.splice(parseInt(n)+1,1),this.saveGridCompColumnArrToLocal(),this.repaintGridDivs()}$("#"+this.options.id+"_clue").remove(),$("#"+this.options.id+"_swap_top").css("display","none"),$("#"+this.options.id+"_swap_down").css("display","none")}this.swapColumnFlag=!1,$("#"+this.options.id+"_top").css("display","none")}},canSortable:function(e,t){var i=this,n=$(t),o=n.attr("field"),s=this.getColumnAttr("sortable",o);if(s){if(e.ctrlKey){var r=[];$(".u-grid-header-sort-priority").each(function(e,t){var i,n=$(t),o=parseInt(n.text()),s=n.closest("th").attr("field");n.parent().hasClass("fa-angle-up")?i="asc":n.parent().hasClass("fa-angle-down")&&(i="desc"),r[o-1]={field:s,sortType:i}});var a;if((a=n.find(".fa-angle-up")).length>0){var d=parseInt(a.find(".u-grid-header-sort-priority").text());r[d-1].sortType="desc",a.removeClass("fa-angle-up").addClass("fa-angle-down")}else if((a=n.find(".fa-angle-down")).length>0){for(var d=parseInt(a.find(".u-grid-header-sort-priority").text()),l=d;l<r.length;l++){var c=$("[field="+r[l].field+"]").find(".u-grid-header-sort-priority");c.text(parseInt(c.text())-1)}r.splice(d-1,1),a.remove()}else r.push({field:o,sortType:"asc"}),n.first().append('<span class="fa fa-angle-up u-grid-header-sort-span" ><span class="u-grid-header-sort-priority">'+r.length+"</span></span>");this.dataSourceObj.sortRowsByPrio(r)}else $(".fa-angle-up").parent().parent()[0]==t?($(".fa-angle-up").remove(),$(t.firstChild)[0].insertAdjacentHTML("beforeEnd",'<span class="fa fa-angle-down u-grid-header-sort-span" ><span class="u-grid-header-sort-priority">1</span></span>'),"function"==typeof this.options.onSortFun?this.options.onSortFun(o,"asc"):this.dataSourceObj.sortRows(o,"asc")):$(".fa-angle-down").parent().parent()[0]==t?($(".fa-angle-down").remove(),"function"==typeof this.options.onSortFun?this.options.onSortFun():this.dataSourceObj.sortRows()):($(".fa-angle-up").remove(),$(".fa-angle-down").remove(),$(t.firstChild)[0].insertAdjacentHTML("beforeEnd",'<span class="fa fa-angle-up u-grid-header-sort-span"><span class="u-grid-header-sort-priority">1</span></span>'),"function"==typeof this.options.onSortFun?this.options.onSortFun(o,"desc"):this.dataSourceObj.sortRows(o,"desc"));i.repairContent(),i.afterGridDivsCreate()}},editRowFun:function(e,t){-1!=this.eidtRowIndex&&this.editClose();var i="number"==typeof e?e:this.getTrIndex(e);this.eidtRowIndex=i,this.editColIndex=t,this.editRow(e,t)},editRowIndexFun:function(e){-1!=this.eidtRowIndex&&this.editClose(),this.eidtRowIndex=e,this.editColIndex=0,this.editRow()},editRow:function(e,t){var i=this,n=!1;e&&e.parents("table").attr("id").indexOf("_fixed_")>-1&&(n=!0),e=e||$("#"+this.options.id+'_content_tbody tr[role="row"]:eq('+this.eidtRowIndex+")"),t=t||0;var o=this.dataSourceObj.rows[this.eidtRowIndex].value;if(this.editRowObj=this.cloneObj(o),"default"==this.options.editType){var s=n?this.gridCompColumnFixedArr[t]:this.gridCompColumnArr[t];if(s.options.editable){var r=$("td:eq("+t+")",e)[0],a=s.options.field,d=$(o).attr(a);d=i.getString(d,""),i.editCell(r,d,a,s.options.editType,i.editRowObj)}$("#"+this.options.id+"_content_edit_menu").css("display","block"),$("#"+this.options.id+"_content_edit_menu_cancel").css("marginLeft","10px");var l=$("tr:visible",e.parent()).index(e);this.rowHeight=e.height();this.rowHeight*(l+1)+this.headerHeight+1}else if("form"==this.options.editType)if("function"==typeof this.options.formEditRenderFun){if(this.fixedWidth>0)var c=$("#"+this.options.id+"_content_fixed_table")[0];else var c=$("#"+this.options.id+"_content_table")[0];var u=c.insertRow(this.eidtRowIndex+2);u.id=this.options.id+"_edit_tr";var h=u.insertCell();h.id=this.options.id+"_edit_td",h.style.borderBottom="0px";var p=parseInt(this.contentMinWidth)+parseInt(this.fixedWidth),f='<div id="'+this.options.id+'_edit_form" class="u-grid-edit-form" style="width:'+p+'px;float:left;">';f+="</div>",h.innerHTML=f;var m={};m.grid=gridObj,m.element=$("#"+this.options.id+"_edit_form")[0],m.editRowObj=this.editRowObj,this.options.formEditRenderFun.call(this,m);var f='<div style="position:relative;float:left;width:100%;height:40px;"></div>';$("#"+this.options.id+"_edit_form")[0].insertAdjacentHTML("beforeEnd",f);var g=$("#"+this.options.id+"_edit_form").css("background-color");if(this.options.multiSelect){var v=$("#"+this.options.id+"_content_multiSelect > div").eq(this.eidtRowIndex),f='<div class="grid_open_edit" id="'+this.options.id+'_multiSelect_edit" style="background-color:'+g+";float:left;position:relative;width:"+this.multiSelectWidth+'px;"></div>';v[0].insertAdjacentHTML("afterEnd",f)}if(this.options.showNumCol){var v=$("#"+this.options.id+"_content_numCol > .u-grid-content-num").eq(this.eidtRowIndex),f='<div id="'+this.options.id+'_numCol_edit" style="background-color:'+g+";float:left;position:relative;width:"+this.numWidth+'px;"></div>';v[0].insertAdjacentHTML("afterEnd",f)}if($("#"+this.options.id+"_content_edit_menu").css("display","block"),this.fixedWidth>0){var w=$("#"+this.options.id+"_content_table")[0],b=w.insertRow(this.eidtRowIndex+2);b.id=this.options.id+"_edit_tr1"}}else{if(this.fixedWidth>0)var c=$("#"+this.options.id+"_content_fixed_table")[0];else var c=$("#"+this.options.id+"_content_table")[0];var u=c.insertRow(this.eidtRowIndex+2);u.id=this.options.id+"_edit_tr";var h=u.insertCell();h.id=this.options.id+"_edit_td",h.style.borderBottom="0px";var p=parseInt(this.contentMinWidth)+parseInt(this.fixedWidth),f='<div id="'+this.options.id+'_edit_form" class="u-grid-edit-form" style="width:'+p+'px;float:left;">';if($.each(this.gridCompColumnFixedArr,function(e){if(this.options.editFormShow){var t=this.options.field,n=$(o).attr(t);n=i.getString(n,"");var s=this.options.title;f+=i.formEditCell(n,t,s,this.options.required)}}),$.each(this.gridCompColumnArr,function(e){if(this.options.editFormShow){var t=this.options.field,n=$(o).attr(t);n=i.getString(n,"");var s=this.options.title;f+=i.formEditCell(n,t,s,this.options.required)}}),f+="</div>",h.innerHTML=f,$.each(this.gridCompColumnFixedArr,function(e){if(this.options.editFormShow){var t=this.options.field,n=$("#"+i.options.id+"_edit_"+t)[0],s=$(o).attr(t);this.options.title;s=i.getString(s,""),f+=i.editCell(n,s,t,this.options.editType,i.editRowObj)}}),$.each(this.gridCompColumnArr,function(e){if(this.options.editFormShow){var t=this.options.field,n=$("#"+i.options.id+"_edit_"+t)[0],s=$(o).attr(t);this.options.title;s=i.getString(s,""),f+=i.editCell(n,s,t,this.options.editType,i.editRowObj)}}),"function"==typeof this.options.renderEditMemu)this.options.renderEditMemu.apply(this,[$("#"+this.options.id+"_edit_form")[0],this.eidtRowIndex,this.dataSourceObj.rows.length]);else{var f='<div id="'+this.options.id+'_content_edit_menu" style="position:relative;float:left;width:100%;height:40px;"><button type="button" class="u-grid-content-edit-menu-button u-grid-content-edit-menu-button-ok" id="'+this.options.id+'_content_edit_menu_close">'+this.transDefault.ml_close+"</button></div>";$("#"+this.options.id+"_edit_form")[0].insertAdjacentHTML("beforeEnd",f),$("#"+this.options.id+"_content_edit_menu_close").on("click",function(e){i.editClose()})}var g=$("#"+this.options.id+"_edit_form").css("background-color");if(this.options.multiSelect){var v=$("#"+this.options.id+"_content_multiSelect > div").eq(this.eidtRowIndex),f='<div class="grid_open_edit " id="'+this.options.id+'_multiSelect_edit" style="background-color:'+g+";float:left;position:relative;width:"+this.multiSelectWidth+'px;"></div>';v[0].insertAdjacentHTML("afterEnd",f)}if(this.options.showNumCol){var v=$("#"+this.options.id+"_content_numCol > .u-grid-content-num").eq(this.eidtRowIndex),f='<div id="'+this.options.id+'_numCol_edit" style="background-color:'+g+";float:left;position:relative;width:"+this.numWidth+'px;"></div>';v[0].insertAdjacentHTML("afterEnd",f)}if($("#"+this.options.id+"_content_edit_menu").css("display","block"),this.fixedWidth>0){var w=$("#"+this.options.id+"_content_table")[0],b=w.insertRow(this.eidtRowIndex+2);b.id=this.options.id+"_edit_tr1"}}},editClose:function(){var e=this.dataSourceObj.rows[this.eidtRowIndex];if(e){try{this.repaintRow(this.eidtRowIndex)}catch(t){var i=$("#"+this.options.id+"_content_table")[0],n=$("#"+this.options.id+"_content_fixed_table")[0];i.deleteRow(this.eidtRowIndex+1),n.deleteRow(this.eidtRowIndex+1),this.createContentOneRowForIE(i,this.eidtRowIndex,e),this.createContentOneRowForIE(n,this.eidtRowIndex,e,"fixed")}$("#"+this.options.id+"_content_edit_menu").css("display","none"),this.repairSumRow(),this.noRowsShowFun(),this.updateLastRowFlag(),this.eidtRowIndex=-1,"form"==this.options.editType&&($("#"+this.options.id+"_multiSelect_edit").remove(null,!0),$("#"+this.options.id+"_numCol_edit").remove(null,!0),$("#"+this.options.id+"_edit_tr").remove(null,!0),$("#"+this.options.id+"_edit_tr1").remove(null,!0))}},editCell:function(e,t,i,n,o){var s=this;if("text"==n)"default"==this.options.editType?e.innerHTML='<input id="'+this.options.id+"_edit_field_"+i+'" type="text" value="'+t+'" field="'+i+'" style="width:100%;margin:0px;min-height:20px;font-size:12px;color:#444">':e.innerHTML='<input id="'+this.options.id+"_edit_field_"+i+'" type="text" value="'+t+'" field="'+i+'">',$("input",$(e)).on("blur",function(){s.editValueChange(i,this.value)});else if("function"==typeof n){var r={};r.gridObj=this,r.element=e,r.value=t,r.field=i,r.rowObj=o,n.call(this,r)}"default"==this.options.editType&&$("input",$(e)).focus()},editValueChange:function(e,t){this.updateValueAt(this.eidtRowIndex,e,t)},formEditCell:function(e,t,i,n){var o='<div class="u-grid-edit-whole-div"><div class="u-grid-edit-label"><div>'+i+'<span style="color:red;'+(n?"":"display: none")+'" class="u-grid-edit-mustFlag">*</span></div></div>';return o+='<div id="'+this.options.id+"_edit_"+t+'" class="u-grid-edit-div"></div>',o+="</div>"},getLocalData:function(){return null;var e},saveLocalData:function(){return null},clearLocalData:function(){return null},saveGridCompColumnArrToLocal:function(){return null},getGridCompColumnArrFromLocal:function(){return null},formatWidth:function(e){return e?(e+"").indexOf("%")>0?e:parseInt(e)+"px":""},swapEle:function(e,t){var i=e.next(),n=t.prev();t.insertBefore(i),e.insertAfter(n)},getString:function(e,t){return(null==e||e==undefined||"null"==e||"undefined"==e||""==e)&&(e=t),e+""},getInt:function(e,t){return(null==e||e==undefined||"null"==e||"undefined"==e||""==e||Number.isNaN(e))&&(e=t),e},getFloat:function(e,t){return(null==e||e==undefined||"null"==e||"undefined"==e||""==e||Number.isNaN(e))&&(e=t),e},cloneObj:function(e){var t;if("object"==typeof e)if(null===e)t=null;else if(e instanceof Array){t=[];for(var i=0,n=e.length;n>i;i++)t.push(this.cloneObj(e[i]))}else{t={};for(var o in e)t[o]=this.cloneObj(e[o])}else t=e;return t},DicimalFormater:function(e){for(var t=e.value+"",i=e.precision,n=0;n<t.length;n++)if(-1=="-0123456789.".indexOf(t.charAt(n)))return"";return this.checkDicimalInvalid(t,i)},checkDicimalInvalid:function(e,t){if(null==e||isNaN(e))return"";var i=parseFloat(e),n=(i*Math.pow(10,t)/Math.pow(10,t)).toFixed(t);return"NaN"==n?"":n},accAdd:function(e,t){var i,n,o;try{i=e.toString().split(".")[1].length}catch(s){i=0}try{n=t.toString().split(".")[1].length}catch(s){n=0}return o=Math.pow(10,Math.max(i,n)),(e*o+t*o)/o},getTrIndex:function(e){return $('tr[id!="'+this.options.id+'_edit_tr"]',e.parent()).index(e)},setDataSource:function(e){this.initDataSourceVariable(),this.options.dataSource=e,this.initDataSource(),this.repairContent(),this.afterGridDivsCreate()},setDataSourceFun1:function(e){var t={};if(e.values){var i=new Array;$.each(e.values,function(){if(e.fields){var t={},n=this;$.each(e.fields,function(e){$(t).attr(this,n[e])}),i.push(t)}})}$(t).attr("values",i),this.setDataSource(t)},addOneRow:function(e,t){var i=this,n="none",o={};o.value=e;var s,r=0,a=this.dataSourceObj.rows.length,d=!1;if("grid"==this.showType){if(-1!=this.eidtRowIndex&&this.editClose(),this.options.showTree){var l=!1,c=this.options.keyField,u=this.options.parentKeyField,h=(this.getString($(e).attr(c),""),this.getString($(e).attr(u),""));$.each(this.dataSourceObj.rows,function(e){var n=this.value,a=i.getString($(n).attr(c),"");if(a==h){l=!0,s=e,r=this.childRowIndex.length;var d=this.level;o.level=d+1,t=s+1,this.allChildRowIndex=new Array}}),l||(o.level=0,t!=a&&(t=0))}if(0!=t&&(t&&t>0?t>a&&(t=a):t=0),a==t&&(d=!0),o.valueIndex=t,this.dataSourceObj.rows.splice(t,0,o),l){var p=$("#"+this.options.id+"_content_div").find("tbody").find('tr[role="row"]').eq(s);if(r>0){var f=$(".fa-plus-square-o",p);f.length>0||(n="block")}else{n="block";var m=$("div:visible:eq(0)",p),f=$(".fa-plus-square-o",p),g=$(".fa-minus-square-o",p),v='<span class="fa u-grid-content-tree-span fa-minus-square-o"></span>';if(m.length>0&&0==f.length&&0==g.length){m[0].insertAdjacentHTML("afterBegin",v);var w=parseInt(m[0].style.left);a=w-16,(a>0||0==a)&&(m[0].style.left=a+"px")}f.length>0&&f.removeClass("fa-plus-square-o").addClass("fa-minus-square-o")}}try{var b=this.createContentOneRow(o,"normal",n);d?$("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",b):$("#"+this.options.id+"_content_div").find("tbody").find('tr[role="row"]')[t]?$("#"+this.options.id+"_content_div").find("tbody").find('tr[role="row"]')[t].insertAdjacentHTML("beforeBegin",b):$("#"+this.options.id+"_content_div tbody")[0]&&$("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("afterBegin",b);var b=this.createContentOneRow(o,"fixed",n);d?$("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",b):$("#"+this.options.id+"_content_fixed_div").find("tbody").find('tr[role="row"]')[t]?$("#"+this.options.id+"_content_fixed_div").find("tbody").find('tr[role="row"]')[t].insertAdjacentHTML("beforeBegin",b):$("#"+this.options.id+"_content_fixed_div tbody")[0]&&$("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("afterBegin",b)}catch(y){var _=$("#"+this.options.id+"_content_div table")[0];_&&this.createContentOneRowForIE(_,t,o,"normal",n);var C=$("#"+this.options.id+"_content_fixed_div table")[0];C&&this.createContentOneRowForIE(C,t,o,"fixed",n)}if(this.options.multiSelect){var b=this.createContentLeftMultiSelectRow(o,n);d?$("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("beforeEnd",b):$("#"+this.options.id+"_content_multiSelect").find("div")[t]?$("#"+this.options.id+"_content_multiSelect").find("div")[t].insertAdjacentHTML("beforeBegin",b):$("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("afterBegin",b)}if(this.options.showNumCol){var b=this.createContentLeftNumColRow(a);$("#"+this.options.id+"_content_numCol")[0].insertAdjacentHTML("beforeEnd",b),this.updateNumColLastRowFlag()}this.repairSumRow(),this.noRowsShowFun(),this.updateLastRowFlag();var k={};k.begin=t,k.length=1,this.renderTypeFun(k)}var a=0;this.options.showTree?(this.dataSourceObj.options.values?a=this.dataSourceObj.options.values.length:this.dataSourceObj.options.values=new Array,this.dataSourceObj.options.values.splice(t,0,e),this.dataSourceObj.sortRows()):(this.dataSourceObj.options.values||(this.dataSourceObj.options.values=new Array),this.dataSourceObj.options.values.splice(t,0,e))},addRows:function(e,t){if(this.options.showTree)for(var i=e.length,n=i-1;n>-1;n--)this.addOneRow(e[n],t);else{-1!=this.eidtRowIndex&&this.editClose();var o="",s="",r="",a="",d=this,i=this.dataSourceObj.rows.length,l=!1;0!=t&&(t&&t>0?t>i&&(t=i):t=0),i==t&&(l=!0);var c=new Array;if($.each(e,function(e){var i={};i.value=this,i.valueIndex=t+e,c.push(i),d.dataSourceObj.rows.splice(t+e,0,i)}),"grid"==this.showType&&$("#"+this.options.id+"_content_div tbody")[0]){$.each(c,function(e){o+=d.createContentOneRow(this),a+=d.createContentOneRow(this,"fixed"),d.options.multiSelect&&(s+=d.createContentLeftMultiSelectRow(this)),d.options.showNumCol&&(r+=d.createContentLeftNumColRow(i+e))});try{l?$("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",o):$("#"+this.options.id+"_content_div").find("tbody").find('tr[role="row"]')[t]?$("#"+this.options.id+"_content_div").find("tbody").find('tr[role="row"]')[t].insertAdjacentHTML("beforeBegin",o):$("#"+this.options.id+"_content_div tbody")[0]&&$("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("afterBegin",o),l?$("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",a):$("#"+this.options.id+"_content_fixed_div").find("tbody").find('tr[role="row"]')[t]?$("#"+this.options.id+"_content_fixed_div").find("tbody").find('tr[role="row"]')[t].insertAdjacentHTML("beforeBegin",a):$("#"+this.options.id+"_content_fixed_div tbody")[0]&&$("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("afterBegin",a)}catch(u){var h=$("#"+this.options.id+"_content_div table")[0],p=$("#"+this.options.id+"_content_fixed_div table")[0];h&&p&&$.each(c,function(e){d.createContentOneRowForIE(h,t+e,this),d.createContentOneRowForIE(p,t+e,this,"fixed")})}if(this.options.multiSelect)if(l)$("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("beforeEnd",s);else{var f=$("#"+this.options.id+"_content_multiSelect").find("div")[t];f?f.insertAdjacentHTML("beforeBegin",s):$("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("afterBegin",s)}this.options.showNumCol&&($("#"+this.options.id+"_content_numCol")[0].insertAdjacentHTML("beforeEnd",r),this.updateNumColLastRowFlag()),this.repairSumRow(),this.noRowsShowFun();var m={};m.begin=t,m.length=e.length,this.renderTypeFun(m)}this.dataSourceObj.options.values||(this.dataSourceObj.options.values=new Array),$.each(e,function(e){d.dataSourceObj.options.values.splice(t+e,0,this)}),this.updateLastRowFlag()}},deleteOneRow:function(e){var t=this;e=parseInt(e);var i=this.dataSourceObj.rows[e];if(i){var n=i.value;if("grid"==this.showType&&-1!=this.eidtRowIndex&&this.editClose(),this.selectRows&&$.each(this.selectRows,function(i){this==n?(t.selectRows.splice(i,1),t.selectRowsObj.splice(i,1),t.selectRowsIndex.splice(i,1)):t.selectRowsIndex[i]>e&&(t.selectRowsIndex[i]=t.selectRowsIndex[i]-1)}),this.focusRow&&(this.focusRow==n?(this.focusRow=null,this.focusRowObj=null,this.focusRowIndex=null):this.focusRowIndex>e&&(this.focusRowIndex=this.focusRowIndex-1)),this.dataSourceObj.rows.splice(e,1),"grid"==this.showType&&($("#"+this.options.id+"_content_div tbody tr:eq("+e+")").remove(),$("#"+this.options.id+"_content_fixed_div tbody tr:eq("+e+")").remove(),$("#"+this.options.id+"_content_multiSelect >div:eq("+e+")").remove(),$("#"+this.options.id+"_content_numCol >.u-grid-content-num:nth-child("+(this.dataSourceObj.rows.length+1)+")").remove(),this.repairSumRow(),this.noRowsShowFun(),this.updateNumColLastRowFlag()),this.dataSourceObj.options.values){var o=this.dataSourceObj.options.values.indexOf(n);this.dataSourceObj.options.values.splice(o,1)}if(this.options.showTree&&this.dataSourceObj.sortRows(),"function"==typeof this.options.onRowDelete){var s={};if(s.gridObj=this,s.index=e,!this.options.onRowDelete(e))return}}},deleteRows:function(e){var t=this,i=new Array;$.each(e,function(t){i.push(e[t])}),i.sort(function(e,t){return t-e}),$.each(i,function(e){t.deleteOneRow(this)})},updateRow:function(e,t){if(this.dataSourceObj.rows[e].value=t,this.dataSourceObj.options.values[this.dataSourceObj.rows[e].valueIndex]=t,"grid"==this.showType){var i={};i.begin=e,i.length=1,this.renderTypeFun(i),this.repairSumRow()}},updateValueAt:function(e,t,i){var n=$(this.dataSourceObj.rows[e].value).attr(t);if(n!=i){if($(this.dataSourceObj.rows[e].value).attr(t,i),$(this.dataSourceObj.options.values[this.dataSourceObj.rows[e].valueIndex]).attr(t,i),"grid"==this.showType){var o={};o.field=t,o.begin=e,o.length=1,this.renderTypeFun(o),this.eidtRowIndex==e&&$("#"+this.options.id+"_edit_field_"+t).length>0&&("checkbox"==$("#"+this.options.id+"_edit_field_"+t)[0].type?"Y"==i||"true"==i?$("#"+this.options.id+"_edit_field_"+t)[0].checked=!0:$("#"+this.options.id+"_edit_field_"+t)[0].checked=!1:$("#"+this.options.id+"_edit_field_"+t)[0].value=i),this.repairSumRow()}if("function"==typeof this.options.onValueChange){var o={};o.gridObj=this,o.rowIndex=e,o.field=t,o.oldValue=n,o.newValue=i,this.options.onValueChange(o)}}},setRowSelect:function(e){if(!this.dataSourceObj.rows[e])return!0;if(this.dataSourceObj.rows[e].checked)return!0;if("function"==typeof this.options.onBeforeRowSelected){var t={};if(t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,!this.options.onBeforeRowSelected(t))return this.options.multiSelect&&($("#"+this.options.id+"_content_multiSelect input:eq("+e+")")[0].checked=!1),!1}if(this.options.multiSelect?"grid"==this.showType&&($("#"+this.options.id+"_content_multiSelect input:eq("+e+")")[0].checked=!0):(this.selectRowsObj&&this.selectRowsObj.length>0&&$.each(this.selectRowsObj,function(){this.checked=!1}),this.selectRows=new Array,this.selectRowsObj=new Array,this.selectRowsIndex=new Array,"grid"==this.showType&&($("#"+this.options.id+"_content_tbody").find("tr").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_tbody").find("tr").find("a").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_fixed_tbody").find("tr").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_fixed_tbody").find("tr").find("a").removeClass("u-grid-content-sel-row"),this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect").find("div").removeClass("u-grid-content-sel-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol").find("div").removeClass("u-grid-content-sel-row"))),"grid"==this.showType){$("#"+this.options.id+'_content_tbody tr[role="row"]:eq('+e+")").addClass("u-grid-content-sel-row"),$("#"+this.options.id+'_content_tbody tr[role="row"]:eq('+e+") a").addClass("u-grid-content-sel-row"),$("#"+this.options.id+'_content_fixed_tbody tr[role="row"]:eq('+e+")").addClass("u-grid-content-sel-row"),$("#"+this.options.id+'_content_fixed_tbody tr[role="row"]:eq('+e+") a").addClass("u-grid-content-sel-row");var i=e;this.eidtRowIndex>-1&&this.eidtRowIndex<e&&"form"==this.editType&&i++,this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect >div:eq("+i+")").addClass("u-grid-content-sel-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol >div:eq("+i+")").addClass("u-grid-content-sel-row")}if(this.selectRows.push(this.dataSourceObj.rows[e].value),this.selectRowsObj.push(this.dataSourceObj.rows[e]),this.selectRowsIndex.push(e),this.dataSourceObj.rows[e].checked=!0,"function"==typeof this.options.onRowSelected){var t={};t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,this.options.onRowSelected(t)}return!0},setRowUnselect:function(e){var t=this;if(!this.dataSourceObj.rows[e])return!0;if(!this.dataSourceObj.rows[e].checked)return!0;if("function"==typeof this.options.onBeforeRowUnSelected){var i={};if(i.gridObj=this,i.rowObj=this.dataSourceObj.rows[e],i.rowIndex=e,!this.options.onBeforeRowUnSelected(i))return this.options.multiSelect&&($("#"+this.options.id+"_content_multiSelect input:eq("+e+")")[0].checked=!0),!1}this.options.multiSelect&&($("#"+this.options.id+"_content_multiSelect input:eq("+e+")")[0].checked=!1);var n=e;if(this.eidtRowIndex>-1&&this.eidtRowIndex<e&&"form"==this.editType&&n++,$("#"+this.options.id+"_content_tbody tr:eq("+n+")").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_tbody tr:eq("+n+") a").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_fixed_tbody tr:eq("+n+")").removeClass("u-grid-content-sel-row"),$("#"+this.options.id+"_content_fixed_tbody tr:eq("+n+") a").removeClass("u-grid-content-sel-row"),this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect >div:eq("+n+")").removeClass("u-grid-content-sel-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol >div:eq("+n+")").removeClass("u-grid-content-sel-row"),$.each(this.selectRows,function(i){this==t.dataSourceObj.rows[e].value&&(t.selectRows.splice(i,1),t.selectRowsObj.splice(i,1),t.selectRowsIndex.splice(i,1))}),this.dataSourceObj.rows[e].checked=!1,"function"==typeof this.options.onRowUnSelected){var i={};i.gridObj=this,i.rowObj=this.dataSourceObj.rows[e],i.rowIndex=e,this.options.onRowUnSelected(i)}return!0},setAllRowSelect:function(){if($("#"+this.options.id+"_header_multi_input").attr("checked",!0),"function"==typeof this.options.onBeforeAllRowSelected){var e={};if(e.gridObj=this,e.rowObjs=this.dataSourceObj.rows,!this.options.onBeforeAllRowSelected(e))return}for(var t=0;t<this.dataSourceObj.rows.length;t++)this.setRowSelect(t);if("function"==typeof this.options.onAllRowSelected){var e={};e.gridObj=this,e.rowObjs=this.dataSourceObj.rows,this.options.onAllRowSelected(e)}},setAllRowUnSelect:function(){if($("#"+this.options.id+"_header_multi_input").attr("checked",!1),"function"==typeof this.options.onBeforeAllRowUnSelected){var e={};if(e.gridObj=this,e.rowObjs=this.dataSourceObj.rows,!this.options.onBeforeAllRowUnSelected(e))return}for(var t=0;t<this.dataSourceObj.rows.length;t++)this.setRowUnselect(t);if("function"==typeof this.options.onAllRowUnSelected){var e={};e.gridObj=this,e.rowObjs=this.dataSourceObj.rows,this.options.onAllRowUnSelected(e)}},getSelectRows:function(){return this.selectRows},getSelectRowsIndex:function(){return this.selectRowsIndex},setRowFocus:function(e){if(this.dataSourceObj.rows[e].focus)return!0;if(!this.dataSourceObj.rows[e])return!0;if("function"==typeof this.options.onBeforeRowFocus){var t={};if(t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,!this.options.onBeforeRowFocus(t))return!1}$("#"+this.options.id+"_content_tbody tr").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_tbody tr a").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_fixed_tbody tr").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_fixed_tbody tr a").removeClass("u-grid-content-focus-row"),this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect").find("div").removeClass("u-grid-content-focus-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol").find("div").removeClass("u-grid-content-focus-row"),this.focusRowObj&&(this.focusRowObj.focus=!1),$("#"+this.options.id+'_content_tbody tr[role="row"]:eq('+e+")").addClass("u-grid-content-focus-row"),$("#"+this.options.id+'_content_tbody tr[role="row"]:eq('+e+") a").addClass("u-grid-content-focus-row"),$("#"+this.options.id+'_content_fixed_tbody tr[role="row"]:eq('+e+")").addClass("u-grid-content-focus-row"),$("#"+this.options.id+'_content_fixed_tbody tr[role="row"]:eq('+e+") a").addClass("u-grid-content-focus-row");var i=e;if(this.eidtRowIndex>-1&&this.eidtRowIndex<e&&"form"==this.editType&&i++,this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect >div:eq("+i+")").addClass("u-grid-content-focus-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol >div:eq("+i+")").addClass("u-grid-content-focus-row"),this.focusRow=this.dataSourceObj.rows[e].value,this.focusRowObj=this.dataSourceObj.rows[e],this.focusRowIndex=e,this.dataSourceObj.rows[e].focus=!0,"function"==typeof this.options.onRowFocus){var t={};t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,this.options.onRowFocus(t)}return this.options.multiSelect||this.setRowSelect(e),!0},setRowUnFocus:function(e){if(!this.dataSourceObj.rows[e])return!0;if("function"==typeof this.options.onBeforeRowUnFocus){var t={};if(t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,!this.options.onBeforeRowUnFocus(t))return!1}if(!this.dataSourceObj.rows[e].focus)return!0;var i=e;if(this.eidtRowIndex>-1&&this.eidtRowIndex<e&&"form"==this.editType&&i++,$("#"+this.options.id+"_content_tbody tr:eq("+i+")").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_tbody tr:eq("+i+") a").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_fixed_tbody tr:eq("+i+")").removeClass("u-grid-content-focus-row"),$("#"+this.options.id+"_content_fixed_tbody tr:eq("+i+") a").removeClass("u-grid-content-focus-row"),this.options.multiSelect&&$("#"+this.options.id+"_content_multiSelect >div:eq("+i+")").removeClass("u-grid-content-focus-row"),this.options.showNumCol&&$("#"+this.options.id+"_content_numCol >div:eq("+i+")").removeClass("u-grid-content-focus-row"),this.dataSourceObj.rows[e].focus=!1,this.focusRow=null,this.focusRowObj=null,this.focusRowIndex=null,"function"==typeof this.options.onRowUnFocus){var t={};t.gridObj=this,t.rowObj=this.dataSourceObj.rows[e],t.rowIndex=e,this.options.onRowUnFocus(t)}return this.options.multiSelect||this.setRowUnselect(e),!0},getFocusRow:function(){return this.focusRow},getFocusRowIndex:function(){return this.focusRowIndex},getAllRows:function(){var e=this;return this.allRows=new Array,this.dataSourceObj.rows&&$.each(this.dataSourceObj.rows,function(){e.allRows.push(this.value)}),this.allRows},getRowByIndex:function(e){return this.dataSourceObj.rows[e]},getRowIndexByValue:function(e,t){var i=-1;return $.each(this.dataSourceObj.rows,function(n){
var o=$(this.value).attr(e);o==t&&(i=n)}),i},getAllChildRow:function(e){return e.allChildRow&&e.allChildRow.length>0?e.allChildRow:(e.allChildRow=new Array,this.getAllChildRowFun(e,e.allChildRow),e.allChildRow)},getAllChildRowIndex:function(e){return e.allChildRowIndex&&e.allChildRowIndex.length>0?e.allChildRowIndex:(e.allChildRowIndex=new Array,this.getAllChildRowIndexFun(e,e.allChildRowIndex),e.allChildRowIndex)},getAllChildRowFun:function(e,t){var i=this;e.childRow.length>0&&(Array.prototype.push.apply(t,e.childRow),$.each(e.childRow,function(){i.getAllChildRowFun(this,t)}))},getAllChildRowIndexFun:function(e,t){var i=this;e.childRowIndex.length>0&&(Array.prototype.push.apply(t,e.childRowIndex),$.each(e.childRow,function(){i.getAllChildRowIndexFun(this,t)}))},setRenderType:function(e,t){var i=this.getColumnByField(e);i.options.renderType=t;var n=this.getIndexOfColumn(i);this.renderTypeByColumn(i,n)},setEditType:function(e,t){var i=this.getColumnByField(e);i.options.editType=t},setEditable:function(e){this.options.editable=e},setShowHeader:function(e){this.options.showHeader=e,e?$("#"+this.options.id+"_header").css("display","block"):$("#"+this.options.id+"_header").css("display","none")},setColumnPrecision:function(e,t){var i=this.getColumnByField(e);i.options.precision=t,this.renderTypeFun(),this.options.showSumRow&&this.repairSumRow()},setMultiSelect:function(e){var t=this.options.multiSelect;t!=e&&(this.options.multiSelect=e,this.initGrid())},setShowNumCol:function(e){var t=this.options.showNumCol;t!=e&&(this.options.showNumCol=e,this.initGrid())}},dataSource.prototype={sortRows:function(e,t){this.gridComp.options.showTree?this.treeSortRows(e,t):this.basicSortRows(e,t),this.gridComp.eidtRowIndex=-1},sortRowsByPrio:function(prioArray,cancelSort){var oThis=this;cancelSort&&(this.rows=new Array,this.options.values&&$.each(this.options.values,function(e){var t={};t.value=this,t.valueIndex=e,oThis.rows.push(t)}));var evalStr=function(e){return e==prioArray.length-1?"by(prioArray["+e+"].field, prioArray["+e+"].sortType)":"by(prioArray["+e+"].field, prioArray["+e+"].sortType,"+evalStr(e+1)+")"},by=function(e,t,i){arguments.callee;return function(n,o){var s=$(n.value).attr(e),r=$(o.value).attr(e),a=oThis.gridComp.getColumnByField(e).options.dataType;if("Float"==a)return s=parseFloat(s),r=parseFloat(r),s!=s?1:r!=r?-1:s==r&&i?i():"asc"==t?s-r:r-s;if("Int"==a)return s=parseInt(s),r=parseInt(r),s!=s?1:r!=r?-1:s==r&&i?i():"asc"==t?s-r:r-s;s=oThis.gridComp.getString(s,""),r=oThis.gridComp.getString(r,"");try{var d=s.localeCompare(r);return 0===d&&i?i():0===d?0:"asc"==t?d:-d}catch(l){return 0}}};this.rows.sort(eval(evalStr(0)))},basicSortRows:function(e,t){var i=this,n="";e&&(n=this.gridComp.getColumnByField(e).options.dataType),"asc"==t?this.rows.sort(function(t,o){var s=$(o.value).attr(e),r=$(t.value).attr(e);if("Float"==n)return s=parseFloat(s),r=parseFloat(r),s!=s?1:r!=r?-1:s-r;if("Int"==n)return s=parseInt(s),r=parseInt(r),s!=s?1:r!=r?-1:s-r;s=i.gridComp.getString(s,""),r=i.gridComp.getString(r,"");try{return s.localeCompare(r)}catch(a){return 0}}):"desc"==t?this.rows.sort(function(t,o){var s=$(t.value).attr(e),r=$(o.value).attr(e);if("Float"==n)return s=parseFloat(s),r=parseFloat(r),s!=s?1:r!=r?-1:s-r;if("Int"==n)return s=parseInt(s),r=parseInt(r),s!=s?1:r!=r?-1:s-r;s=i.gridComp.getString(s,""),r=i.gridComp.getString(r,"");try{return s.localeCompare(r)}catch(a){return 0}}):(this.rows=new Array,this.options.values&&$.each(this.options.values,function(e){var t={};t.value=this,t.valueIndex=e,i.rows.push(t)}))},treeSortRows:function(e,t){var i=this;if(this.rows=new Array,this.hasParentRows=new Array,this.nothasParentRows=new Array,this.options.values){$.each(this.options.values,function(e){var t={},n=$(this),o=i.gridComp.options.keyField,s=i.gridComp.options.parentKeyField,r=i.gridComp.getString(n.attr(o),""),a=i.gridComp.getString(n.attr(s),"");t.valueIndex=e,t.value=this,t.keyValue=r,t.parentKeyValue=a,""==a?i.nothasParentRows.push(t):i.hasParentRows.push(t),i.rows.push(t)}),$.each(this.hasParentRows,function(e){var t=this.parentKeyValue,n=!1;$.each(i.rows,function(){this.keyValue==t&&(n=!0)}),n||(i.hasParentRows.splice(e,0),i.nothasParentRows.push(this))}),i.rows=new Array;var n=0;$.each(this.nothasParentRows,function(e){this.level=n,this.valueIndex=e,i.rows.push(this),i.pushChildRows(this,n)})}},pushChildRows:function(e,t){var i=e.keyValue,n=this,o=parseInt(t)+1,s=!1,r=new Array,a=new Array;$.each(this.hasParentRows,function(e){if(this&&this.parentKeyValue==i){s=!0,this.level=o,this.valueIndex=e,n.rows.push(this),r.push(this);var t=parseInt(n.rows.length-1);a.push(t),n.hasParentRows.splice(e,0),n.pushChildRows(this,o)}}),e.hasChild=s,e.childRow=r,e.childRowIndex=a},getSumValue:function(e,t,i){var n=null;if(t.options.sumCol&&$.each(this.rows,function(o){var s=$(this.value).attr(e);"Int"==t.options.dataType?(s=i.getInt(s,0),n+=parseInt(s)):(s=i.getFloat(s,0),n=i.accAdd(n,parseFloat(s)))}),"Float"==t.options.dataType&&t.options.precision){var o={};o.value=n,o.precision=t.options.precision,n=i.DicimalFormater(o)}return null!=n&&n!=undefined&&"null"!=n&&"undefined"!=n?n+"":""}};var old=$.fn.grid;$.fn.grid=function(e){var t=$(this).data("gridComp");return t||$(this).data("gridComp",t=new gridComp(this,e)),t},$.fn.grid.noConflict=function(){return $.fn.grid=old,this}}(jQuery,window,document),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(e){var t=e.treeObj,i=consts.event;t.bind(i.NODECREATED,function(t,i,n){tools.apply(e.callback.onNodeCreated,[t,i,n])}),t.bind(i.CLICK,function(t,i,n,o,s){tools.apply(e.callback.onClick,[i,n,o,s])}),t.bind(i.EXPAND,function(t,i,n){tools.apply(e.callback.onExpand,[t,i,n])}),t.bind(i.COLLAPSE,function(t,i,n){tools.apply(e.callback.onCollapse,[t,i,n])}),t.bind(i.ASYNC_SUCCESS,function(t,i,n,o){tools.apply(e.callback.onAsyncSuccess,[t,i,n,o])}),t.bind(i.ASYNC_ERROR,function(t,i,n,o,s,r){tools.apply(e.callback.onAsyncError,[t,i,n,o,s,r])}),t.bind(i.REMOVE,function(t,i,n){tools.apply(e.callback.onRemove,[t,i,n])}),t.bind(i.SELECTED,function(t,i,n,o){tools.apply(e.callback.onSelected,[i,n,o])}),t.bind(i.UNSELECTED,function(t,i,n,o){tools.apply(e.callback.onUnSelected,[i,n,o])})},_unbindEvent=function(e){var t=e.treeObj,i=consts.event;t.unbind(i.NODECREATED).unbind(i.CLICK).unbind(i.EXPAND).unbind(i.COLLAPSE).unbind(i.ASYNC_SUCCESS).unbind(i.ASYNC_ERROR).unbind(i.REMOVE).unbind(i.SELECTED).unbind(i.UNSELECTED)},_eventProxy=function(e){var t=e.target,i=data.getSetting(e.data.treeId),n="",o=null,s="",r="",a=null,d=null,l=null;if(tools.eqs(e.type,"mousedown")?r="mousedown":tools.eqs(e.type,"mouseup")?r="mouseup":tools.eqs(e.type,"contextmenu")?r="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(n=tools.getNodeMainDom(t).id,s="switchNode"):(l=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(n=tools.getNodeMainDom(l).id,s="clickNode")):tools.eqs(e.type,"dblclick")&&(r="dblclick",l=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(n=tools.getNodeMainDom(l).id,s="switchNode")),r.length>0&&0==n.length&&(l=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),l&&(n=tools.getNodeMainDom(l).id)),n.length>0)switch(o=data.getNodeCache(i,n),s){case"switchNode":o.isParent&&(tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(i.view.dblClickExpand,[i.treeId,o],i.view.dblClickExpand))?a=handler.onSwitchNode:s="";break;case"clickNode":a=handler.onClickNode}switch(r){case"mousedown":d=handler.onZTreeMousedown;break;case"mouseup":d=handler.onZTreeMouseup;break;case"dblclick":d=handler.onZTreeDblclick;break;case"contextmenu":d=handler.onZTreeContextmenu}var c={stop:!1,node:o,nodeEventType:s,nodeEventCallback:a,treeEventType:r,treeEventCallback:d};return c},_initNode=function(e,t,i,n,o,s,r){if(i){var a=data.getRoot(e),d=e.data.key.children;i.level=t,i.tId=e.treeId+"_"+ ++a.zId,i.parentTId=n?n.tId:null,i.open="string"==typeof i.open?tools.eqs(i.open,"true"):!!i.open,i[d]&&i[d].length>0?(i.isParent=!0,i.zAsync=!0):(i.isParent="string"==typeof i.isParent?tools.eqs(i.isParent,"true"):!!i.isParent,i.open=i.isParent&&!e.async.enable?i.open:!1,i.zAsync=!i.isParent),i.isFirstNode=o,i.isLastNode=s,i.getParentNode=function(){return data.getNodeCache(e,i.parentTId)},i.getPreNode=function(){return data.getPreNode(e,i)},i.getNextNode=function(){return data.getNextNode(e,i)},i.isAjaxing=!1,data.fixPIdKeyValue(e,i)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,i){var n=e.data.key.children;t[n]||(t[n]=[]),t[n].length>0&&(t[n][t[n].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[n][t[n].length-1])),t.isParent=!0,t[n]=t[n].concat(i)},addSelectedNode:function(e,t){var i=data.getRoot(e);data.isSelectedNode(e,t)||i.curSelectedList.push(t)},addCreatedNode:function(e,t){if(e.callback.onNodeCreated||e.view.addDiyDom){var i=data.getRoot(e);i.createdNodes.push(t)}},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,i){for(var n=0,o=_init.afterA.length;o>n;n++)_init.afterA[n].apply(this,arguments)},getBeforeA:function(e,t,i){for(var n=0,o=_init.beforeA.length;o>n;n++)_init.beforeA[n].apply(this,arguments)},getInnerAfterA:function(e,t,i){for(var n=0,o=_init.innerAfterA.length;o>n;n++)_init.innerAfterA[n].apply(this,arguments)},getInnerBeforeA:function(e,t,i){for(var n=0,o=_init.innerBeforeA.length;o>n;n++)_init.innerBeforeA[n].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNextNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():data.getRoot(e),o=0,s=n[i].length-1;s>=o;o++)if(n[i][o]===t)return o==s?null:n[i][o+1];return null},getNodeByParam:function(e,t,i,n){if(!t||!i)return null;for(var o=e.data.key.children,s=0,r=t.length;r>s;s++){if(t[s][i]==n)return t[s];var a=data.getNodeByParam(e,t[s][o],i,n);if(a)return a}return null},getNodeCache:function(e,t){if(!t)return null;var i=caches[e.treeId].nodes[data.getNodeCacheId(t)];return i?i:null},getNodeName:function(e,t){var i=e.data.key.name;return""+t[i]},getNodeTitle:function(e,t){var i=""===e.data.key.title?e.data.key.name:e.data.key.title;return""+t[i]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,i,n){if(!t||!i)return[];for(var o=e.data.key.children,s=[],r=0,a=t.length;a>r;r++)t[r][i]==n&&s.push(t[r]),s=s.concat(data.getNodesByParam(e,t[r][o],i,n));return s},getNodesByParamFuzzy:function(e,t,i,n){if(!t||!i)return[];var o=e.data.key.children,s=[];n=n.toLowerCase();for(var r=0,a=t.length;a>r;r++)"string"==typeof t[r][i]&&t[r][i].toLowerCase().indexOf(n)>-1&&s.push(t[r]),s=s.concat(data.getNodesByParamFuzzy(e,t[r][o],i,n));return s},getNodesByFilter:function(e,t,i,n,o){if(!t)return n?null:[];for(var s=e.data.key.children,r=n?null:[],a=0,d=t.length;d>a;a++){if(tools.apply(i,[t[a],o],!1)){if(n)return t[a];r.push(t[a])}var l=data.getNodesByFilter(e,t[a][s],i,n,o);if(n&&l)return l;r=n?l:r.concat(l)}return r},getPreNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():data.getRoot(e),o=0,s=n[i].length;s>o;o++)if(n[i][o]===t)return 0==o?null:n[i][o-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,i=_init.caches.length;i>t;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,i,n,o,s){for(var r=0,a=_init.nodes.length;a>r;r++)_init.nodes[r].apply(this,arguments)},initRoot:function(e){for(var t=0,i=_init.roots.length;i>t;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,o=i.curSelectedList.length;o>n;n++)if(t===i.curSelectedList[n])return!0;return!1},removeNodeCache:function(e,t){var i=e.data.key.children;if(t[i])for(var n=0,o=t[i].length;o>n;n++)arguments.callee(e,t[i][n]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,o=i.curSelectedList.length;o>n;n++)t!==i.curSelectedList[n]&&data.getNodeCache(e,i.curSelectedList[n].tId)||(i.curSelectedList.splice(n,1),n--,o--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var i=0,n=_init.zTreeTools.length;n>i;i++)_init.zTreeTools[i].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var i=e.data.key.children,n=[];if(tools.isArray(t))for(var o=0,s=t.length;s>o;o++)n.push(t[o]),t[o][i]&&(n=n.concat(data.transformToArrayFormat(e,t[o][i])));else n.push(t),t[i]&&(n=n.concat(data.transformToArrayFormat(e,t[i])));return n},transformTozTreeFormat:function(e,t){var i,n,o=e.data.simpleData.idKey,s=e.data.simpleData.pIdKey,r=e.data.key.children;if(!o||""==o||!t)return[];if(tools.isArray(t)){var a=[],d=[];for(i=0,n=t.length;n>i;i++)d[t[i][o]]=t[i];for(i=0,n=t.length;n>i;i++)d[t[i][s]]&&t[i][o]!=t[i][s]?(d[t[i][s]][r]||(d[t[i][s]][r]=[]),d[t[i][s]][r].push(t[i])):a.push(t[i]);return a}return[t]}},event={bindEvent:function(e){for(var t=0,i=_init.bind.length;i>t;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,i=_init.unbind.length;i>t;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},i=e.treeObj;e.view.txtSelectedEnable||i.bind("selectstart",function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}).css({"-moz-user-select":"-moz-none"}),i.bind("click",t,event.proxy),i.bind("dblclick",t,event.proxy),i.bind("mouseover",t,event.proxy),i.bind("mouseout",t,event.proxy),i.bind("mousedown",t,event.proxy),i.bind("mouseup",t,event.proxy),i.bind("contextmenu",t,event.proxy)},unbindTree:function(e){var t=e.treeObj;t.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var t=[],i=0,n=_init.proxys.length;n>i;i++){var o=_init.proxys[i].apply(this,arguments);if(t.push(o),o.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var i=event.doProxy(e),n=!0,o=!1,s=0,r=i.length;r>s;s++){var a=i[s];a.nodeEventCallback&&(o=!0,n=a.nodeEventCallback.apply(a,[e,a.node])&&n),a.treeEventCallback&&(o=!0,n=a.treeEventCallback.apply(a,[e,a.node])&&n)}return n}},handler={onSwitchNode:function(e,t){var i=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(i.callback.beforeCollapse,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}else{if(0==tools.apply(i.callback.beforeExpand,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}return!0},onClickNode:function(e,t){var i=data.getSetting(e.data.treeId),n=i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(i,t)?0:i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&i.view.selectedMulti?2:1;return 0==tools.apply(i.callback.beforeClick,[i.treeId,t,n],!0)?!0:(0===n?view.cancelPreSelectedNode(i,t):view.selectNode(i,t,2===n),i.treeObj.trigger(consts.event.CLICK,[e,i.treeId,t,n]),!0)},onZTreeMousedown:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseDown,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseDown,[e,i.treeId,t]),!0},onZTreeMouseup:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseUp,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseUp,[e,i.treeId,t]),!0},onZTreeDblclick:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeDblClick,[i.treeId,t],!0)&&tools.apply(i.callback.onDblClick,[e,i.treeId,t]),!0},onZTreeContextmenu:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeRightClick,[i.treeId,t],!0)&&tools.apply(i.callback.onRightClick,[e,i.treeId,t]),"function"!=typeof i.callback.onRightClick}},tools={apply:function(e,t,i){return"function"==typeof e?e.apply(zt,t?t:[]):i},canAsync:function(e,t){var i=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[i]&&t[i].length>0)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var i in e)t[i]=e[i]instanceof Date?new Date(e[i].getTime()):"object"==typeof e[i]?arguments.callee(e[i]):e[i];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},$:function(e,t,i){return t&&"string"!=typeof t&&(i=t,t=""),"string"==typeof e?$(e,i?i.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,i?i.treeObj:null)},getMDom:function(e,t,i){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var n=0,o=i.length;t.tagName&&o>n;n++)if(tools.eqs(t.tagName,i[n].tagName)&&null!==t.getAttribute(i[n].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return $(e).closest("#"+t).length>0},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,i,n){if(!e.data.keep.leaf||!t||t.isParent)if(tools.isArray(i)||(i=[i]),e.data.simpleData.enable&&(i=data.transformTozTreeFormat(e,i)),t){var o=$$(t,consts.id.SWITCH,e),s=$$(t,consts.id.ICON,e),r=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,o,consts.folder.CLOSE),view.replaceIcoClass(t,s,consts.folder.CLOSE),t.open=!1,r.css({display:"none"})),data.addNodesData(e,t,i),view.createNodes(e,t.level+1,i,t),n||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),i),view.createNodes(e,0,i,null)},appendNodes:function(e,t,i,n,o,s){if(!i)return[];for(var r=[],a=e.data.key.children,d=0,l=i.length;l>d;d++){var c=i[d];if(o){var u=n?n:data.getRoot(e),h=u[a],p=h.length==i.length&&0==d,f=d==i.length-1;data.initNode(e,t,c,n,p,f,s),data.addNodeCache(e,c)}var m=[];c[a]&&c[a].length>0&&(m=view.appendNodes(e,t+1,c[a],c,o,s&&c.open)),s&&(view.makeDOMNodeMainBefore(r,e,c),view.makeDOMNodeLine(r,e,c),data.getBeforeA(e,c,r),view.makeDOMNodeNameBefore(r,e,c),data.getInnerBeforeA(e,c,r),view.makeDOMNodeIcon(r,e,c),data.getInnerAfterA(e,c,r),view.makeDOMNodeNameAfter(r,e,c),data.getAfterA(e,c,r),c.isParent&&c.open&&view.makeUlHtml(e,c,r,m.join("")),view.makeDOMNodeMainAfter(r,e,c),data.addCreatedNode(e,c))}return r},appendParentULDom:function(e,t){var i=[],n=$$(t,e);!n.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),n=$$(t,e));var o=$$(t,consts.id.UL,e);o.get(0)&&o.remove();var s=e.data.key.children,r=view.appendNodes(e,t.level+1,t[s],t,!1,!0);view.makeUlHtml(e,t,i,r.join("")),n.append(i.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&l>i;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;l>i;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return setting.async.selfLoadFunc&&"function"==typeof setting.async.selfLoadFunc?setting.async.selfLoadFunc.apply(this,node):$.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,i){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,i]))}}),!0},cancelPreSelectedNode:function(e,t,i){var n,o,s=data.getRoot(e).curSelectedList;for(n=s.length-1;n>=0;n--)if(o=s[n],t===o||!t&&(!i||i!==o)){if($$(o,consts.id.A,e).removeClass(consts.node.CURSELECTED),t){data.removeSelectedNode(e,t),e.treeObj.trigger(consts.event.UNSELECTED,[event,e.treeId,o]);break}s.splice(n,1),e.treeObj.trigger(consts.event.UNSELECTED,[event,e.treeId,o])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);t.createdNodes.length>0;){var i=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,i]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,i])}},createNodes:function(e,t,i,n){if(i&&0!=i.length){var o=data.getRoot(e),s=e.data.key.children,r=!n||n.open||!!$$(n[s][0],e).get(0);o.createdNodes=[];var a=view.appendNodes(e,t,i,n,!0,r);if(n){var d=$$(n,consts.id.UL,e);d.get(0)&&d.append(a.join(""))}else e.treeObj.append(a.join(""));view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,i,n,o){var s=data.getRoot(e),r=e.data.key.children;if(!t)return void tools.apply(o,[]);if(s.expandTriggerFlag){var a=o;o=function(){a&&a(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},s.expandTriggerFlag=!1}if(!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[r]&&t[r].length>0&&!$$(t[r][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open==i)return void tools.apply(o,[]);var d=$$(t,consts.id.UL,e),l=$$(t,consts.id.SWITCH,e),c=$$(t,consts.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&c.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,l,consts.folder.OPEN),view.replaceIcoClass(t,c,consts.folder.OPEN),0==n||""==e.view.expandSpeed?(d.show(),tools.apply(o,[])):t[r]&&t[r].length>0?d.slideDown(e.view.expandSpeed,o):(d.show(),tools.apply(o,[]))):(view.replaceSwitchClass(t,l,consts.folder.CLOSE),view.replaceIcoClass(t,c,consts.folder.CLOSE),0!=n&&""!=e.view.expandSpeed&&t[r]&&t[r].length>0?d.slideUp(e.view.expandSpeed,o):(d.hide(),tools.apply(o,[])))):tools.apply(o,[])},expandCollapseParentNode:function(e,t,i,n,o){if(t){if(!t.parentTId)return void view.expandCollapseNode(e,t,i,n,o);view.expandCollapseNode(e,t,i,n),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),i,n,o)}},expandCollapseSonNode:function(e,t,i,n,o){var s=data.getRoot(e),r=e.data.key.children,a=t?t[r]:s[r],d=t?!1:n,l=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,a)for(var c=0,u=a.length;u>c;c++)a[c]&&view.expandCollapseSonNode(e,a[c],i,d);data.getRoot(e).expandTriggerFlag=l,view.expandCollapseNode(e,t,i,n,o)},isSelectedNode:function(e,t){if(!t)return!1;var i,n=data.getRoot(e).curSelectedList;for(i=n.length-1;i>=0;i--)if(t===n[i])return!0;return!1},makeDOMNodeIcon:function(e,t,i){var n=data.getNodeName(t,i),o=t.view.nameIsHTML?n:n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",i.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,i),"' style='",view.makeNodeIcoStyle(t,i),"'></span><span id='",i.tId,consts.id.SPAN,"'>",o,"</span>")},makeDOMNodeLine:function(e,t,i){e.push("<span id='",i.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,i),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,i){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,i){e.push("<li id='",i.tId,"' class='",consts.className.LEVEL,i.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,i){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,i){var n=data.getNodeTitle(t,i),o=view.makeNodeUrl(t,i),s=view.makeNodeFontCss(t,i),r=[];for(var a in s)r.push(a,":",s[a],";");e.push("<a id='",i.tId,consts.id.A,"' class='",consts.className.LEVEL,i.level,"' treeNode",consts.id.A,' onclick="',i.click||"",'" ',null!=o&&o.length>0?"href='"+o+"'":""," target='",view.makeNodeTarget(i),"' style='",r.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,i],t.view.showTitle)&&n&&e.push("title='",n.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var i=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return i&&"function"!=typeof i?i:{}},makeNodeIcoClass:function(e,t){var i=["ico"];return t.isAjaxing||(i[0]=(t.iconSkin?t.iconSkin+"_":"")+i[0],t.isParent?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU)),consts.className.BUTTON+" "+i.join("_")},makeNodeIcoStyle:function(e,t){var i=[];if(!t.isAjaxing){var n=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon;n&&i.push("background:url(",n,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||i.push("width:0px;height:0px;")}return i.join("")},makeNodeLineClass:function(e,t){var i=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?i.push(consts.line.ROOT):0==t.level&&t.isFirstNode?i.push(consts.line.ROOTS):t.isLastNode?i.push(consts.line.BOTTOM):i.push(consts.line.CENTER):i.push(consts.line.NOLINE),t.isParent?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+i.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var i=e.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(e,t,i,n){i.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),i.push(n),i.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var i=e.data.key.children,n=t[i];if(n){for(var o=0,s=n.length;s>o;o++)data.removeNodeCache(e,n[o]);if(data.removeSelectedNode(e),delete t[i],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{t.isParent=!1,t.open=!1;var r=$$(t,consts.id.SWITCH,e),a=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,r,consts.folder.DOCU),view.replaceIcoClass(t,a,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},setFirstNode:function(e,t){var i=e.data.key.children,n=t[i].length;n>0&&(t[i][0].isFirstNode=!0)},setLastNode:function(e,t){var i=e.data.key.children,n=t[i].length;n>0&&(t[i][n-1].isLastNode=!0)},removeNode:function(e,t){var i=data.getRoot(e),n=e.data.key.children,o=t.parentTId?t.getParentNode():i;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var s=0,r=o[n].length;r>s;s++)if(o[n][s].tId==t.tId){o[n].splice(s,1);break}view.setFirstNode(e,o),view.setLastNode(e,o);var a,d,l,c=o[n].length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&c>0){var u=o[n][c-1];if(a=$$(u,consts.id.UL,e),d=$$(u,consts.id.SWITCH,e),l=$$(u,consts.id.ICON,e),o==i)if(1==o[n].length)view.replaceSwitchClass(u,d,consts.line.ROOT);else{var h=$$(o[n][0],consts.id.SWITCH,e);view.replaceSwitchClass(o[n][0],h,consts.line.ROOTS),view.replaceSwitchClass(u,d,consts.line.BOTTOM)}else view.replaceSwitchClass(u,d,consts.line.BOTTOM);a.removeClass(consts.line.LINE)}}else o.isParent=!1,o.open=!1,a=$$(o,consts.id.UL,e),d=$$(o,consts.id.SWITCH,e),l=$$(o,consts.id.ICON,e),view.replaceSwitchClass(o,d,consts.folder.DOCU),view.replaceIcoClass(o,l,consts.folder.DOCU),a.css("display","none")}},replaceIcoClass:function(e,t,i){if(t&&!e.isAjaxing){var n=t.attr("class");if(void 0!=n){var o=n.split("_");switch(i){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[o.length-1]=i}t.attr("class",o.join("_"))}}},replaceSwitchClass:function(e,t,i){if(t){var n=t.attr("class");if(void 0!=n){var o=n.split("_");switch(i){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:o[0]=view.makeNodeLineClassEx(e)+i;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[1]=i}t.attr("class",o.join("_")),
i!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,i){i||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[event,e.treeId,t])},setNodeFontCss:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeFontCss(e,t);n&&i.css(n)},setNodeLineIcos:function(e,t){if(t){var i=$$(t,consts.id.SWITCH,e),n=$$(t,consts.id.UL,e),o=$$(t,consts.id.ICON,e),s=view.makeUlLineClass(e,t);0==s.length?n.removeClass(consts.line.LINE):n.addClass(s),i.attr("class",view.makeNodeLineClass(e,t)),t.isParent?i.removeAttr("disabled"):i.attr("disabled","disabled"),o.removeAttr("style"),o.attr("style",view.makeNodeIcoStyle(e,t)),o.attr("class",view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var i=data.getNodeTitle(e,t),n=$$(t,consts.id.SPAN,e);if(n.empty(),e.view.nameIsHTML?n.html(data.getNodeName(e,t)):n.text(data.getNodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)){var o=$$(t,consts.id.A,e);o.attr("title",i?i:"")}},setNodeTarget:function(e,t){var i=$$(t,consts.id.A,e);i.attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeUrl(e,t);null==n||0==n.length?i.removeAttr("href"):i.attr("href",n)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t?t:null},destroy:function(e){if(e&&e.length>0)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,i){var n=tools.clone(_setting);$.extend(!0,n,t),n.treeId=e.attr("id"),n.treeObj=e,n.treeObj.empty(),settings[n.treeId]=n,"undefined"==typeof document.body.style.maxHeight&&(n.view.expandSpeed=""),data.initRoot(n);var o=data.getRoot(n),s=n.data.key.children;i=i?tools.clone(tools.isArray(i)?i:[i]):[],n.data.simpleData.enable?o[s]=data.transformTozTreeFormat(n,i):o[s]=i,data.initCache(n),event.unbindTree(n),event.bindTree(n),event.unbindEvent(n),event.bindEvent(n);var r={setting:n,addNodes:function(e,t,i){function o(){view.addNodes(n,e,s,1==i)}if(!t)return null;if(e||(e=null),e&&!e.isParent&&n.data.keep.leaf)return null;var s=tools.clone(tools.isArray(t)?t:[t]);return tools.canAsync(n,e)?view.asyncNode(n,e,i,o):o(),s},cancelSelectedNode:function(e){view.cancelPreSelectedNode(n,e)},destroy:function(){view.destroy(n)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(n,null,e,!0),e},expandNode:function(e,t,i,o,s){if(!e||!e.isParent)return null;if(t!==!0&&t!==!1&&(t=!e.open),s=!!s,s&&t&&0==tools.apply(n.callback.beforeExpand,[n.treeId,e],!0))return null;if(s&&!t&&0==tools.apply(n.callback.beforeCollapse,[n.treeId,e],!0))return null;if(t&&e.parentTId&&view.expandCollapseParentNode(n,e.getParentNode(),t,!1),t===e.open&&!i)return null;if(data.getRoot(n).expandTriggerFlag=s,!tools.canAsync(n,e)&&i)view.expandCollapseSonNode(n,e,t,!0,function(){if(o!==!1)try{$$(e,n).focus().blur()}catch(t){}});else if(e.open=!t,view.switchNode(this.setting,e),o!==!1)try{$$(e,n).focus().blur()}catch(r){}return t},getNodes:function(){return data.getNodes(n)},getNodeByParam:function(e,t,i){return e?data.getNodeByParam(n,i?i[n.data.key.children]:data.getNodes(n),e,t):null},getNodeByTId:function(e){return data.getNodeCache(n,e)},getNodesByParam:function(e,t,i){return e?data.getNodesByParam(n,i?i[n.data.key.children]:data.getNodes(n),e,t):null},getNodesByParamFuzzy:function(e,t,i){return e?data.getNodesByParamFuzzy(n,i?i[n.data.key.children]:data.getNodes(n),e,t):null},getNodesByFilter:function(e,t,i,o){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(n,i?i[n.data.key.children]:data.getNodes(n),e,t,o):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=n.data.key.children,i=e.parentTId?e.getParentNode():data.getRoot(n),o=0,s=i[t].length;s>o;o++)if(i[t][o]==e)return o;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(n).curSelectedList,i=0,o=t.length;o>i;i++)e.push(t[i]);return e},isSelectedNode:function(e){return data.isSelectedNode(n,e)},reAsyncChildNodes:function(e,t,i){if(this.setting.async.enable){var o=!e;if(o&&(e=data.getRoot(n)),"refresh"==t){for(var s=this.setting.data.key.children,r=0,a=e[s]?e[s].length:0;a>r;r++)data.removeNodeCache(n,e[s][r]);if(data.removeSelectedNode(n),e[s]=[],o)this.setting.treeObj.empty();else{var d=$$(e,consts.id.UL,n);d.empty()}}view.asyncNode(this.setting,o?null:e,!!i)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(n),t=e[n.data.key.children];data.initRoot(n),e[n.data.key.children]=t,data.initCache(n),view.createNodes(n,0,e[n.data.key.children])},removeChildNodes:function(e){if(!e)return null;var t=n.data.key.children,i=e[t];return view.removeChildNodes(n,e),i?i:null},removeNode:function(e,t){e&&(t=!!t,t&&0==tools.apply(n.callback.beforeRemove,[n.treeId,e],!0)||(view.removeNode(n,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[n.treeId,e])))},selectNode:function(e,t){if(e&&tools.uCanDo(n)){if(t=n.view.selectedMulti&&t,e.parentTId)view.expandCollapseParentNode(n,e.getParentNode(),!0,!1,function(){try{$$(e,n).focus().blur()}catch(t){}});else try{$$(e,n).focus().blur()}catch(i){}view.selectNode(n,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(n,e)},transformToArray:function(e){return data.transformToArrayFormat(n,e)},updateNode:function(e,t){if(e){var i=$$(e,n);i.get(0)&&tools.uCanDo(n)&&(view.setNodeName(n,e),view.setNodeTarget(n,e),view.setNodeUrl(n,e),view.setNodeLineIcos(n,e),view.setNodeFontCss(n,e))}}};return o.treeTools=r,data.setZTreeTools(n,r),o[s]&&o[s].length>0?view.createNodes(n,0,o[s]):n.async.enable&&n.async.url&&""!==n.async.url&&view.asyncNode(n),r}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},i={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},n=function(e){var t=_.getRoot(e);t.radioCheckedList=[]},o=function(e){},s=function(e){var t=e.treeObj,i=b.event;t.bind(i.CHECK,function(t,i,n,o){t.srcEvent=i,w.apply(e.callback.onCheck,[t,n,o])})},r=function(e){var t=e.treeObj,i=b.event;t.unbind(i.CHECK)},a=function(e){var t=e.target,i=_.getSetting(e.data.treeId),n="",o=null,s="",r="",a=null,d=null;if(w.eqs(e.type,"mouseover")?i.check.enable&&w.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+b.id.CHECK)&&(n=w.getNodeMainDom(t).id,s="mouseoverCheck"):w.eqs(e.type,"mouseout")?i.check.enable&&w.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+b.id.CHECK)&&(n=w.getNodeMainDom(t).id,s="mouseoutCheck"):w.eqs(e.type,"click")&&i.check.enable&&w.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+b.id.CHECK)&&(n=w.getNodeMainDom(t).id,s="checkNode"),n.length>0)switch(o=_.getNodeCache(i,n),s){case"checkNode":a=p.onCheckNode;break;case"mouseoverCheck":a=p.onMouseoverCheck;break;case"mouseoutCheck":a=p.onMouseoutCheck}var l={stop:"checkNode"===s,node:o,nodeEventType:s,nodeEventCallback:a,treeEventType:r,treeEventCallback:d};return l},d=function(e,t,i,n,o,s,r){if(i){var a=e.data.key.checked;if("string"==typeof i[a]&&(i[a]=w.eqs(i[a],"true")),i[a]=!!i[a],i.checkedOld=i[a],"string"==typeof i.nocheck&&(i.nocheck=w.eqs(i.nocheck,"true")),i.nocheck=!!i.nocheck||e.check.nocheckInherit&&n&&!!n.nocheck,"string"==typeof i.chkDisabled&&(i.chkDisabled=w.eqs(i.chkDisabled,"true")),i.chkDisabled=!!i.chkDisabled||e.check.chkDisabledInherit&&n&&!!n.chkDisabled,"string"==typeof i.halfCheck&&(i.halfCheck=w.eqs(i.halfCheck,"true")),i.halfCheck=!!i.halfCheck,i.check_Child_State=-1,i.check_Focus=!1,i.getCheckStatus=function(){return _.getCheckStatus(e,i)},e.check.chkStyle==b.radio.STYLE&&e.check.radioType==b.radio.TYPE_ALL&&i[a]){var d=_.getRoot(e);d.radioCheckedList.push(i)}}},l=function(e,t,i){e.data.key.checked;e.check.enable&&(_.makeChkFlag(e,t),i.push("<span ID='",t.tId,b.id.CHECK,"' class='",y.makeChkClass(e,t),"' treeNode",b.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))},c=function(e,t){t.checkNode=function(e,t,i,n){var o=this.setting.data.key.checked;if(e.chkDisabled!==!0&&(t!==!0&&t!==!1&&(t=!e[o]),n=!!n,(e[o]!==t||i)&&(!n||0!=w.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&w.uCanDo(this.setting)&&this.setting.check.enable&&e.nocheck!==!0)){e[o]=t;var s=C(e,b.id.CHECK,this.setting);(i||this.setting.check.chkStyle===b.radio.STYLE)&&y.checkNodeRelation(this.setting,e),y.setChkClass(this.setting,s,e),y.repairParentChkClassWithSelf(this.setting,e),n&&this.setting.treeObj.trigger(b.event.CHECK,[null,this.setting.treeId,e])}},t.checkAllNodes=function(e){y.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=e!==!1,_.getTreeCheckedNodes(this.setting,_.getRoot(this.setting)[t],e)},t.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return _.getTreeChangeCheckedNodes(this.setting,_.getRoot(this.setting)[e])},t.setChkDisabled=function(e,t,i,n){t=!!t,i=!!i,n=!!n,y.repairSonChkDisabled(this.setting,e,t,n),y.repairParentChkDisabled(this.setting,e.getParentNode(),t,i)};var i=t.updateNode;t.updateNode=function(e,n){if(i&&i.apply(t,arguments),e&&this.setting.check.enable){var o=C(e,this.setting);if(o.get(0)&&w.uCanDo(this.setting)){var s=C(e,b.id.CHECK,this.setting);(1==n||this.setting.check.chkStyle===b.radio.STYLE)&&y.checkNodeRelation(this.setting,e),y.setChkClass(this.setting,s,e),y.repairParentChkClassWithSelf(this.setting,e)}}}},u={getRadioCheckedList:function(e){for(var t=_.getRoot(e).radioCheckedList,i=0,n=t.length;n>i;i++)_.getNodeCache(e,t[i].tId)||(t.splice(i,1),i--,n--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var i=e.data.key.checked,n={checked:t[i],half:t.halfCheck?t.halfCheck:e.check.chkStyle==b.radio.STYLE?2===t.check_Child_State:t[i]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0};return n},getTreeCheckedNodes:function(e,t,i,n){if(!t)return[];var o=e.data.key.children,s=e.data.key.checked,r=i&&e.check.chkStyle==b.radio.STYLE&&e.check.radioType==b.radio.TYPE_ALL;n=n?n:[];for(var a=0,d=t.length;d>a&&(t[a].nocheck===!0||t[a].chkDisabled===!0||t[a][s]!=i||(n.push(t[a]),!r))&&(_.getTreeCheckedNodes(e,t[a][o],i,n),!(r&&n.length>0));a++);return n},getTreeChangeCheckedNodes:function(e,t,i){if(!t)return[];var n=e.data.key.children,o=e.data.key.checked;i=i?i:[];for(var s=0,r=t.length;r>s;s++)t[s].nocheck!==!0&&t[s].chkDisabled!==!0&&t[s][o]!=t[s].checkedOld&&i.push(t[s]),_.getTreeChangeCheckedNodes(e,t[s][n],i);return i},makeChkFlag:function(e,t){if(t){var i=e.data.key.children,n=e.data.key.checked,o=-1;if(t[i])for(var s=0,r=t[i].length;r>s;s++){var a=t[i][s],d=-1;if(e.check.chkStyle==b.radio.STYLE){if(d=a.nocheck===!0||a.chkDisabled===!0?a.check_Child_State:a.halfCheck===!0?2:a[n]?2:a.check_Child_State>0?2:0,2==d){o=2;break}0==d&&(o=0)}else if(e.check.chkStyle==b.checkbox.STYLE){if(d=a.nocheck===!0||a.chkDisabled===!0?a.check_Child_State:a.halfCheck===!0?1:a[n]?-1===a.check_Child_State||2===a.check_Child_State?2:1:a.check_Child_State>0?1:0,1===d){o=1;break}if(2===d&&o>-1&&s>0&&d!==o){o=1;break}if(2===o&&d>-1&&2>d){o=1;break}d>-1&&(o=d)}}t.check_Child_State=o}}},h={},p={onCheckNode:function(e,t){if(t.chkDisabled===!0)return!1;var i=_.getSetting(e.data.treeId),n=i.data.key.checked;if(0==w.apply(i.callback.beforeCheck,[i.treeId,t],!0))return!0;t[n]=!t[n],y.checkNodeRelation(i,t);var o=C(t,b.id.CHECK,i);return y.setChkClass(i,o,t),y.repairParentChkClassWithSelf(i,t),i.treeObj.trigger(b.event.CHECK,[e,i.treeId,t]),!0},onMouseoverCheck:function(e,t){if(t.chkDisabled===!0)return!1;var i=_.getSetting(e.data.treeId),n=C(t,b.id.CHECK,i);return t.check_Focus=!0,y.setChkClass(i,n,t),!0},onMouseoutCheck:function(e,t){if(t.chkDisabled===!0)return!1;var i=_.getSetting(e.data.treeId),n=C(t,b.id.CHECK,i);return t.check_Focus=!1,y.setChkClass(i,n,t),!0}},f={},m={checkNodeRelation:function(e,t){var i,n,o,s=e.data.key.children,r=e.data.key.checked,a=b.radio;if(e.check.chkStyle==a.STYLE){var d=_.getRadioCheckedList(e);if(t[r])if(e.check.radioType==a.TYPE_ALL){for(n=d.length-1;n>=0;n--)i=d[n],i[r]&&i!=t&&(i[r]=!1,d.splice(n,1),y.setChkClass(e,C(i,b.id.CHECK,e),i),i.parentTId!=t.parentTId&&y.repairParentChkClassWithSelf(e,i));d.push(t)}else{var l=t.parentTId?t.getParentNode():_.getRoot(e);for(n=0,o=l[s].length;o>n;n++)i=l[s][n],i[r]&&i!=t&&(i[r]=!1,y.setChkClass(e,C(i,b.id.CHECK,e),i))}else if(e.check.radioType==a.TYPE_ALL)for(n=0,o=d.length;o>n;n++)if(t==d[n]){d.splice(n,1);break}}else t[r]&&(!t[s]||0==t[s].length||e.check.chkboxType.Y.indexOf("s")>-1)&&y.setSonNodeCheckBox(e,t,!0),t[r]||t[s]&&0!=t[s].length&&!(e.check.chkboxType.N.indexOf("s")>-1)||y.setSonNodeCheckBox(e,t,!1),t[r]&&e.check.chkboxType.Y.indexOf("p")>-1&&y.setParentNodeCheckBox(e,t,!0),!t[r]&&e.check.chkboxType.N.indexOf("p")>-1&&y.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var i=e.data.key.checked,n=b.checkbox,o=b.radio,s="";s=t.chkDisabled===!0?n.DISABLED:t.halfCheck?n.PART:e.check.chkStyle==o.STYLE?t.check_Child_State<1?n.FULL:n.PART:t[i]?2===t.check_Child_State||-1===t.check_Child_State?n.FULL:n.PART:t.check_Child_State<1?n.FULL:n.PART;var r=e.check.chkStyle+"_"+(t[i]?n.TRUE:n.FALSE)+"_"+s;return r=t.check_Focus&&t.chkDisabled!==!0?r+"_"+n.FOCUS:r,b.className.BUTTON+" "+n.DEFAULT+" "+r},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===b.checkbox.STYLE)for(var i=e.data.key.checked,n=e.data.key.children,o=_.getRoot(e),s=0,r=o[n].length;r>s;s++){var a=o[n][s];a.nocheck!==!0&&a.chkDisabled!==!0&&(a[i]=t),y.setSonNodeCheckBox(e,a,t)}},repairChkClass:function(e,t){if(t&&(_.makeChkFlag(e,t),t.nocheck!==!0)){var i=C(t,b.id.CHECK,e);y.setChkClass(e,i,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var i=t.getParentNode();y.repairChkClass(e,i),y.repairParentChkClass(e,i)}},repairParentChkClassWithSelf:function(e,t){if(t){var i=e.data.key.children;t[i]&&t[i].length>0?y.repairParentChkClass(e,t[i][0]):y.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,i,n){if(t){var o=e.data.key.children;if(t.chkDisabled!=i&&(t.chkDisabled=i),y.repairChkClass(e,t),t[o]&&n)for(var s=0,r=t[o].length;r>s;s++){var a=t[o][s];y.repairSonChkDisabled(e,a,i,n)}}},repairParentChkDisabled:function(e,t,i,n){t&&(t.chkDisabled!=i&&n&&(t.chkDisabled=i),y.repairChkClass(e,t),y.repairParentChkDisabled(e,t.getParentNode(),i,n))},setChkClass:function(e,t,i){t&&(i.nocheck===!0?t.hide():t.show(),t.attr("class",y.makeChkClass(e,i)))},setParentNodeCheckBox:function(e,t,i,n){var o=e.data.key.children,s=e.data.key.checked,r=C(t,b.id.CHECK,e);if(n||(n=t),_.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(t[s]=i,y.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=n&&e.treeObj.trigger(b.event.CHECK,[null,e.treeId,t])),t.parentTId){var a=!0;if(!i)for(var d=t.getParentNode()[o],l=0,c=d.length;c>l;l++)if(d[l].nocheck!==!0&&d[l].chkDisabled!==!0&&d[l][s]||(d[l].nocheck===!0||d[l].chkDisabled===!0)&&d[l].check_Child_State>0){a=!1;break}a&&y.setParentNodeCheckBox(e,t.getParentNode(),i,n)}},setSonNodeCheckBox:function(e,t,i,n){if(t){var o=e.data.key.children,s=e.data.key.checked,r=C(t,b.id.CHECK,e);n||(n=t);var a=!1;if(t[o])for(var d=0,l=t[o].length;l>d&&t.chkDisabled!==!0;d++){var c=t[o][d];y.setSonNodeCheckBox(e,c,i,n),c.chkDisabled===!0&&(a=!0)}t!=_.getRoot(e)&&t.chkDisabled!==!0&&(a&&t.nocheck!==!0&&_.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(t[s]=i,a||(t.check_Child_State=t[o]&&t[o].length>0?i?2:0:-1)):t.check_Child_State=-1,y.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=n&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(b.event.CHECK,[null,e.treeId,t]))}}},g={tools:f,view:m,event:h,data:u};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,g);var v=e.fn.zTree,w=v._z.tools,b=v.consts,y=v._z.view,_=v._z.data,C=(v._z.event,w.$);_.exSetting(i),_.addInitBind(s),_.addInitUnBind(r),_.addInitCache(o),_.addInitNode(d),_.addInitProxy(a,!0),_.addInitRoot(n),_.addBeforeA(l),_.addZTreeTools(c);var k=y.createNodes;y.createNodes=function(e,t,i,n){k&&k.apply(y,arguments),i&&y.repairParentChkClassWithSelf(e,n)};var x=y.removeNode;y.removeNode=function(e,t){var i=t.getParentNode();x&&x.apply(y,arguments),t&&i&&(y.repairChkClass(e,i),y.repairParentChkClass(e,i))};var T=y.appendNodes;y.appendNodes=function(e,t,i,n,o,s){var r="";return T&&(r=T.apply(y,arguments)),n&&_.makeChkFlag(e,n),r}}(jQuery),function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},i={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},n=function(e){var t=y.getRoot(e),i=y.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=new Array,i.showHoverDom=!0},o=function(e){},s=function(e){var t=e.treeObj,i=w.event;t.bind(i.RENAME,function(t,i,n,o){v.apply(e.callback.onRename,[t,i,n,o])}),t.bind(i.DRAG,function(t,i,n,o){v.apply(e.callback.onDrag,[i,n,o])}),t.bind(i.DRAGMOVE,function(t,i,n,o){v.apply(e.callback.onDragMove,[i,n,o])}),t.bind(i.DROP,function(t,i,n,o,s,r,a){v.apply(e.callback.onDrop,[i,n,o,s,r,a])})},r=function(e){var t=e.treeObj,i=w.event;t.unbind(i.RENAME),t.unbind(i.DRAG),t.unbind(i.DRAGMOVE),t.unbind(i.DROP)},a=function(e){var t=e.target,i=y.getSetting(e.data.treeId),n=e.relatedTarget,o="",s=null,r="",a="",d=null,l=null,c=null;if(v.eqs(e.type,"mouseover")?(c=v.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+w.id.A}]),c&&(o=v.getNodeMainDom(c).id,r="hoverOverNode")):v.eqs(e.type,"mouseout")?(c=v.getMDom(i,n,[{tagName:"a",attrName:"treeNode"+w.id.A}]),c||(o="remove",r="hoverOutNode")):v.eqs(e.type,"mousedown")&&(c=v.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+w.id.A}]),c&&(o=v.getNodeMainDom(c).id,r="mousedownNode")),o.length>0)switch(s=y.getNodeCache(i,o),r){case"mousedownNode":d=h.onMousedownNode;break;case"hoverOverNode":d=h.onHoverOverNode;break;case"hoverOutNode":d=h.onHoverOutNode}var u={stop:!1,node:s,nodeEventType:r,nodeEventCallback:d,treeEventType:a,treeEventCallback:l};return u},d=function(e,t,i,n,o,s,r){i&&(i.isHover=!1,i.editNameFlag=!1)},l=function(e,t){t.cancelEditName=function(e){var t=y.getRoot(this.setting);t.curEditNode&&b.cancelCurEditNode(this.setting,e?e:null,!0)},t.copyNode=function(e,t,i,n){function o(){b.addNodes(s.setting,e,[r],n)}if(!t)return null;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===w.move.TYPE_INNER)return null;var s=this,r=v.clone(t);return e||(e=null,i=w.move.TYPE_INNER),i==w.move.TYPE_INNER?v.canAsync(this.setting,e)?b.asyncNode(this.setting,e,n,o):o():(b.addNodes(this.setting,e.parentNode,[r],n),b.moveNode(this.setting,e,r,i,!1,n)),r},t.editName=function(e){e&&e.tId&&e===y.getNodeCache(this.setting,e.tId)&&(e.parentTId&&b.expandCollapseParentNode(this.setting,e.getParentNode(),!0),b.editNode(this.setting,e))},t.moveNode=function(e,t,i,n){function o(){b.moveNode(s.setting,e,t,i,!1,n)}if(!t)return t;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===w.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&i==w.move.TYPE_INNER||_(t,this.setting).find("#"+e.tId).length>0))return null;e||(e=null);var s=this;return v.canAsync(this.setting,e)&&i===w.move.TYPE_INNER?b.asyncNode(this.setting,e,n,o):o(),t},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}},c={setSonNodeLevel:function(e,t,i){if(i){var n=e.data.key.children;if(i.level=t?t.level+1:0,i[n])for(var o=0,s=i[n].length;s>o;o++)i[n][o]&&y.setSonNodeLevel(e,i,i[n][o])}}},u={},h={onHoverOverNode:function(e,t){var i=y.getSetting(e.data.treeId),n=y.getRoot(i);n.curHoverNode!=t&&h.onHoverOutNode(e),n.curHoverNode=t,b.addHoverDom(i,t)},onHoverOutNode:function(e,t){var i=y.getSetting(e.data.treeId),n=y.getRoot(i);n.curHoverNode&&!y.isSelectedNode(i,n.curHoverNode)&&(b.removeTreeDom(i,n.curHoverNode),n.curHoverNode=null)},onMousedownNode:function(i,n){function o(i){if(0==c.dragFlag&&Math.abs(A-i.clientX)<l.edit.drag.minMoveSize&&Math.abs(O-i.clientY)<l.edit.drag.minMoveSize)return!0;var n,o,r,a,d,h=l.data.key.children;if(M.css("cursor","pointer"),0==c.dragFlag){if(0==v.apply(l.callback.beforeDrag,[l.treeId,f],!0))return s(i),!0;for(n=0,o=f.length;o>n;n++)0==n&&(c.dragNodeShowBefore=[]),r=f[n],r.isParent&&r.open?(b.expandCollapseNode(l,r,!r.open),c.dragNodeShowBefore[r.tId]=!0):c.dragNodeShowBefore[r.tId]=!1;c.dragFlag=1,u.showHoverDom=!1,v.showIfameMask(l,!0);var p=!0,$=-1;if(f.length>1){var F=f[0].parentTId?f[0].getParentNode()[h]:y.getNodes(l);for(d=[],n=0,o=F.length;o>n;n++)if(void 0!==c.dragNodeShowBefore[F[n].tId]&&(p&&$>-1&&$+1!==n&&(p=!1),d.push(F[n]),$=n),f.length===d.length){f=d;break}}for(p&&(k=f[0].getPreNode(),x=f[f.length-1].getNextNode()),m=_("<ul class='zTreeDragUL'></ul>",l),n=0,o=f.length;o>n;n++)r=f[n],r.editNameFlag=!1,b.selectNode(l,r,n>0),b.removeTreeDom(l,r),n>l.edit.drag.maxShowNodeNum-1||(a=_("<li id='"+r.tId+"_tmp'></li>",l),a.append(_(r,w.id.A,l).clone()),a.css("padding","0"),a.children("#"+r.tId+w.id.A).removeClass(w.node.CURSELECTED),m.append(a),n==l.edit.drag.maxShowNodeNum-1&&(a=_("<li id='"+r.tId+"_moretmp'><a>  ...  </a></li>",l),m.append(a)));m.attr("id",f[0].tId+w.id.UL+"_tmp"),m.addClass(l.treeObj.attr("class")),m.appendTo(M),g=_("<span class='tmpzTreeMove_arrow'></span>",l),g.attr("id","zTreeMove_arrow_tmp"),g.appendTo(M),l.treeObj.trigger(w.event.DRAG,[i,l.treeId,f])}if(1==c.dragFlag){if(C&&g.attr("id")==i.target.id&&E&&i.clientX+T.scrollLeft()+2>e("#"+E+w.id.A,C).offset().left){var P=e("#"+E+w.id.A,C);i.target=P.length>0?P.get(0):i.target}else C&&(C.removeClass(w.node.TMPTARGET_TREE),E&&e("#"+E+w.id.A,C).removeClass(w.node.TMPTARGET_NODE+"_"+w.move.TYPE_PREV).removeClass(w.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(w.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER));C=null,E=null,S=!1,N=l;var j=y.getSettings();for(var Y in j)j[Y].treeId&&j[Y].edit.enable&&j[Y].treeId!=l.treeId&&(i.target.id==j[Y].treeId||e(i.target).parents("#"+j[Y].treeId).length>0)&&(S=!0,N=j[Y]);var H=T.scrollTop(),W=T.scrollLeft(),B=N.treeObj.offset(),V=N.treeObj.get(0).scrollHeight,U=N.treeObj.get(0).scrollWidth,z=i.clientY+H-B.top,q=N.treeObj.height()+B.top-i.clientY-H,G=i.clientX+W-B.left,X=N.treeObj.width()+B.left-i.clientX-W,K=z<l.edit.drag.borderMax&&z>l.edit.drag.borderMin,Z=q<l.edit.drag.borderMax&&q>l.edit.drag.borderMin,J=G<l.edit.drag.borderMax&&G>l.edit.drag.borderMin,Q=X<l.edit.drag.borderMax&&X>l.edit.drag.borderMin,ee=z>l.edit.drag.borderMin&&q>l.edit.drag.borderMin&&G>l.edit.drag.borderMin&&X>l.edit.drag.borderMin,te=K&&N.treeObj.scrollTop()<=0,ie=Z&&N.treeObj.scrollTop()+N.treeObj.height()+10>=V,ne=J&&N.treeObj.scrollLeft()<=0,oe=Q&&N.treeObj.scrollLeft()+N.treeObj.width()+10>=U;if(i.target&&v.isChildOrSelf(i.target,N.treeId)){for(var se=i.target;se&&se.tagName&&!v.eqs(se.tagName,"li")&&se.id!=N.treeId;)se=se.parentNode;var re=!0;for(n=0,o=f.length;o>n;n++){if(r=f[n],se.id===r.tId){re=!1;break}if(_(r,l).find("#"+se.id).length>0){re=!1;break}}re&&i.target&&v.isChildOrSelf(i.target,se.id+w.id.A)&&(C=e(se),E=se.id)}r=f[0],ee&&v.isChildOrSelf(i.target,N.treeId)&&(!C&&(i.target.id==N.treeId||te||ie||ne||oe)&&(S||!S&&r.parentTId)&&(C=N.treeObj),K?N.treeObj.scrollTop(N.treeObj.scrollTop()-10):Z&&N.treeObj.scrollTop(N.treeObj.scrollTop()+10),J?N.treeObj.scrollLeft(N.treeObj.scrollLeft()-10):Q&&N.treeObj.scrollLeft(N.treeObj.scrollLeft()+10),C&&C!=N.treeObj&&C.offset().left<N.treeObj.offset().left&&N.treeObj.scrollLeft(N.treeObj.scrollLeft()+C.offset().left-N.treeObj.offset().left)),m.css({top:i.clientY+H+3+"px",left:i.clientX+W+3+"px"});var ae=0,de=0;if(C&&C.attr("id")!=N.treeId){var le=null==E?null:y.getNodeCache(N,E),ce=(i.ctrlKey||i.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy,ue=!(!k||E!==k.tId),he=!(!x||E!==x.tId),pe=r.parentTId&&r.parentTId==E,fe=(ce||!he)&&v.apply(N.edit.drag.prev,[N.treeId,f,le],!!N.edit.drag.prev),me=(ce||!ue)&&v.apply(N.edit.drag.next,[N.treeId,f,le],!!N.edit.drag.next),ge=(ce||!pe)&&!(N.data.keep.leaf&&!le.isParent)&&v.apply(N.edit.drag.inner,[N.treeId,f,le],!!N.edit.drag.inner);if(fe||me||ge){var ve=e("#"+E+w.id.A,C),we=le.isLastNode?null:e("#"+le.getNextNode().tId+w.id.A,C.next()),be=ve.offset().top,ye=ve.offset().left,_e=fe?ge?.25:me?.5:1:-1,Ce=me?ge?.75:fe?.5:0:-1,ke=(i.clientY+H-be)/ve.height();if((1==_e||_e>=ke&&ke>=-.2)&&fe?(ae=1-g.width(),de=be-g.height()/2,R=w.move.TYPE_PREV):(0==Ce||ke>=Ce&&1.2>=ke)&&me?(ae=1-g.width(),de=null==we||le.isParent&&le.open?be+ve.height()-g.height()/2:we.offset().top-g.height()/2,R=w.move.TYPE_NEXT):(ae=5-g.width(),de=be,R=w.move.TYPE_INNER),g.css({display:"block",top:de+"px",left:ye+ae+"px"}),ve.addClass(w.node.TMPTARGET_NODE+"_"+R),(D!=E||I!=R)&&(L=(new Date).getTime()),le&&le.isParent&&R==w.move.TYPE_INNER){var xe=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==le.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===le.tId&&(xe=!1),xe&&(window.zTreeMoveTimer=setTimeout(function(){R==w.move.TYPE_INNER&&le&&le.isParent&&!le.open&&(new Date).getTime()-L>N.edit.drag.autoOpenTime&&v.apply(N.callback.beforeDragOpen,[N.treeId,le],!0)&&(b.switchNode(N,le),N.edit.drag.autoExpandTrigger&&N.treeObj.trigger(w.event.EXPAND,[N.treeId,le]))},N.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=le.tId)}}else C=null,E="",R=w.move.TYPE_INNER,g.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else R=w.move.TYPE_INNER,C&&v.apply(N.edit.drag.inner,[N.treeId,f,null],!!N.edit.drag.inner)?C.addClass(w.node.TMPTARGET_TREE):C=null,g.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);D=E,I=R,l.treeObj.trigger(w.event.DRAGMOVE,[i,l.treeId,f])}return!1}function s(i){function n(){if(S){if(!p)for(var e=0,t=f.length;t>e;e++)b.removeNode(l,f[e]);if(R==w.move.TYPE_INNER)b.addNodes(N,k,x);else if(b.addNodes(N,k.getParentNode(),x),R==w.move.TYPE_PREV)for(e=0,t=x.length;t>e;e++)b.moveNode(N,k,x[e],R,!1);else for(e=-1,t=x.length-1;t>e;t--)b.moveNode(N,k,x[t],R,!1)}else if(p&&R==w.move.TYPE_INNER)b.addNodes(N,k,x);else if(p&&b.addNodes(N,k.getParentNode(),x),R!=w.move.TYPE_NEXT)for(e=0,t=x.length;t>e;e++)b.moveNode(N,k,x[e],R,!1);else for(e=-1,t=x.length-1;t>e;t--)b.moveNode(N,k,x[t],R,!1);b.selectNodes(N,x),_(x[0],l).focus().blur(),l.treeObj.trigger(w.event.DROP,[i,N.treeId,x,k,R,p])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),D=null,I=null,T.unbind("mousemove",o),T.unbind("mouseup",s),T.unbind("selectstart",r),M.css("cursor","auto"),C&&(C.removeClass(w.node.TMPTARGET_TREE),E&&e("#"+E+w.id.A,C).removeClass(w.node.TMPTARGET_NODE+"_"+w.move.TYPE_PREV).removeClass(w.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(w.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),v.showIfameMask(l,!1),u.showHoverDom=!0,0!=c.dragFlag){c.dragFlag=0;var a,d,h;for(a=0,d=f.length;d>a;a++)h=f[a],h.isParent&&c.dragNodeShowBefore[h.tId]&&!h.open&&(b.expandCollapseNode(l,h,!h.open),delete c.dragNodeShowBefore[h.tId]);m&&m.remove(),g&&g.remove();var p=(i.ctrlKey||i.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy;if(!p&&C&&E&&f[0].parentTId&&E==f[0].parentTId&&R==w.move.TYPE_INNER&&(C=null),C){var k=null==E?null:y.getNodeCache(N,E);if(0==v.apply(l.callback.beforeDrop,[N.treeId,f,k,R,p],!0))return void b.selectNodes($,f);var x=p?v.clone(f):f;R==w.move.TYPE_INNER&&v.canAsync(N,k)?b.asyncNode(N,k,!1,n):n()}else b.selectNodes($,f),l.treeObj.trigger(w.event.DROP,[i,l.treeId,f,null,null,null])}}function r(){return!1}var a,d,l=y.getSetting(i.data.treeId),c=y.getRoot(l),u=y.getRoots();if(2==i.button||!l.edit.enable||!l.edit.drag.isCopy&&!l.edit.drag.isMove)return!0;var h=i.target,p=y.getRoot(l).curSelectedList,f=[];if(y.isSelectedNode(l,n))for(a=0,d=p.length;d>a;a++){if(p[a].editNameFlag&&v.eqs(h.tagName,"input")&&null!==h.getAttribute("treeNode"+w.id.INPUT))return!0;if(f.push(p[a]),f[0].parentTId!==p[a].parentTId){f=[n];break}}else f=[n];b.editNodeBlur=!0,b.cancelCurEditNode(l);var m,g,C,k,x,T=e(l.treeObj.get(0).ownerDocument),M=e(l.treeObj.get(0).ownerDocument.body),S=!1,N=l,$=l,D=null,I=null,E=null,R=w.move.TYPE_INNER,A=i.clientX,O=i.clientY,L=(new Date).getTime();return v.uCanDo(l)&&T.bind("mousemove",o),T.bind("mouseup",s),T.bind("selectstart",r),i.preventDefault&&i.preventDefault(),!0}},p={getAbs:function(e){var t=e.getBoundingClientRect(),i=document.body.scrollTop+document.documentElement.scrollTop,n=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+n,t.top+i]},inputFocus:function(e){e.get(0)&&(e.focus(),v.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},showIfameMask:function(e,t){for(var i=y.getRoot(e);i.dragMaskList.length>0;)i.dragMaskList[0].remove(),i.dragMaskList.shift();if(t)for(var n=_("iframe",e),o=0,s=n.length;s>o;o++){var r=n.get(o),a=v.getAbs(r),d=_("<div id='zTreeMask_"+o+"' class='zTreeMask' style='top:"+a[1]+"px; left:"+a[0]+"px; width:"+r.offsetWidth+"px; height:"+r.offsetHeight+"px;'></div>",e);d.appendTo(_("body",e)),i.dragMaskList.push(d)}}},f={addEditBtn:function(e,t){if(!(t.editNameFlag||_(t,w.id.EDIT,e).length>0)&&v.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var i=_(t,w.id.A,e),n="<span class='"+w.className.BUTTON+" edit' id='"+t.tId+w.id.EDIT+"' title='"+v.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+w.id.EDIT+" style='display:none;'></span>";i.append(n),_(t,w.id.EDIT,e).bind("click",function(){return v.uCanDo(e)&&0!=v.apply(e.callback.beforeEditName,[e.treeId,t],!0)?(b.editNode(e,t),!1):!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||_(t,w.id.REMOVE,e).length>0)&&v.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var i=_(t,w.id.A,e),n="<span class='"+w.className.BUTTON+" remove' id='"+t.tId+w.id.REMOVE+"' title='"+v.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+w.id.REMOVE+" style='display:none;'></span>";i.append(n),_(t,w.id.REMOVE,e).bind("click",function(){return v.uCanDo(e)&&0!=v.apply(e.callback.beforeRemove,[e.treeId,t],!0)?(b.removeNode(e,t),e.treeObj.trigger(w.event.REMOVE,[e.treeId,t]),!1):!1}).bind("mousedown",function(e){return!0}).show()}},addHoverDom:function(e,t){y.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(b.addEditBtn(e,t),b.addRemoveBtn(e,t)),v.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,i){var n=y.getRoot(e),o=e.data.key.name,s=n.curEditNode;
if(s){var r=n.curEditInput,a=t?t:i?s[o]:r.val();if(v.apply(e.callback.beforeRename,[e.treeId,s,a,i],!0)===!1)return!1;s[o]=a;var d=_(s,w.id.A,e);d.removeClass(w.node.CURSELECTED_EDIT),r.unbind(),b.setNodeName(e,s),s.editNameFlag=!1,n.curEditNode=null,n.curEditInput=null,b.selectNode(e,s,!1),e.treeObj.trigger(w.event.RENAME,[e.treeId,s,i])}return n.noSelection=!0,!0},editNode:function(e,t){var i=y.getRoot(e);if(b.editNodeBlur=!1,y.isSelectedNode(e,t)&&i.curEditNode==t&&t.editNameFlag)return void setTimeout(function(){v.inputFocus(i.curEditInput)},0);var n=e.data.key.name;t.editNameFlag=!0,b.removeTreeDom(e,t),b.cancelCurEditNode(e),b.selectNode(e,t,!1),_(t,w.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+w.id.INPUT+"' treeNode"+w.id.INPUT+" >");var o=_(t,w.id.INPUT,e);o.attr("value",t[n]),e.edit.editNameSelectAll?v.inputSelect(o):v.inputFocus(o),o.bind("blur",function(t){b.editNodeBlur||b.cancelCurEditNode(e)}).bind("keydown",function(t){"13"==t.keyCode?(b.editNodeBlur=!0,b.cancelCurEditNode(e)):"27"==t.keyCode&&b.cancelCurEditNode(e,null,!0)}).bind("click",function(e){return!1}).bind("dblclick",function(e){return!1}),_(t,w.id.A,e).addClass(w.node.CURSELECTED_EDIT),i.curEditInput=o,i.noSelection=!1,i.curEditNode=t},moveNode:function(e,t,i,n,o,s){var r=y.getRoot(e),a=e.data.key.children;if(t!=i&&(!e.data.keep.leaf||!t||t.isParent||n!=w.move.TYPE_INNER)){var d=i.parentTId?i.getParentNode():r,l=null===t||t==r;l&&null===t&&(t=r),l&&(n=w.move.TYPE_INNER);var c=t.parentTId?t.getParentNode():r;n!=w.move.TYPE_PREV&&n!=w.move.TYPE_NEXT&&(n=w.move.TYPE_INNER),n==w.move.TYPE_INNER&&(l?i.parentTId=null:(t.isParent||(t.isParent=!0,t.open=!!t.open,b.setNodeLineIcos(e,t)),i.parentTId=t.tId));var u,h;if(l)u=e.treeObj,h=u;else{if(s||n!=w.move.TYPE_INNER?s||b.expandCollapseNode(e,t.getParentNode(),!0,!1):b.expandCollapseNode(e,t,!0,!1),u=_(t,e),h=_(t,w.id.UL,e),u.get(0)&&!h.get(0)){var p=[];b.makeUlHtml(e,t,p,""),u.append(p.join(""))}h=_(t,w.id.UL,e)}var f=_(i,e);f.get(0)?u.get(0)||f.remove():f=b.appendNodes(e,i.level,[i],null,!1,!0).join(""),h.get(0)&&n==w.move.TYPE_INNER?h.append(f):u.get(0)&&n==w.move.TYPE_PREV?u.before(f):u.get(0)&&n==w.move.TYPE_NEXT&&u.after(f);var m,g,v=-1,C=0,k=null,x=null,T=i.level;if(i.isFirstNode)v=0,d[a].length>1&&(k=d[a][1],k.isFirstNode=!0);else if(i.isLastNode)v=d[a].length-1,k=d[a][v-1],k.isLastNode=!0;else for(m=0,g=d[a].length;g>m;m++)if(d[a][m].tId==i.tId){v=m;break}if(v>=0&&d[a].splice(v,1),n!=w.move.TYPE_INNER)for(m=0,g=c[a].length;g>m;m++)c[a][m].tId==t.tId&&(C=m);if(n==w.move.TYPE_INNER?(t[a]||(t[a]=new Array),t[a].length>0&&(x=t[a][t[a].length-1],x.isLastNode=!1),t[a].splice(t[a].length,0,i),i.isLastNode=!0,i.isFirstNode=1==t[a].length):t.isFirstNode&&n==w.move.TYPE_PREV?(c[a].splice(C,0,i),x=t,x.isFirstNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!0,i.isLastNode=!1):t.isLastNode&&n==w.move.TYPE_NEXT?(c[a].splice(C+1,0,i),x=t,x.isLastNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!0):(n==w.move.TYPE_PREV?c[a].splice(C,0,i):c[a].splice(C+1,0,i),i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!1),y.fixPIdKeyValue(e,i),y.setSonNodeLevel(e,i.getParentNode(),i),b.setNodeLineIcos(e,i),b.repairNodeLevelClass(e,i,T),!e.data.keep.parent&&d[a].length<1){d.isParent=!1,d.open=!1;var M=_(d,w.id.UL,e),S=_(d,w.id.SWITCH,e),N=_(d,w.id.ICON,e);b.replaceSwitchClass(d,S,w.folder.DOCU),b.replaceIcoClass(d,N,w.folder.DOCU),M.css("display","none")}else k&&b.setNodeLineIcos(e,k);x&&b.setNodeLineIcos(e,x),e.check&&e.check.enable&&b.repairChkClass&&(b.repairChkClass(e,d),b.repairParentChkClassWithSelf(e,d),d!=i.parent&&b.repairParentChkClassWithSelf(e,i)),s||b.expandCollapseParentNode(e,i.getParentNode(),!0,o)}},removeEditBtn:function(e,t){_(t,w.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){_(t,w.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,b.removeEditBtn(e,t),b.removeRemoveBtn(e,t),v.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,i){if(i!==t.level){var n=_(t,e),o=_(t,w.id.A,e),s=_(t,w.id.UL,e),r=w.className.LEVEL+i,a=w.className.LEVEL+t.level;n.removeClass(r),n.addClass(a),o.removeClass(r),o.addClass(a),s.removeClass(r),s.addClass(a)}},selectNodes:function(e,t){for(var i=0,n=t.length;n>i;i++)b.selectNode(e,t[i],i>0)}},m={tools:p,view:f,event:u,data:c};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,m);var g=e.fn.zTree,v=g._z.tools,w=g.consts,b=g._z.view,y=g._z.data,_=(g._z.event,v.$);y.exSetting(i),y.addInitBind(s),y.addInitUnBind(r),y.addInitCache(o),y.addInitNode(d),y.addInitProxy(a),y.addInitRoot(n),y.addZTreeTools(l);var C=b.cancelPreSelectedNode;b.cancelPreSelectedNode=function(e,t){for(var i=y.getRoot(e).curSelectedList,n=0,o=i.length;o>n&&(t&&t!==i[n]||(b.removeTreeDom(e,i[n]),!t));n++);C&&C.apply(b,arguments)};var k=b.createNodes;b.createNodes=function(e,t,i,n){k&&k.apply(b,arguments),i&&b.repairParentChkClassWithSelf&&b.repairParentChkClassWithSelf(e,n)};var x=b.makeNodeUrl;b.makeNodeUrl=function(e,t){return e.edit.enable?null:x.apply(b,arguments)};var T=b.removeNode;b.removeNode=function(e,t){var i=y.getRoot(e);i.curEditNode===t&&(i.curEditNode=null),T&&T.apply(b,arguments)};var M=b.selectNode;b.selectNode=function(e,t,i){var n=y.getRoot(e);return y.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag?!1:(M&&M.apply(b,arguments),b.addHoverDom(e,t),!0)};var S=v.uCanDo;v.uCanDo=function(e,t){var i=y.getRoot(e);return t&&(v.eqs(t.type,"mouseover")||v.eqs(t.type,"mouseout")||v.eqs(t.type,"mousedown")||v.eqs(t.type,"mouseup"))?!0:(i.curEditNode&&(b.editNodeBlur=!1,i.curEditInput.focus()),!i.curEditNode&&(S?S.apply(b,arguments):!0))}}(jQuery);